(()=>{var r={1924:(e,t,r)=>{"use strict";var n=r(210),o=r(5559),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){t=n(e,!!t);return"function"==typeof t&&-1<i(e,".prototype.")?o(t):t}},5559:(e,t,r)=>{"use strict";var n=r(8612),r=r(210),o=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||n.call(i,o),l=r("%Object.getOwnPropertyDescriptor%",!0),s=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(s)try{s({},"a",{value:1})}catch(e){s=null}e.exports=function(e){var t=a(n,i,arguments);return l&&s&&l(t,"length").configurable&&s(t,"length",{value:1+c(0,e.length-(arguments.length-1))}),t};function u(){return a(n,o,arguments)}s?s(e.exports,"apply",{value:u}):e.exports.apply=u},251:(e,t,r)=>{var u=r(2215),d=r(2584),n=r(609),p=r(8420),h=r(2847),f=r(8923),y=Date.prototype.getTime;function m(e){return null==e}function g(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||0<e.length&&"number"!=typeof e[0])}e.exports=function c(e,t,r){r=r||{};return!!(r.strict?n(e,t):e===t)||(!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?n(e,t):e==t:function(e,t,r){var n,o;if(typeof e!=typeof t)return!1;if(m(e)||m(t))return!1;if(e.prototype!==t.prototype)return!1;if(d(e)!==d(t))return!1;var i=p(e),a=p(t);if(i!==a)return!1;if(i||a)return e.source===t.source&&h(e)===h(t);if(f(e)&&f(t))return y.call(e)===y.call(t);i=g(e),a=g(t);if(i!==a)return!1;if(i||a){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(typeof e!=typeof t)return!1;try{var l=u(e),s=u(t)}catch(e){return!1}if(l.length!==s.length)return!1;for(l.sort(),s.sort(),n=l.length-1;0<=n;n--)if(l[n]!=s[n])return!1;for(n=l.length-1;0<=n;n--)if(!c(e[o=l[n]],t[o],r))return!1;return!0}(e,t,r))}},4289:(e,t,r)=>{"use strict";function n(e,t){var r=2<arguments.length?arguments[2]:{},n=c(t);u&&(n=p.call(n,Object.getOwnPropertySymbols(t)));for(var o,i,a,l,s=0;s<n.length;s+=1)o=e,i=n[s],a=t[n[s]],l=r[n[s]],i in o&&("function"!=typeof l||"[object Function]"!==d.call(l)||!l())||(f?h(o,i,{configurable:!0,enumerable:!1,value:a,writable:!0}):o[i]=a)}var c=r(2215),u="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),d=Object.prototype.toString,p=Array.prototype.concat,h=Object.defineProperty,f=h&&function(){var e={};try{for(var t in h(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}();n.supportsDescriptors=!!f,e.exports=n},5987:e=>{"use strict";var h={single_source_shortest_paths:function(e,t,r){var n={},o={};o[t]=0;var i,a,l,s,c,u,d,p=h.PriorityQueue.make();for(p.push(t,0);!p.empty();)for(l in a=(i=p.pop()).value,s=i.cost,c=e[a]||{})c.hasOwnProperty(l)&&(u=s+c[l],d=o[l],(void 0===o[l]||u<d)&&(o[l]=u,p.push(l,u),n[l]=a));if(void 0!==r&&void 0===o[r])throw t=["Could not find a path from ",t," to ",r,"."].join(""),new Error(t);return n},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],n=t;n;)r.push(n),e[n],n=e[n];return r.reverse(),r},find_path:function(e,t,r){e=h.single_source_shortest_paths(e,t,r);return h.extract_shortest_path_from_predecessor_list(e,r)},PriorityQueue:{make:function(e){var t,r=h.PriorityQueue,n={};for(t in e=e||{},r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.queue=[],n.sorter=e.sorter||r.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=h},2378:e=>{"use strict";e.exports=function(e){for(var t=[],r=e.length,n=0;n<r;n++){var o,i=e.charCodeAt(n);55296<=i&&i<=56319&&n+1<r&&(56320<=(o=e.charCodeAt(n+1))&&o<=57343&&(i=1024*(i-55296)+o-56320+65536,n+=1)),i<128?t.push(i):i<2048?(t.push(i>>6|192),t.push(63&i|128)):i<55296||57344<=i&&i<65536?(t.push(i>>12|224),t.push(i>>6&63|128),t.push(63&i|128)):65536<=i&&i<=1114111?(t.push(i>>18|240),t.push(i>>12&63|128),t.push(i>>6&63|128),t.push(63&i|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},4470:e=>{"use strict";function u(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)}function d(e){if(e&&"[object Object]"===i.call(e)){var t,r=o.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&o.call(e.constructor.prototype,"isPrototypeOf");if(!e.constructor||r||n){for(t in e);return void 0===t||o.call(e,t)}}}function p(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue}function h(e,t){if("__proto__"===t){if(!o.call(e,t))return;if(n)return n(e,t).value}return e[t]}var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor;e.exports=function e(){var t,r,n,o,i,a=arguments[0],l=1,s=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},l=2),(null==a||"object"!=typeof a&&"function"!=typeof a)&&(a={});l<s;++l)if(null!=(t=arguments[l]))for(r in t)i=h(a,r),a!==(n=h(t,r))&&(c&&n&&(d(n)||(o=u(n)))?(i=o?(o=!1,i&&u(i)?i:[]):i&&d(i)?i:{},p(a,{name:r,newValue:e(c,i,n)})):void 0!==n&&p(a,{name:r,newValue:n}));return a}},7529:e=>{var L=-1;function T(e,t,r){if(e==t)return e?[[0,e]]:[];(r<0||e.length<r)&&(r=null);var n=B(e,t),o=e.substring(0,n),n=R(e=e.substring(n),t=t.substring(n)),i=e.substring(e.length-n),e=function(e,t){if(!e)return[[1,t]];if(!t)return[[L,e]];var r=e.length>t.length?e:t,n=e.length>t.length?t:e,o=r.indexOf(n);if(-1!=o)return r=[[1,r.substring(0,o)],[0,n],[1,r.substring(o+n.length)]],e.length>t.length&&(r[0][0]=r[2][0]=L),r;if(1==n.length)return[[L,e],[1,t]];var i,a,o=function(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||2*n.length<r.length)return null;function o(e,t,r){for(var n,o,i,a,l=e.substring(r,r+Math.floor(e.length/4)),s=-1,c="";-1!=(s=t.indexOf(l,s+1));){var u=B(e.substring(r),t.substring(s)),d=R(e.substring(0,r),t.substring(0,s));c.length<d+u&&(c=t.substring(s-d,s)+t.substring(s,s+u),n=e.substring(0,r-d),o=e.substring(r+u),i=t.substring(0,s-d),a=t.substring(s+u))}return 2*c.length>=e.length?[n,o,i,a,c]:null}var i,a,l,s,c=o(r,n,Math.ceil(r.length/4)),n=o(r,n,Math.ceil(r.length/2));return c||n?(r=!n||c&&c[4].length>n[4].length?c:n,e.length>t.length?(i=r[0],a=r[1],l=r[2],s=r[3]):(l=r[0],s=r[1],i=r[2],a=r[3]),[i,a,l,s,r[4]]):null}(e,t);if(o)return r=o[0],n=o[1],a=o[2],i=o[3],o=o[4],r=T(r,a),a=T(n,i),r.concat([[0,o]],a);for(var l=e,s=t,c=l.length,u=s.length,d=Math.ceil((c+u)/2),p=d,h=2*d,f=new Array(h),y=new Array(h),m=0;m<h;m++)f[m]=-1,y[m]=-1;f[p+1]=0;for(var g=c-u,b=g%2!=(y[p+1]=0),v=0,_=0,w=0,E=0,I=0;I<d;I++){for(var C=-I+v;C<=I-_;C+=2){for(var x=p+C,k=(P=C==-I||C!=I&&f[x-1]<f[x+1]?f[x+1]:f[x-1]+1)-C;P<c&&k<u&&l.charAt(P)==s.charAt(k);)P++,k++;if(c<(f[x]=P))_+=2;else if(u<k)v+=2;else if(b&&0<=(A=p+g-C)&&A<h&&-1!=y[A]&&P>=(O=c-y[A]))return j(l,s,P,k)}for(var S=-I+w;S<=I-E;S+=2){for(var O,P,A=p+S,D=(O=S==-I||S!=I&&y[A-1]<y[A+1]?y[A+1]:y[A-1]+1)-S;O<c&&D<u&&l.charAt(c-O-1)==s.charAt(u-D-1);)O++,D++;if(c<(y[A]=O))E+=2;else if(u<D)w+=2;else if(!b)if(0<=(x=p+g-S)&&x<h&&-1!=f[x]&&(k=p+(P=f[x])-x,P>=(O=c-O)))return j(l,s,P,k)}}return[[L,l],[1,s]]}(e=e.substring(0,e.length-n),t=t.substring(0,t.length-n)),a=(o&&e.unshift([0,o]),i&&e.push([0,i]),function e(t){t.push([0,""]);for(var r,n=0,o=0,i=0,a="",l="";n<t.length;)switch(t[n][0]){case 1:i++,l+=t[n][1],n++;break;case L:o++,a+=t[n][1],n++;break;case 0:1<o+i?(0!==o&&0!==i&&(0!==(r=B(l,a))&&(0<n-o-i&&0==t[n-o-i-1][0]?t[n-o-i-1][1]+=l.substring(0,r):(t.splice(0,0,[0,l.substring(0,r)]),n++),l=l.substring(r),a=a.substring(r)),0!==(r=R(l,a))&&(t[n][1]=l.substring(l.length-r)+t[n][1],l=l.substring(0,l.length-r),a=a.substring(0,a.length-r))),0===o?t.splice(n-i,o+i,[1,l]):0===i?t.splice(n-o,o+i,[L,a]):t.splice(n-o-i,o+i,[L,a],[1,l]),n=n-o-i+(o?1:0)+(i?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,o=i=0,l=a=""}""===t[t.length-1][1]&&t.pop();var s=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),s=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),s=!0)),n++;s&&e(t)}(e),null!=r&&(t=function(e,t){if(0===t)return[0,e];for(var r=0,n=0;n<e.length;n++){var o=e[n];if(o[0]===L||0===o[0]){var i,a,l=r+o[1].length;if(t===l)return[n+1,e];if(t<l)return e=e.slice(),a=[o[0],o[1].slice(0,i=t-r)],o=[o[0],o[1].slice(i)],e.splice(n,1,a,o),[n+1,e];r=l}}throw new Error("cursor_pos is out of bounds!")}(n=e,r),o=t[1],t=t[0],i=o[t],r=o[t+1],e=null==i||0!==i[0]?n:null!=r&&i[1]+r[1]===r[1]+i[1]?(o.splice(t,2,r,i),p(o,t,2)):null!=r&&0===r[1].indexOf(i[1])?(o.splice(t,2,[r[0],i[1]],[0,i[1]]),0<(i=r[1].slice(i[1].length)).length&&o.splice(t+2,0,[r[0],i]),p(o,t,3)):n),e);function l(e){return 56320<=e.charCodeAt(0)&&e.charCodeAt(0)<=57343}for(var s,c=!1,u=2;u<a.length;u+=1)0===a[u-2][0]&&55296<=(s=a[u-2][1]).charCodeAt(s.length-1)&&s.charCodeAt(s.length-1)<=56319&&a[u-1][0]===L&&l(a[u-1][1])&&1===a[u][0]&&l(a[u][1])&&(c=!0,a[u-1][1]=a[u-2][1].slice(-1)+a[u-1][1],a[u][1]=a[u-2][1].slice(-1)+a[u][1],a[u-2][1]=a[u-2][1].slice(0,-1));if(!c)return a;for(var d=[],u=0;u<a.length;u+=1)0<a[u][1].length&&d.push(a[u]);return d}function j(e,t,r,n){var o=e.substring(0,r),i=t.substring(0,n),e=e.substring(r),r=t.substring(n),t=T(o,i),n=T(e,r);return t.concat(n)}function B(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),o=n,i=0;r<o;)e.substring(i,o)==t.substring(i,o)?i=r=o:n=o,o=Math.floor((n-r)/2+r);return o}function R(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,n=Math.min(e.length,t.length),o=n,i=0;r<o;)e.substring(e.length-o,e.length-i)==t.substring(t.length-o,t.length-i)?i=r=o:n=o,o=Math.floor((n-r)/2+r);return o}var t=T;function p(e,t,r){for(var n,o,i=t+r-1;0<=i&&t-1<=i;i--)i+1<e.length&&(n=e[i],o=e[i+1],n[0]===o[1]&&e.splice(i,2,[n[0],n[1]+o[1]]));return e}t.INSERT=1,t.DELETE=L,t.EQUAL=0,e.exports=t},7648:e=>{"use strict";var s=Array.prototype.slice,c=Object.prototype.toString;e.exports=function(t){var r=this;if("function"!=typeof r||"[object Function]"!==c.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var n=s.call(arguments,1),e=Math.max(0,r.length-n.length),o=[],i=0;i<e;i++)o.push("$"+i);var a,l=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(function(){var e;return this instanceof l?(e=r.apply(this,n.concat(s.call(arguments))),Object(e)===e?e:this):r.apply(t,n.concat(s.call(arguments)))});return r.prototype&&((a=function(){}).prototype=r.prototype,l.prototype=new a,a.prototype=null),l}},8612:(e,t,r)=>{"use strict";r=r(7648);e.exports=Function.prototype.bind||r},5972:e=>{"use strict";function t(){return"string"==typeof function(){}.name}var r=Object.getOwnPropertyDescriptor;if(r)try{r([],"length")}catch(e){r=null}t.functionsHaveConfigurableNames=function(){if(!t()||!r)return!1;var e=r(function(){},"name");return!!e&&!!e.configurable};var n=Function.prototype.bind;t.boundFunctionsHaveNames=function(){return t()&&"function"==typeof n&&""!==function(){}.bind().name},e.exports=t},210:(e,t,r)=>{"use strict";var n,p=SyntaxError,o=Function,h=TypeError,i=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch(e){f=null}function a(){throw new h}function y(e){var t,r;return"%AsyncFunction%"===e?t=i("async function () {}"):"%GeneratorFunction%"===e?t=i("function* () {}"):"%AsyncGeneratorFunction%"===e?t=i("async function* () {}"):"%AsyncGenerator%"===e?(r=y("%AsyncGeneratorFunction%"))&&(t=r.prototype):"%AsyncIteratorPrototype%"===e&&(r=y("%AsyncGenerator%"))&&(t=c(r.prototype)),g[e]=t}var l=f?function(){try{return a}catch(e){try{return f(arguments,"callee").get}catch(e){return a}}}():a,s=r(1405)(),c=Object.getPrototypeOf||function(e){return e.__proto__},m={},u="undefined"==typeof Uint8Array?n:c(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":s?c([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":m,"%AsyncGenerator%":m,"%AsyncGeneratorFunction%":m,"%AsyncIteratorPrototype%":m,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":m,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":s?c(c([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&s?c((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&s?c((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":s?c(""[Symbol.iterator]()):n,"%Symbol%":s?Symbol:n,"%SyntaxError%":p,"%ThrowTypeError%":l,"%TypedArray%":u,"%TypeError%":h,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},s=r(8612),v=r(7642),_=s.call(Function.call,Array.prototype.concat),w=s.call(Function.apply,Array.prototype.splice),E=s.call(Function.call,String.prototype.replace),I=s.call(Function.call,String.prototype.slice),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,x=/\\(\\)?/g;e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new h("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof t)throw new h('"allowMissing" argument must be a boolean');var r=function(e){var t=I(e,0,1),r=I(e,-1);if("%"===t&&"%"!==r)throw new p("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new p("invalid intrinsic syntax, expected opening `%`");var o=[];return E(e,C,function(e,t,r,n){o[o.length]=r?E(n,x,"$1"):t||e}),o}(e),n=0<r.length?r[0]:"",o=function(e,t){var r,n=e;if(v(b,n)&&(n="%"+(r=b[n])[0]+"%"),v(g,n)){var o=g[n];if(void 0!==(o=o===m?y(n):o)||t)return{alias:r,name:n,value:o};throw new h("intrinsic "+e+" exists, but is not available. Please file an issue!")}throw new p("intrinsic "+e+" does not exist!")}("%"+n+"%",t),i=(o.name,o.value),a=!1,o=o.alias;o&&(n=o[0],w(r,_([0,1],o)));for(var l=1,s=!0;l<r.length;l+=1){var c=r[l],u=I(c,0,1),d=I(c,-1);if(('"'===u||"'"===u||"`"===u||'"'===d||"'"===d||"`"===d)&&u!==d)throw new p("property names with quotes must have matching quotes");if("constructor"!==c&&s||(a=!0),v(g,u="%"+(n+="."+c)+"%"))i=g[u];else if(null!=i){if(!(c in i)){if(t)return;throw new h("base intrinsic for "+e+" exists, but the property is not available.")}i=f&&l+1>=r.length?(s=!!(d=f(i,c)))&&"get"in d&&!("originalValue"in d.get)?d.get:i[c]:(s=v(i,c),i[c]),s&&!a&&(g[u]=i)}}return i}},1405:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(5419);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},5419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){r=Object.getOwnPropertyDescriptor(e,t);if(42!==r.value||!0!==r.enumerable)return!1}return!0}},7642:(e,t,r)=>{"use strict";r=r(8612);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},2584:(e,t,r)=>{"use strict";function n(e){return!(i&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===a(e)}function o(e){return!!n(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Array]"!==a(e)&&"[object Function]"===a(e.callee)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,a=r(1924)("Object.prototype.toString"),r=function(){return n(arguments)}();n.isLegacyArguments=o,e.exports=r?n:o},8923:e=>{"use strict";var t=Date.prototype.getDay,r=Object.prototype.toString,n="function"==typeof Symbol&&!!Symbol.toStringTag;e.exports=function(e){return"object"==typeof e&&null!==e&&(n?function(e){try{return t.call(e),!0}catch(e){return!1}}(e):"[object Date]"===r.call(e))}},8420:(e,t,r)=>{"use strict";var n,o,i,a,l,s=r(1924),r=r(5419)()&&!!Symbol.toStringTag,c=(r&&(n=s("Object.prototype.hasOwnProperty"),o=s("RegExp.prototype.exec"),i={},l={toString:a=function(){throw i},valueOf:a},"symbol"==typeof Symbol.toPrimitive&&(l[Symbol.toPrimitive]=a)),s("Object.prototype.toString")),u=Object.getOwnPropertyDescriptor;e.exports=r?function(e){if(!e||"object"!=typeof e)return!1;var t=u(e,"lastIndex");if(!t||!n(t,"value"))return!1;try{o(e,l)}catch(e){return e===i}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===c(e)}},5961:(e,t,r)=>{"use strict";var n=p(r(2289)),l=p(r(2276)),i=p(r(5443)),o=p(r(7044)),a=p(r(9972)),s=p(r(5065)),c=p(r(8532)),u=r(2362),d=p(r(6025));function p(e){return e&&e.__esModule?e:{default:e}}function h(){}function f(e,t,r){var n=new h;if(void 0===e)throw Error("No element to render on was provided.");return n._renderProperties=(0,a.default)(e),n._encodings=[],n._options=d.default,n._errorHandler=new c.default(n),void 0!==t&&((r=r||{}).format||(r.format=g()),n.options(r)[r.format](t,r).render()),n}for(var y in f.getModule=function(e){return n.default[e]},n.default)n.default.hasOwnProperty(y)&&function(i,a){h.prototype[a]=h.prototype[a.toUpperCase()]=h.prototype[a.toLowerCase()]=function(r,n){var o=this;return o._errorHandler.wrapBarcodeCall(function(){n.text=void 0===n.text?void 0:""+n.text;var e=(0,l.default)(o._options,n),e=(0,s.default)(e),t=i[a],t=m(r,t,e);return o._encodings.push(t),o})}}(n.default,y);function m(e,t,r){t=new t(e=""+e,r);if(!t.valid())throw new u.InvalidInputException(t.constructor.name,e);for(var n=t.encode(),n=(0,i.default)(n),o=0;o<n.length;o++)n[o].options=(0,l.default)(r,n[o].options);return n}function g(){return n.default.CODE128?"CODE128":Object.keys(n.default)[0]}function b(e,t,r){t=(0,i.default)(t);for(var n=0;n<t.length;n++)t[n].options=(0,l.default)(r,t[n].options),(0,o.default)(t[n].options);(0,o.default)(r),new e.renderer(e.element,t,r).render(),e.afterRender&&e.afterRender()}h.prototype.options=function(e){return this._options=(0,l.default)(this._options,e),this},h.prototype.blank=function(e){e=new Array(e+1).join("0");return this._encodings.push({data:e}),this},h.prototype.init=function(){if(this._renderProperties)for(var e in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){var t=this._renderProperties[e],r=(0,l.default)(this._options,t.options);"auto"==r.format&&(r.format=g()),this._errorHandler.wrapBarcodeCall(function(){var e=m(r.value,n.default[r.format.toUpperCase()],r);b(t,e,r)})}},h.prototype.render=function(){if(!this._renderProperties)throw new u.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)b(this._renderProperties[e],this._encodings,this._options);else b(this._renderProperties,this._encodings,this._options);return this},h.prototype._defaults=d.default,"undefined"!=typeof window&&(window.JsBarcode=f),"undefined"!=typeof jQuery&&(jQuery.fn.JsBarcode=function(e,t){var r=[];return jQuery(this).each(function(){r.push(this)}),f(r,e,t)}),e.exports=f},8012:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.data=t,this.text=r.text||t,this.options=r}},2089:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},o=(o=r(8012))&&o.__esModule?o:{default:o},l=r(4602),r=function(e){function a(e,t){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");t=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e.substring(1),t));return t.bytes=e.split("").map(function(e){return e.charCodeAt(0)}),t}var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(a,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.bytes,t=e.shift()-105,r=l.SET_BY_CODE[t];if(void 0===r)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&e.unshift(l.FNC1);e=a.next(e,1,r);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:a.getBar(t)+e.result+a.getBar((e.checksum+t)%l.MODULO)+a.getBar(l.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var e=this.options.ean128||!1;return e="string"==typeof e?"true"===e.toLowerCase():e}}],[{key:"getBar",value:function(e){return l.BARS[e]?l.BARS[e].toString():""}},{key:"correctIndex",value:function(e,t){var r;return t===l.SET_A?(r=e.shift())<32?r+64:r-32:t===l.SET_B?e.shift()-32:10*(e.shift()-48)+e.shift()-48}},{key:"next",value:function(e,t,r){if(!e.length)return{result:"",checksum:0};var n=void 0,o=void 0,i=(n=200<=e[0]?(o=e.shift()-105,void 0!==(i=l.SWAP[o])?a.next(e,t+1,i):(r!==l.SET_A&&r!==l.SET_B||o!==l.SHIFT||(e[0]=r===l.SET_A?95<e[0]?e[0]-96:e[0]:e[0]<32?e[0]+96:e[0]),a.next(e,t+1,r))):(o=a.correctIndex(e,r),a.next(e,t+1,r)),o*t);return{result:a.getBar(o)+n.result,checksum:i+n.checksum}}}]),a}(o.default);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=r},8238:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},n=(n=r(2089))&&n.__esModule?n:{default:n},i=r(4602),r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,i.A_START_CHAR+e,t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o(n,[{key:"valid",value:function(){return new RegExp("^"+i.A_CHARS+"+$").test(this.data)}}]),n}(n.default);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=r},1180:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},n=(n=r(2089))&&n.__esModule?n:{default:n},i=r(4602),r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,i.B_START_CHAR+e,t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o(n,[{key:"valid",value:function(){return new RegExp("^"+i.B_CHARS+"+$").test(this.data)}}]),n}(n.default);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=r},944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},n=(n=r(2089))&&n.__esModule?n:{default:n},i=r(4602),r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,i.C_START_CHAR+e,t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o(n,[{key:"valid",value:function(){return new RegExp("^"+i.C_CHARS+"+$").test(this.data)}}]),n}(n.default);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=r},8845:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(2089)),o=i(r(7293));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}r=function(e){function r(e,t){if(this instanceof r)return e=/^[\x00-\x7F\xC8-\xD3]+$/.test(e)?a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,(0,o.default)(e),t)):a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t)),a(e);throw new TypeError("Cannot call a class as a function")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r}(n.default);t.default=r},7293:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});function n(e){return e.match(new RegExp("^"+a.A_CHARS+"*"))[0].length}function o(e){return e.match(new RegExp("^"+a.B_CHARS+"*"))[0].length}function i(e){return e.match(new RegExp("^"+a.C_CHARS+"*"))[0]}var a=r(4602);function l(e,t){var r=t?a.A_CHARS:a.B_CHARS,n=e.match(new RegExp("^("+r+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(n)return n[1]+String.fromCharCode(204)+s(e.substring(n[1].length));n=e.match(new RegExp("^"+r+"+"))[0];return n.length===e.length?e:n+String.fromCharCode(t?205:206)+l(e.substring(n.length),!t)}function s(e){var t=i(e),r=t.length;if(r===e.length)return e;e=e.substring(r);r=n(e)>=o(e);return t+String.fromCharCode(r?206:205)+l(e,r)}t.default=function(e){var t;return(2<=i(e).length?a.C_START_CHAR+s(e):((t=n(e)>o(e))?a.A_START_CHAR:a.B_START_CHAR)+l(e,t)).replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(e,t){return String.fromCharCode(203)+t})}},4602:(e,t)=>{"use strict";var r;function n(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}Object.defineProperty(t,"__esModule",{value:!0});t.SET_A=0,t.SET_B=1,t.SET_C=2,t.SHIFT=98,t.START_A=103,t.START_B=104,t.START_C=105;t.MODULO=103,t.STOP=106,t.FNC1=207,t.SET_BY_CODE=(n(r={},103,0),n(r,104,1),n(r,105,2),r),t.SWAP={101:0,100:1,99:2},t.A_START_CHAR=String.fromCharCode(208),t.B_START_CHAR=String.fromCharCode(209),t.C_START_CHAR=String.fromCharCode(210),t.A_CHARS="[\0-_È-Ï]",t.B_CHARS="[ -È-Ï]",t.C_CHARS="(Ï*[0-9]{2}Ï*)",t.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]},4935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE128C=t.CODE128B=t.CODE128A=t.CODE128=void 0;var n=a(r(8845)),o=a(r(8238)),i=a(r(1180)),r=a(r(944));function a(e){return e&&e.__esModule?e:{default:e}}t.CODE128=n.default,t.CODE128A=o.default,t.CODE128B=i.default,t.CODE128C=r.default},3361:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE39=void 0;var o=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");e=e.toUpperCase(),t.mod43&&(e+=(r=function(e){for(var t=0,r=0;r<e.length;r++)t+=s(e[r]);return t%43}(e),i[r]));var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o(n,[{key:"encode",value:function(){for(var e=l("*"),t=0;t<this.data.length;t++)e+=l(this.data[t])+"0";return{data:e+=l("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),n}(((r=r(8012))&&r.__esModule?r:{default:r}).default),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],n=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e=s(e),n[e].toString(2)}function s(e){return i.indexOf(e)}t.CODE39=r},6454:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},o=r(1239),i=l(r(5532));function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}r=function(e){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return e.fontSize=!t.flat&&t.fontSize>10*t.width?10*t.width:t.fontSize,e.guardHeight=t.height+e.fontSize/2+t.textMargin,e}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(e,t){return this.text.substr(e,t)}},{key:"leftEncode",value:function(e,t){return(0,i.default)(e,t)}},{key:"rightText",value:function(e,t){return this.text.substr(e,t)}},{key:"rightEncode",value:function(e,t){return(0,i.default)(e,t)}},{key:"encodeGuarded",value:function(){var e={fontSize:this.fontSize},t={height:this.guardHeight};return[{data:o.SIDE_BIN,options:t},{data:this.leftEncode(),text:this.leftText(),options:e},{data:o.MIDDLE_BIN,options:t},{data:this.rightEncode(),text:this.rightText(),options:e},{data:o.SIDE_BIN,options:t}]}},{key:"encodeFlat",value:function(){return{data:[o.SIDE_BIN,this.leftEncode(),o.MIDDLE_BIN,this.rightEncode(),o.SIDE_BIN].join(""),text:this.text}}}]),r}(l(r(8012)).default);t.default=r},23:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}function n(e){return(10-e.substr(0,12).split("").map(function(e){return+e}).reduce(function(e,t,r){return r%2?e+3*t:e+t},0)%10)%10}var i=function(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e},a=r(1239),r=(r=r(6454))&&r.__esModule?r:{default:r},r=function(e){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");-1!==e.search(/^[0-9]{12}$/)&&(e+=n(e));e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return e.lastChar=t.lastChar,e}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),i(r,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===n(this.data)}},{key:"leftText",value:function(){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var e=this.data.substr(1,6),t=a.EAN13_STRUCTURE[this.data[0]];return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"leftEncode",this).call(this,e,t)}},{key:"rightText",value:function(){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var e=this.data.substr(7,6);return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"rightEncode",this).call(this,e,"RRRRRR")}},{key:"encodeGuarded",value:function(){var e=o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(e.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(e.push({data:"00"}),e.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),e}}]),r}(r.default);function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=r},6552:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},i=r(1239),a=l(r(5532));function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o(n,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var e=i.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,a.default)(this.data,e,"01"),text:this.text}}}]),n}(l(r(8012)).default);t.default=r},9668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},i=r(1239),a=l(r(5532));function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o(n,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var e=i.EAN5_STRUCTURE[this.data.split("").map(function(e){return+e}).reduce(function(e,t,r){return r%2?e+9*t:e+3*t},0)%10];return{data:"1011"+(0,a.default)(this.data,e,"01"),text:this.text}}}]),n}(l(r(8012)).default);t.default=r},5218:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}function i(e){return(10-e.substr(0,7).split("").map(function(e){return+e}).reduce(function(e,t,r){return r%2?e+t:e+3*t},0)%10)%10}var a=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},r=(r=r(6454))&&r.__esModule?r:{default:r},r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");-1!==e.search(/^[0-9]{7}$/)&&(e+=i(e));var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),a(n,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===i(this.data)}},{key:"leftText",value:function(){return o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var e=this.data.substr(0,4);return o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"leftEncode",this).call(this,e,"LLLL")}},{key:"rightText",value:function(){return o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var e=this.data.substr(4,4);return o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"rightEncode",this).call(this,e,"RRRR")}}]),n}(r.default);function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=r},5314:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.checksum=l;var i=a(r(5532));function a(e){return e&&e.__esModule?e:{default:e}}r=function(e){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");-1!==e.search(/^[0-9]{11}$/)&&(e+=l(e));e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return e.displayValue=t.displayValue,t.fontSize>10*t.width?e.fontSize=10*t.width:e.fontSize=t.fontSize,e.guardHeight=t.height+e.fontSize/2+t.textMargin,e}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==l(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return{data:(e+="101")+(0,i.default)(this.data.substr(0,6),"LLLLLL")+"01010"+(0,i.default)(this.data.substr(6,6),"RRRRRR")+"101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+(0,i.default)(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:(0,i.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:(0,i.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:(0,i.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e}}]),r}(a(r(8012)).default);function l(e){for(var t=0,r=1;r<11;r+=2)t+=parseInt(e[r]);for(r=0;r<11;r+=2)t+=3*parseInt(e[r]);return(10-t%10)%10}t.default=r},930:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},i=l(r(5532)),n=l(r(8012)),s=r(5314);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var u=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],d=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var r=c(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));if(r.isValid=!1,-1!==e.search(/^[0-9]{6}$/))r.middleDigits=e,r.upcA=p(e,"0"),r.text=t.text||""+r.upcA[0]+e+r.upcA[r.upcA.length-1],r.isValid=!0;else{if(-1===e.search(/^[01][0-9]{7}$/))return c(r);if(r.middleDigits=e.substring(1,e.length-1),r.upcA=p(r.middleDigits,e[0]),r.upcA[r.upcA.length-1]!==e[e.length-1])return c(r);r.isValid=!0}return r.displayValue=t.displayValue,t.fontSize>10*t.width?r.fontSize=10*t.width:r.fontSize=t.fontSize,r.guardHeight=t.height+r.fontSize/2+t.textMargin,r}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o(n,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return{data:(e+="101")+this.encodeMiddleDigits()+"010101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),e.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),e}},{key:"encodeMiddleDigits",value:function(){var e=this.upcA[0],t=this.upcA[this.upcA.length-1],t=d[parseInt(t)][parseInt(e)];return(0,i.default)(this.middleDigits,t)}}]),n}(n.default);function p(e,t){for(var r=parseInt(e[e.length-1]),n=u[r],o="",i=0,a=0;a<n.length;a++){var l=n[a];o+="X"===l?e[i++]:l}return(o=""+t+o)+(0,s.checksum)(o)}t.default=r},1239:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIDE_BIN="101",t.MIDDLE_BIN="01010",t.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},t.EAN2_STRUCTURE=["LL","LG","GL","GG"],t.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],t.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},5532:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(1239);t.default=function(r,n,o){var i,e=r.split("").map(function(e,t){return a.BINARIES[n[t]]}).map(function(e,t){return e?e[r[t]]:""});return o&&(i=r.length-1,e=e.map(function(e,t){return t<i?e+o:e})),e.join("")}},5321:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UPCE=t.UPC=t.EAN2=t.EAN5=t.EAN8=t.EAN13=void 0;var n=s(r(23)),o=s(r(5218)),i=s(r(9668)),a=s(r(6552)),l=s(r(5314)),r=s(r(930));function s(e){return e&&e.__esModule?e:{default:e}}t.EAN13=n.default,t.EAN8=o.default,t.EAN5=i.default,t.EAN2=a.default,t.UPC=l.default,t.UPCE=r.default},6447:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericBarcode=void 0;var o=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o(n,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),n}(((r=r(8012))&&r.__esModule?r:{default:r}).default);function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.GenericBarcode=r},3074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},o=r(4477);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var t=this,e=this.data.match(/.{2}/g).map(function(e){return t.encodePair(e)}).join("");return{data:o.START_BIN+e+o.END_BIN,text:this.text}}},{key:"encodePair",value:function(e){var r=o.BINARIES[e[1]];return o.BINARIES[e[0]].split("").map(function(e,t){return("1"===e?"111":"1")+("1"===r[t]?"000":"0")}).join("")}}]),r}(((r=r(8012))&&r.__esModule?r:{default:r}).default);t.default=r},6972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e){return e=e.substr(0,13).split("").map(function(e){return parseInt(e,10)}).reduce(function(e,t,r){return e+t*(3-r%2*2)},0),10*Math.ceil(e/10)-e}var i=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},r=(r=r(3074))&&r.__esModule?r:{default:r},r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");-1!==e.search(/^[0-9]{13}$/)&&(e+=o(e));var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),i(n,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===o(this.data)}}]),n}(r.default);function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=r},4477:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.START_BIN="1010",t.END_BIN="11101",t.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]},5984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITF14=t.ITF=void 0;var n=o(r(3074)),r=o(r(6972));function o(e){return e&&e.__esModule?e:{default:e}}t.ITF=n.default,t.ITF14=r.default},2582:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o(n,[{key:"encode",value:function(){for(var e="110",t=0;t<this.data.length;t++)for(var r=function(e,t){for(var r=0;r<t;r++)e="0"+e;return e}(r=parseInt(this.data[t]).toString(2),4-r.length),n=0;n<r.length;n++)e+="0"==r[n]?"100":"110";return{data:e+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),n}(((r=r(8012))&&r.__esModule?r:{default:r}).default);function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=r},7839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(n=r(2582))&&n.__esModule?n:{default:n},o=r(4348),r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,e+(0,o.mod10)(e),t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n}(n.default);t.default=r},8035:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(n=r(2582))&&n.__esModule?n:{default:n},o=r(4348),r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");e=(e+=(0,o.mod10)(e))+(0,o.mod10)(e);var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n}(n.default);t.default=r},5883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(n=r(2582))&&n.__esModule?n:{default:n},o=r(4348),r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,e+(0,o.mod11)(e),t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n}(n.default);t.default=r},6287:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(n=r(2582))&&n.__esModule?n:{default:n},o=r(4348),r=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");e=(e+=(0,o.mod11)(e))+(0,o.mod10)(e);var r=this,e=(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t);if(r)return!e||"object"!=typeof e&&"function"!=typeof e?r:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n}(n.default);t.default=r},4348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mod10=function(e){for(var t=0,r=0;r<e.length;r++){var n=parseInt(e[r]);(r+e.length)%2==0?t+=n:t+=2*n%10+Math.floor(2*n/10)}return(10-t%10)%10},t.mod11=function(e){for(var t=0,r=[2,3,4,5,6,7],n=0;n<e.length;n++){var o=parseInt(e[e.length-1-n]);t+=r[n%r.length]*o}return(11-t%11)%11}},8458:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MSI1110=t.MSI1010=t.MSI11=t.MSI10=t.MSI=void 0;var n=l(r(2582)),o=l(r(7839)),i=l(r(5883)),a=l(r(8035)),r=l(r(6287));function l(e){return e&&e.__esModule?e:{default:e}}t.MSI=n.default,t.MSI10=o.default,t.MSI11=i.default,t.MSI1010=a.default,t.MSI1110=r.default},123:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codabar=void 0;var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},r=function(e){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");0===e.search(/^[0-9\-\$\:\.\+\/]+$/)&&(e="A"+e+"A");e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e.toUpperCase(),t));return e.text=e.options.text||e.text.replace(/[A-D]/g,""),e}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var e=[],t=this.getEncodings(),r=0;r<this.data.length;r++)e.push(t[this.data.charAt(r)]),r!==this.data.length-1&&e.push("0");return{text:this.text,data:e.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),r}(((r=r(8012))&&r.__esModule?r:{default:r}).default);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.codabar=r},2289:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3361),o=r(4935),i=r(5321),a=r(5984),l=r(8458),s=r(3840),c=r(123),r=r(6447);t.default={CODE39:n.CODE39,CODE128:o.CODE128,CODE128A:o.CODE128A,CODE128B:o.CODE128B,CODE128C:o.CODE128C,EAN13:i.EAN13,EAN8:i.EAN8,EAN5:i.EAN5,EAN2:i.EAN2,UPC:i.UPC,UPCE:i.UPCE,ITF14:a.ITF14,ITF:a.ITF,MSI:l.MSI,MSI10:l.MSI10,MSI11:l.MSI11,MSI1010:l.MSI1010,MSI1110:l.MSI1110,pharmacode:s.pharmacode,codabar:c.codabar,GenericBarcode:r.GenericBarcode}},3840:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pharmacode=void 0;var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},r=function(e){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");t=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return t.number=parseInt(e,10),t}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"encode",value:function(){for(var e=this.number,t="";!isNaN(e)&&0!=e;)e=e%2==0?(t="11100"+t,(e-2)/2):(t="100"+t,(e-1)/2);return{data:t=t.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return 3<=this.number&&this.number<=131070}}]),r}(((r=r(8012))&&r.__esModule?r:{default:r}).default);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.pharmacode=r},8532:(e,t)=>{"use strict";function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.api=e}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(r,[{key:"handleCatch",value:function(e){if("InvalidInputException"!==e.name)throw e;if(this.api._options.valid===this.api._defaults.valid)throw e.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(e){try{var t=e.apply(void 0,arguments);return this.api._options.valid(!0),t}catch(e){return this.handleCatch(e),this.api}}}]),t.default=r},2362:(e,t)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});r(u,Error);var i=u,a=(r(c,Error),c),l=(r(s,Error),s);function s(){n(this,s);var e=o(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));return e.name="NoElementException",e.message="No element to render on.",e}function c(){n(this,c);var e=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return e.name="InvalidElementException",e.message="Not supported type to render on",e}function u(e,t){n(this,u);var r=o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return r.name="InvalidInputException",r.symbology=e,r.input=t,r.message='"'+r.input+'" is not a valid input for '+r.symbology,r}t.InvalidInputException=i,t.InvalidElementException=a,t.NoElementException=l},7044:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}},3898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(5065)),o=i(r(6025));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,r={};for(t in o.default)o.default.hasOwnProperty(t)&&(e.hasAttribute("jsbarcode-"+t.toLowerCase())&&(r[t]=e.getAttribute("jsbarcode-"+t.toLowerCase())),e.hasAttribute("data-"+t.toLowerCase())&&(r[t]=e.getAttribute("data-"+t.toLowerCase())));return r.value=e.getAttribute("jsbarcode-value")||e.getAttribute("data-value"),(0,n.default)(r)}},9972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(r(3898)),d=n(r(2804)),p=r(2362);function n(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t){if("string"==typeof t){var r=document.querySelectorAll(t);if(0!==r.length){for(var n=[],o=0;o<r.length;o++)n.push(e(r[o]));return n}}else{if(Array.isArray(t)){for(var i=[],a=0;a<t.length;a++)i.push(e(t[a]));return i}if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLImageElement)return l=t,{element:s=document.createElement("canvas"),options:(0,u.default)(l),renderer:d.default.CanvasRenderer,afterRender:function(){l.setAttribute("src",s.toDataURL())}};if(t&&t.nodeName&&"svg"===t.nodeName.toLowerCase()||"undefined"!=typeof SVGElement&&t instanceof SVGElement)return{element:t,options:(0,u.default)(t),renderer:d.default.SVGRenderer};if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement)return{element:t,options:(0,u.default)(t),renderer:d.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:d.default.CanvasRenderer};if(t&&"object"===(void 0===t?"undefined":c(t))&&!t.nodeName)return{element:t,renderer:d.default.ObjectRenderer};throw new p.InvalidElementException;var l,s}}},5443:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var n=[];return function e(t){if(Array.isArray(t))for(var r=0;r<t.length;r++)e(t[r]);else t.text=t.text||"",t.data=t.data||"",n.push(t)}(e),n}},2276:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){return r({},e,t)}},5065:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(t in r)r.hasOwnProperty(t)&&"string"==typeof e[t=r[t]]&&(e[t]=parseInt(e[t],10));return"string"==typeof e.displayValue&&(e.displayValue="false"!=e.displayValue),e}},6025:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}}},8204:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e},o=(a=r(2276))&&a.__esModule?a:{default:a},i=r(7899),a=(n(l,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var t=(0,o.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(t,this.encodings[e]),this.drawCanvasText(t,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d"),t=(e.save(),(0,i.calculateEncodingAttributes)(this.encodings,this.options,e),(0,i.getTotalWidthOfEncodings)(this.encodings)),r=(0,i.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=t+this.options.marginLeft+this.options.marginRight,this.canvas.height=r,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,t){var r=this.canvas.getContext("2d"),n=t.data,o="top"==e.textPosition?e.marginTop+e.fontSize+e.textMargin:e.marginTop;r.fillStyle=e.lineColor;for(var i=0;i<n.length;i++){var a=i*e.width+t.barcodePadding;"1"===n[i]?r.fillRect(a,o,e.width,e.height):n[i]&&r.fillRect(a,o,e.width,e.height*n[i])}}},{key:"drawCanvasText",value:function(e,t){var r,n,o=this.canvas.getContext("2d"),i=e.fontOptions+" "+e.fontSize+"px "+e.font;e.displayValue&&(n="top"==e.textPosition?e.marginTop+e.fontSize-e.textMargin:e.height+e.textMargin+e.marginTop+e.fontSize,o.font=i,"left"==e.textAlign||0<t.barcodePadding?(r=0,o.textAlign="left"):"right"==e.textAlign?(r=t.width-1,o.textAlign="right"):(r=t.width/2,o.textAlign="center"),o.fillText(t.text,r,n))}},{key:"moveCanvasDrawing",value:function(e){this.canvas.getContext("2d").translate(e.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),l);function l(e,t,r){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.canvas=e,this.encodings=t,this.options=r}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=a},2804:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(8204)),o=i(r(6917)),r=i(r(8652));function i(e){return e&&e.__esModule?e:{default:e}}t.default={CanvasRenderer:n.default,SVGRenderer:o.default,ObjectRenderer:r.default}},8652:(e,t)=>{"use strict";function n(e,t,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.object=e,this.encodings=t,this.options=r}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t,r){t&&o(e.prototype,t),r&&o(e,r)}(n,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t.default=n},7899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTotalWidthOfEncodings=t.calculateEncodingAttributes=t.getBarcodePadding=t.getEncodingHeight=t.getMaximumHeightOfEncodings=void 0;var s=(r=r(2276))&&r.__esModule?r:{default:r};function c(e,t){return t.height+(t.displayValue&&0<e.text.length?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function u(e,t,r){if(r.displayValue&&t<e){if("center"==r.textAlign)return Math.floor((e-t)/2);if("left"==r.textAlign)return 0;if("right"==r.textAlign)return Math.floor(e-t)}return 0}t.getMaximumHeightOfEncodings=function(e){for(var t=0,r=0;r<e.length;r++)e[r].height>t&&(t=e[r].height);return t},t.getEncodingHeight=c,t.getBarcodePadding=u,t.calculateEncodingAttributes=function(e,t,r){for(var n=0;n<e.length;n++){var o=e[n],i=(0,s.default)(t,o.options),a=i.displayValue?function(e,t,r){var n;if(r)n=r;else{if("undefined"==typeof document)return 0;n=document.createElement("canvas").getContext("2d")}return n.font=t.fontOptions+" "+t.fontSize+"px "+t.font,(r=n.measureText(e))?r.width:0}(o.text,i,r):0,l=o.data.length*i.width;o.width=Math.ceil(Math.max(a,l)),o.height=c(o,i),o.barcodePadding=u(a,l,i)}},t.getTotalWidthOfEncodings=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].width;return t}},6917:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e},i=(l=r(2276))&&l.__esModule?l:{default:l},o=r(7899),a="http://www.w3.org/2000/svg",l=(n(s,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var t=0;t<this.encodings.length;t++){var r=this.encodings[t],n=(0,i.default)(this.options,r.options),o=this.createGroup(e,n.marginTop,this.svg);this.setGroupOptions(o,n),this.drawSvgBarcode(o,n,r),this.drawSVGText(o,n,r),e+=r.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,o.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,o.getTotalWidthOfEncodings)(this.encodings),t=(0,o.getMaximumHeightOfEncodings)(this.encodings),e=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(e,t),this.options.background&&this.drawRect(0,0,e,t,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(e,t,r){for(var n=r.data,o="top"==t.textPosition?t.fontSize+t.textMargin:0,i=0,a=0,l=0;l<n.length;l++)a=l*t.width+r.barcodePadding,"1"===n[l]?i++:0<i&&(this.drawRect(a-t.width*i,o,t.width*i,t.height,e),i=0);0<i&&this.drawRect(a-t.width*(i-1),o,t.width*i,t.height,e)}},{key:"drawSVGText",value:function(e,t,r){var n,o,i=this.document.createElementNS(a,"text");t.displayValue&&(i.setAttribute("style","font:"+t.fontOptions+" "+t.fontSize+"px "+t.font),o="top"==t.textPosition?t.fontSize-t.textMargin:t.height+t.textMargin+t.fontSize,"left"==t.textAlign||0<r.barcodePadding?(n=0,i.setAttribute("text-anchor","start")):"right"==t.textAlign?(n=r.width-1,i.setAttribute("text-anchor","end")):(n=r.width/2,i.setAttribute("text-anchor","middle")),i.setAttribute("x",n),i.setAttribute("y",o),i.appendChild(this.document.createTextNode(r.text)),e.appendChild(i))}},{key:"setSvgAttributes",value:function(e,t){var r=this.svg;r.setAttribute("width",e+"px"),r.setAttribute("height",t+"px"),r.setAttribute("x","0px"),r.setAttribute("y","0px"),r.setAttribute("viewBox","0 0 "+e+" "+t),r.setAttribute("xmlns",a),r.setAttribute("version","1.1"),r.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(e,t,r){var n=this.document.createElementNS(a,"g");return n.setAttribute("transform","translate("+e+", "+t+")"),r.appendChild(n),n}},{key:"setGroupOptions",value:function(e,t){e.setAttribute("style","fill:"+t.lineColor+";")}},{key:"drawRect",value:function(e,t,r,n,o){var i=this.document.createElementNS(a,"rect");return i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",r),i.setAttribute("height",n),o.appendChild(i),i}}]),s);function s(e,t,r){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.svg=e,this.encodings=t,this.options=r,this.document=r.xmlDocument||document}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=l},4244:e=>{"use strict";function r(e){return e!=e}e.exports=function(e,t){return 0===e&&0===t?1/e==1/t:e===t||!(!r(e)||!r(t))}},609:(e,t,r)=>{"use strict";var n=r(4289),o=r(5559),i=r(4244),a=r(5624),r=r(2281),o=o(a(),Object);n(o,{getPolyfill:a,implementation:i,shim:r}),e.exports=o},5624:(e,t,r)=>{"use strict";var n=r(4244);e.exports=function(){return"function"==typeof Object.is?Object.is:n}},2281:(e,t,r)=>{"use strict";var n=r(5624),o=r(4289);e.exports=function(){var e=n();return o(Object,{is:e},{is:function(){return Object.is!==e}}),e}},8987:(e,t,r)=>{"use strict";var p,h,f,y,m,g,b,n,v,o;Object.keys||(p=Object.prototype.hasOwnProperty,h=Object.prototype.toString,f=r(1414),r=Object.prototype.propertyIsEnumerable,y=!r.call({toString:null},"toString"),m=r.call(function(){},"prototype"),g=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],b=function(e){var t=e.constructor;return t&&t.prototype===e},n={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},v=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!n["$"+e]&&p.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{b(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),o=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===h.call(e),n=f(e),o=t&&"[object String]"===h.call(e),i=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var a=m&&r;if(o&&0<e.length&&!p.call(e,0))for(var l=0;l<e.length;++l)i.push(String(l));if(n&&0<e.length)for(var s=0;s<e.length;++s)i.push(String(s));else for(var c in e)a&&"prototype"===c||!p.call(e,c)||i.push(String(c));if(y)for(var u=function(e){if("undefined"==typeof window||!v)return b(e);try{return b(e)}catch(e){return!1}}(e),d=0;d<g.length;++d)u&&"constructor"===g[d]||!p.call(e,g[d])||i.push(g[d]);return i}),e.exports=o},2215:(e,t,r)=>{"use strict";var n=Array.prototype.slice,o=r(1414),i=Object.keys,a=i?function(e){return i(e)}:r(8987),l=Object.keys;a.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return o(e)?l(n.call(e)):l(e)}):Object.keys=a,Object.keys||a},e.exports=a},1414:e=>{"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e);return"[object Arguments]"===t||"[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Function]"===r.call(e.callee)}},2592:(e,t,r)=>{const l=r(7138),s=r(5115),n=r(6907),o=r(3776);function i(r,n,o,i,e){var t=[].slice.call(arguments,1),a=t.length,t="function"==typeof t[a-1];if(!t&&!l())throw new Error("Callback required as last argument");if(!t){if(a<1)throw new Error("Too few arguments provided");return 1===a?(o=n,n=i=void 0):2!==a||n.getContext||(i=o,o=n,n=void 0),new Promise(function(e,t){try{const t=s.create(o,i);e(r(t,n,i))}catch(e){t(e)}})}if(a<2)throw new Error("Too few arguments provided");2===a?(e=o,o=n,n=i=void 0):3===a&&(n.getContext&&void 0===e?(e=i,i=void 0):(e=i,i=o,o=n,n=void 0));try{const l=s.create(o,i);e(null,r(l,n,i))}catch(r){e(r)}}t.create=s.create,t.toCanvas=i.bind(null,n.render),t.toDataURL=i.bind(null,n.renderToDataURL),t.toString=i.bind(null,function(e,t,r){return o.render(e,r)})},7138:e=>{e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},1845:(e,t,r)=>{const i=r(242).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,r=i(e),n=145===r?26:2*Math.ceil((r-13)/(2*t-2)),o=[r-7];for(let e=1;e<t-1;e++)o[e]=o[e-1]-n;return o.push(6),o.reverse()},t.getPositions=function(e){const r=[],n=t.getRowColCoords(e),o=n.length;for(let t=0;t<o;t++)for(let e=0;e<o;e++)0===t&&0===e||0===t&&e===o-1||t===o-1&&0===e||r.push([n[t],n[e]]);return r}},8260:(e,t,r)=>{const n=r(6910),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(e){this.mode=n.ALPHANUMERIC,this.data=e}i.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){var r=45*o.indexOf(this.data[t]);r+=o.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(o.indexOf(this.data[t]),6)},e.exports=i},7245:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(t,r){for(let e=0;e<r;e++)this.putBit(1==(t>>>r-e-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},3280:e=>{function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,r,n){e=e*this.size+t;this.data[e]=r,n&&(this.reservedBit[e]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},3424:(e,t,r)=>{const n=r(2378),o=r(6910);function i(e){this.mode=o.BYTE,this.data=new Uint8Array(n(e))}i.getBitsLength=function(e){return 8*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(r){for(let e=0,t=this.data.length;e<t;e++)r.put(this.data[e],8)},e.exports=i},5393:(e,t,r)=>{const n=r(4908),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case n.L:return o[4*(e-1)+0];case n.M:return o[4*(e-1)+1];case n.Q:return o[4*(e-1)+2];case n.H:return o[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return i[4*(e-1)+0];case n.M:return i[4*(e-1)+1];case n.Q:return i[4*(e-1)+2];case n.H:return i[4*(e-1)+3];default:return}}},4908:(e,n)=>{n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2},n.isValid=function(e){return e&&void 0!==e.bit&&0<=e.bit&&e.bit<4},n.from=function(e,t){if(n.isValid(e))return e;try{var r=e;if("string"!=typeof r)throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+r)}return}catch(e){return t}}},6526:(e,t,r)=>{const n=r(242).getSymbolSize;t.getPositions=function(e){e=n(e);return[[0,0],[e-7,0],[0,e-7]]}},1642:(e,t,r)=>{const n=r(242),o=n.getBCHDigit(1335);t.getEncodedBits=function(e,t){e=e.bit<<3|t;let r=e<<10;for(;0<=n.getBCHDigit(r)-o;)r^=1335<<n.getBCHDigit(r)-o;return 21522^(e<<10|r)}},9729:(e,t)=>{const r=new Uint8Array(512),n=new Uint8Array(256);{let t=1;for(let e=0;e<255;e++)r[e]=t,n[t]=e,256&(t<<=1)&&(t^=285);for(let e=255;e<512;e++)r[e]=r[e-255]}t.log=function(e){if(e<1)throw new Error("log("+e+")");return n[e]},t.exp=function(e){return r[e]},t.mul=function(e,t){return 0===e||0===t?0:r[n[e]+n[t]]}},5442:(e,t,r)=>{const n=r(6910),o=r(242);function i(e){this.mode=n.KANJI,this.data=e}i.getBitsLength=function(e){return 13*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let r;for(r=0;r<this.data.length;r++){let e=o.toSJIS(this.data[r]);if(33088<=e&&e<=40956)e-=33088;else{if(!(57408<=e&&e<=60351))throw new Error("Invalid SJIS character: "+this.data[r]+"\nMake sure your charset is UTF-8");e-=49472}e=192*(e>>>8&255)+(255&e),t.put(e,13)}},e.exports=i},7126:(e,a)=>{a.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&0<=e&&e<=7},a.from=function(e){return a.isValid(e)?parseInt(e,10):void 0},a.getPenaltyN1=function(n){var e=n.size;let o=0,i=0,a=0,l=null,s=null;for(let r=0;r<e;r++){i=a=0,l=s=null;for(let t=0;t<e;t++){let e=n.get(r,t);e===l?i++:(5<=i&&(o+=i-5+3),l=e,i=1),(e=n.get(t,r))===s?a++:(5<=a&&(o+=a-5+3),s=e,a=1)}5<=i&&(o+=i-5+3),5<=a&&(o+=a-5+3)}return o},a.getPenaltyN2=function(r){const n=r.size;let o=0;for(let t=0;t<n-1;t++)for(let e=0;e<n-1;e++){const n=r.get(t,e)+r.get(t,e+1)+r.get(t+1,e)+r.get(t+1,e+1);4!==n&&0!==n||o++}return 3*o},a.getPenaltyN3=function(r){var n=r.size;let o=0,i=0,a=0;for(let t=0;t<n;t++)for(let e=i=a=0;e<n;e++)i=i<<1&2047|r.get(t,e),10<=e&&(1488===i||93===i)&&o++,a=a<<1&2047|r.get(e,t),10<=e&&(1488===a||93===a)&&o++;return 40*o},a.getPenaltyN4=function(t){let r=0;var n=t.data.length;for(let e=0;e<n;e++)r+=t.data[e];return 10*Math.abs(Math.ceil(100*r/n/5)-10)},a.applyMask=function(r,n){var o=n.size;for(let t=0;t<o;t++)for(let e=0;e<o;e++)n.isReserved(e,t)||n.xor(e,t,function(e,t,r){switch(e){case a.Patterns.PATTERN000:return(t+r)%2==0;case a.Patterns.PATTERN001:return t%2==0;case a.Patterns.PATTERN010:return r%3==0;case a.Patterns.PATTERN011:return(t+r)%3==0;case a.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case a.Patterns.PATTERN101:return t*r%2+t*r%3==0;case a.Patterns.PATTERN110:return(t*r%2+t*r%3)%2==0;case a.Patterns.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}(r,e,t))},a.getBestMask=function(t,r){const n=Object.keys(a.Patterns).length;let o=0,i=1/0;for(let e=0;e<n;e++){r(e),a.applyMask(e,t);const n=a.getPenaltyN1(t)+a.getPenaltyN2(t)+a.getPenaltyN3(t)+a.getPenaltyN4(t);a.applyMask(e,t),n<i&&(i=n,o=e)}return o}},6910:(e,n,t)=>{const r=t(3114),o=t(7007);n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(r.isValid(t))return 1<=t&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2];throw new Error("Invalid version: "+t)},n.getBestModeForData=function(e){return o.testNumeric(e)?n.NUMERIC:o.testAlphanumeric(e)?n.ALPHANUMERIC:o.testKanji(e)?n.KANJI:n.BYTE},n.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},n.isValid=function(e){return e&&e.bit&&e.ccBits},n.from=function(e,t){if(n.isValid(e))return e;try{var r=e;if("string"!=typeof r)throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+r)}return}catch(e){return t}}},1085:(e,t,r)=>{const n=r(6910);function o(e){this.mode=n.NUMERIC,this.data=e.toString()}o.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t,r,n;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),n=parseInt(r,10),e.put(n,10);var o=this.data.length-t;0<o&&(r=this.data.substr(t),n=parseInt(r,10),e.put(n,3*o+1))},e.exports=o},6143:(e,n,t)=>{const i=t(9729);n.mul=function(r,n){const o=new Uint8Array(r.length+n.length-1);for(let t=0;t<r.length;t++)for(let e=0;e<n.length;e++)o[t+e]^=i.mul(r[t],n[e]);return o},n.mod=function(t,r){let n=new Uint8Array(t);for(;0<=n.length-r.length;){const t=n[0];for(let e=0;e<r.length;e++)n[e]^=i.mul(r[e],t);let e=0;for(;e<n.length&&0===n[e];)e++;n=n.slice(e)}return n},n.generateECPolynomial=function(t){let r=new Uint8Array([1]);for(let e=0;e<t;e++)r=n.mul(r,new Uint8Array([1,i.exp(e)]));return r}},5115:(e,t,r)=>{const S=r(242),i=r(4908),O=r(7245),P=r(3280),A=r(1845),D=r(6526),L=r(7126),T=r(5393),j=r(2882),B=r(3103),l=r(1642),R=r(6910),N=r(6130);function M(e,t,r){var n=e.size,o=l.getEncodedBits(t,r);let i,a;for(i=0;i<15;i++)a=1==(o>>i&1),i<6?e.set(i,8,a,!0):i<8?e.set(i+1,8,a,!0):e.set(n-15+i,8,a,!0),i<8?e.set(8,n-i-1,a,!0):i<9?e.set(8,15-i-1+1,a,!0):e.set(8,15-i-1,a,!0);e.set(n-8,8,1,!0)}function a(t,r,n,e){let o;if(Array.isArray(t))o=N.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let e=r;if(!e){const r=N.rawSplit(t);e=B.getBestVersionForData(r,n)}o=N.fromString(t,e||40)}}t=B.getBestVersionForData(o,n);if(!t)throw new Error("The amount of data is too big to be stored in a QR Code");if(r){if(r<t)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+t+".\n")}else r=t;var t=function(i,a,l){const s=new O;l.forEach(function(e){s.put(e.mode.bit,4),s.put(e.getLength(),R.getCharCountIndicator(e.mode,i)),e.write(s)});l=8*(S.getSymbolTotalCodewords(i)-T.getTotalCodewordsCount(i,a));for(s.getLengthInBits()+4<=l&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(0);var t=(l-s.getLengthInBits())/8;for(let e=0;e<t;e++)s.put(e%2?17:236,8);{l=s;var c=i;const u=S.getSymbolTotalCodewords(c),d=u-T.getTotalCodewordsCount(c,a),p=T.getBlocksCount(c,a),h=p-u%p,f=Math.floor(u/p),y=Math.floor(d/p),m=y+1,g=f-y,b=new j(g);let t=0;const v=new Array(p),_=new Array(p);let r=0;const w=new Uint8Array(l.buffer);for(let e=0;e<p;e++){const c=e<h?y:m;v[e]=w.slice(t,t+c),_[e]=b.encode(v[e]),t+=c,r=Math.max(r,c)}const E=new Uint8Array(u);let e,n,o=0;for(e=0;e<r;e++)for(n=0;n<p;n++)e<v[n].length&&(E[o++]=v[n][e]);for(e=0;e<g;e++)for(n=0;n<p;n++)E[o++]=_[n][e];return E}}(r,n,o),a=S.getSymbolSize(r),a=new P(a),i=a,l=r,s=i.size,c=D.getPositions(l);for(let e=0;e<c.length;e++){var u=c[e][0],d=c[e][1];for(let t=-1;t<=7;t++)if(!(u+t<=-1||s<=u+t))for(let e=-1;e<=7;e++)d+e<=-1||s<=d+e||(0<=t&&t<=6&&(0===e||6===e)||0<=e&&e<=6&&(0===t||6===t)||2<=t&&t<=4&&2<=e&&e<=4?i.set(u+t,d+e,!0,!0):i.set(u+t,d+e,!1,!0))}{var p=a;const k=p.size;for(let e=8;e<k-8;e++){const k=e%2==0;p.set(e,6,k,!0),p.set(6,e,k,!0)}}var h=a,l=r,f=A.getPositions(l);for(let e=0;e<f.length;e++){var y=f[e][0],m=f[e][1];for(let t=-2;t<=2;t++)for(let e=-2;e<=2;e++)-2===t||2===t||-2===e||2===e||0===t&&0===e?h.set(y+t,m+e,!0,!0):h.set(y+t,m+e,!1,!0)}if(M(a,n,0),7<=r){var g=a;l=r;var b,v,_,w=g.size,E=B.getEncodedBits(l);for(let e=0;e<18;e++)b=Math.floor(e/3),v=e%3+w-8-3,_=1==(E>>e&1),g.set(b,v,_,!0),g.set(v,b,_,!0)}{var I=a,C=t,x=I.size;let e=-1,n=x-1,o=7,i=0;for(let r=x-1;0<r;r-=2)for(6===r&&r--;;){for(let t=0;t<2;t++)if(!I.isReserved(n,r-t)){let e=!1;i<C.length&&(e=1==(C[i]>>>o&1)),I.set(n,r-t,e),-1===--o&&(i++,o=7)}if((n+=e)<0||x<=n){n-=e,e=-e;break}}}return isNaN(e)&&(e=L.getBestMask(a,M.bind(null,a,n))),L.applyMask(e,a),M(a,n,e),{modules:a,version:r,errorCorrectionLevel:n,maskPattern:e,segments:o}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let r,n,o=i.M;return void 0!==t&&(o=i.from(t.errorCorrectionLevel,i.M),r=B.from(t.version),n=L.from(t.maskPattern),t.toSJISFunc&&S.setToSJISFunction(t.toSJISFunc)),a(e,r,o,n)}},2882:(e,t,r)=>{const o=r(6143);function n(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}n.prototype.initialize=function(e){this.degree=e,this.genPoly=o.generateECPolynomial(this.degree)},n.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);var r=o.mod(t,this.genPoly),n=this.degree-r.length;if(0<n){const e=new Uint8Array(this.degree);return e.set(r,n),e}return r},e.exports=n},7007:(e,t)=>{var r,n="(?:(?![A-Z0-9 $%*+\\-./:]|"+(r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+".replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(n,"g"),t.NUMERIC=new RegExp("[0-9]+","g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const o=new RegExp("^"+r+"$"),i=new RegExp("^[0-9]+$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return o.test(e)},t.testNumeric=function(e){return i.test(e)},t.testAlphanumeric=function(e){return a.test(e)}},6130:(e,a,t)=>{const d=t(6910),o=t(1085),i=t(8260),l=t(3424),s=t(5442),c=t(7007),u=t(242),p=t(5987);function h(e){return unescape(encodeURIComponent(e)).length}function f(e,t,r){const n=[];for(var o;null!==(o=e.exec(r));)n.push({data:o[0],index:o.index,mode:t,length:o[0].length});return n}function y(e){const t=f(c.NUMERIC,d.NUMERIC,e),r=f(c.ALPHANUMERIC,d.ALPHANUMERIC,e);let n,o;return o=u.isKanjiModeEnabled()?(n=f(c.BYTE,d.BYTE,e),f(c.KANJI,d.KANJI,e)):(n=f(c.BYTE_KANJI,d.BYTE,e),[]),t.concat(r,n,o).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function m(e,t){switch(t){case d.NUMERIC:return o.getBitsLength(e);case d.ALPHANUMERIC:return i.getBitsLength(e);case d.KANJI:return s.getBitsLength(e);case d.BYTE:return l.getBitsLength(e)}}function r(e,t){let r;var n=d.getBestModeForData(e);if((r=d.from(t,n))!==d.BYTE&&r.bit<n.bit)throw new Error('"'+e+'" cannot be encoded with mode '+d.toString(r)+".\n Suggested mode is: "+d.toString(n));switch(r=r!==d.KANJI||u.isKanjiModeEnabled()?r:d.BYTE){case d.NUMERIC:return new o(e);case d.ALPHANUMERIC:return new i(e);case d.KANJI:return new s(e);case d.BYTE:return new l(e)}}a.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(r(t,null)):t.data&&e.push(r(t.data,t.mode)),e},[])},a.fromString=function(e,t){const r=function(t){const r=[];for(let e=0;e<t.length;e++){var n=t[e];switch(n.mode){case d.NUMERIC:r.push([n,{data:n.data,mode:d.ALPHANUMERIC,length:n.length},{data:n.data,mode:d.BYTE,length:n.length}]);break;case d.ALPHANUMERIC:r.push([n,{data:n.data,mode:d.BYTE,length:n.length}]);break;case d.KANJI:r.push([n,{data:n.data,mode:d.BYTE,length:h(n.data)}]);break;case d.BYTE:r.push([{data:n.data,mode:d.BYTE,length:h(n.data)}])}}return r}(y(e,u.isKanjiModeEnabled())),n=function(e,r){const n={},o={start:{}};let i=["start"];for(let t=0;t<e.length;t++){const c=e[t],u=[];for(let e=0;e<c.length;e++){var a=c[e],l=""+t+e;u.push(l),n[l]={node:a,lastCount:0},o[l]={};for(let e=0;e<i.length;e++){var s=i[e];n[s]&&n[s].node.mode===a.mode?(o[s][l]=m(n[s].lastCount+a.length,a.mode)-m(n[s].lastCount,a.mode),n[s].lastCount+=a.length):(n[s]&&(n[s].lastCount=a.length),o[s][l]=m(a.length,a.mode)+4+d.getCharCountIndicator(a.mode,r))}}i=u}for(let e=0;e<i.length;e++)o[i[e]].end=0;return{map:o,table:n}}(r,t),o=p.find_path(n.map,"start","end"),i=[];for(let e=1;e<o.length-1;e++)i.push(n.table[o[e]].node);return a.fromArray(i.reduce(function(e,t){var r=0<=e.length-1?e[e.length-1]:null;return r&&r.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},a.rawSplit=function(e){return a.fromArray(y(e,u.isKanjiModeEnabled()))}},242:(e,t)=>{let r;const n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||40<e)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return n[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');r=e},t.isKanjiModeEnabled=function(){return void 0!==r},t.toSJIS=function(e){return r(e)}},3114:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&1<=e&&e<=40}},3103:(e,s,t)=>{const o=t(242),i=t(5393),c=t(4908),u=t(6910),a=t(3114),r=o.getBCHDigit(7973);function d(e,t){return u.getCharCountIndicator(e,t)+4}s.from=function(e,t){return a.isValid(e)?parseInt(e,10):t},s.getCapacity=function(e,t,r){if(!a.isValid(e))throw new Error("Invalid QR Code version");void 0===r&&(r=u.BYTE);t=8*(o.getSymbolTotalCodewords(e)-i.getTotalCodewordsCount(e,t));if(r===u.MIXED)return t;var n=t-d(r,e);switch(r){case u.NUMERIC:return Math.floor(n/10*3);case u.ALPHANUMERIC:return Math.floor(n/11*2);case u.KANJI:return Math.floor(n/13);default:u.BYTE;return Math.floor(n/8)}},s.getBestVersionForData=function(e,t){let r;t=c.from(t,c.M);if(Array.isArray(e)){if(1<e.length){var n=e;var o=t;for(let e=1;e<=40;e++)if(function(e,r){let n=0;return e.forEach(function(e){var t=d(e.mode,r);n+=t+e.getBitsLength()}),n}(n,e)<=s.getCapacity(e,o,u.MIXED))return e;return}if(0===e.length)return 1;r=e[0]}else r=e;var i=r.mode,a=r.getLength(),l=t;for(let e=1;e<=40;e++)if(a<=s.getCapacity(e,l,i))return e},s.getEncodedBits=function(e){if(!a.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;0<=o.getBCHDigit(t)-r;)t^=7973<<o.getBCHDigit(t)-r;return e<<12|t}},6907:(e,l,t)=>{const s=t(9653);l.render=function(e,t,r){let n=r,o=t;void 0!==n||t&&t.getContext||(n=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),n=s.getOptions(n);const i=s.getImageWidth(e.modules.size,n),a=o.getContext("2d"),l=a.createImageData(i,i);return s.qrToImageData(l.data,e,n),r=a,t=o,e=i,r.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=e,t.width=e,t.style.height=e+"px",t.style.width=e+"px",a.putImageData(l,0,0),o},l.renderToDataURL=function(e,t,r){let n=r;void 0!==n||t&&t.getContext||(n=t,t=void 0),n=n||{};const o=l.render(e,t,n),i=n.type||"image/png",a=n.rendererOpts||{};return o.toDataURL(i,a.quality)}},3776:(e,t,r)=>{const a=r(9653);function l(e,t){const r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function u(e,t,r){let n=e+t;return void 0!==r&&(n+=" "+r),n}t.render=function(e,t,r){var t=a.getOptions(t),n=e.modules.size,e=e.modules.data,o=n+2*t.margin,i=t.color.light.a?"<path "+l(t.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",e="<path "+l(t.color.dark,"stroke")+' d="'+function(t,r,n){let o="",i=0,a=!1,l=0;for(let e=0;e<t.length;e++){var s=Math.floor(e%r),c=Math.floor(e/r);s||a||(a=!0),t[e]?(l++,0<e&&0<s&&t[e-1]||(o+=a?u("M",s+n,.5+c+n):u("m",i,0),i=0,a=!1),s+1<r&&t[e+1]||(o+=u("h",l),l=0)):i++}return o}(e,n,t.margin)+'"/>',n='<svg xmlns="http://www.w3.org/2000/svg" '+(t.width?'width="'+t.width+'" height="'+t.width+'" ':"")+('viewBox="0 0 '+o+" "+o+'"')+' shape-rendering="crispEdges">'+i+e+"</svg>\n";return"function"==typeof r&&r(null,n),n}},9653:(e,n)=>{function o(e){if("string"!=typeof(e="number"==typeof e?e.toString():e))throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||8<t.length)throw new Error("Invalid hex color: "+e);6===(t=3!==t.length&&4!==t.length?t:Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))).length&&t.push("F","F");e=parseInt(t.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:255&e,hex:"#"+t.slice(0,6).join("")}}n.getOptions=function(e){(e=e||{}).color||(e.color={});var t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&21<=e.width?e.width:void 0,n=e.scale||4;return{width:r,scale:r?4:n,margin:t,color:{dark:o(e.color.dark||"#000000ff"),light:o(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},n.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},n.getImageWidth=function(e,t){var r=n.getScale(e,t);return Math.floor((e+2*t.margin)*r)},n.qrToImageData=function(o,e,i){var a=e.modules.size,l=e.modules.data,s=n.getScale(a,i),c=Math.floor((a+2*i.margin)*s),u=i.margin*s,d=[i.color.light,i.color.dark];for(let n=0;n<c;n++)for(let r=0;r<c;r++){let e=4*(n*c+r),t=i.color.light;n>=u&&r>=u&&n<c-u&&r<c-u&&(t=d[l[Math.floor((n-u)/s)*a+Math.floor((r-u)/s)]?1:0]),o[e++]=t.r,o[e++]=t.g,o[e++]=t.b,o[e]=t.a}}},4175:(e,t,r)=>{function u(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}var s=r(7529),d=r(251),n=r(4470),p=r(4644),o=String.fromCharCode(0);u.prototype.insert=function(e,t){var r={};return 0===e.length?this:(r.insert=e,null!=t&&"object"==typeof t&&0<Object.keys(t).length&&(r.attributes=t),this.push(r))},u.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},u.prototype.retain=function(e,t){if(e<=0)return this;e={retain:e};return null!=t&&"object"==typeof t&&0<Object.keys(t).length&&(e.attributes=t),this.push(e)},u.prototype.push=function(e){var t=this.ops.length,r=this.ops[t-1];if(e=n(!0,{},e),"object"==typeof r){if("number"==typeof e.delete&&"number"==typeof r.delete)return this.ops[t-1]={delete:r.delete+e.delete},this;if("number"==typeof r.delete&&null!=e.insert&&"object"!=typeof(r=this.ops[--t-1]))return this.ops.unshift(e),this;if(d(e.attributes,r.attributes)){if("string"==typeof e.insert&&"string"==typeof r.insert)return this.ops[t-1]={insert:r.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof r.retain)return this.ops[t-1]={retain:r.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},u.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},u.prototype.filter=function(e){return this.ops.filter(e)},u.prototype.forEach=function(e){this.ops.forEach(e)},u.prototype.map=function(e){return this.ops.map(e)},u.prototype.partition=function(t){var r=[],n=[];return this.forEach(function(e){(t(e)?r:n).push(e)}),[r,n]},u.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},u.prototype.changeLength=function(){return this.reduce(function(e,t){return t.insert?e+p.length(t):t.delete?e-t.delete:e},0)},u.prototype.length=function(){return this.reduce(function(e,t){return e+p.length(t)},0)},u.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var r,n=[],o=p.iterator(this.ops),i=0;i<t&&o.hasNext();)i<e?r=o.next(e-i):(r=o.next(t-i),n.push(r)),i+=p.length(r);return new u(n)},u.prototype.compose=function(e){var t=p.iterator(this.ops),r=p.iterator(e.ops),n=[],e=r.peek();if(null!=e&&"number"==typeof e.retain&&null==e.attributes){for(var o=e.retain;"insert"===t.peekType()&&t.peekLength()<=o;)o-=t.peekLength(),n.push(t.next());0<e.retain-o&&r.next(e.retain-o)}for(var i=new u(n);t.hasNext()||r.hasNext();)if("insert"===r.peekType())i.push(r.next());else if("delete"===t.peekType())i.push(t.next());else{var a=Math.min(t.peekLength(),r.peekLength()),l=t.next(a),s=r.next(a);if("number"==typeof s.retain){var c={},a=("number"==typeof l.retain?c.retain=a:c.insert=l.insert,p.attributes.compose(l.attributes,s.attributes,"number"==typeof l.retain));if(a&&(c.attributes=a),i.push(c),!r.hasNext()&&d(i.ops[i.ops.length-1],c))return a=new u(t.rest()),i.concat(a).chop()}else"number"==typeof s.delete&&"number"==typeof l.retain&&i.push(s)}return i.chop()},u.prototype.concat=function(e){var t=new u(this.ops.slice());return 0<e.ops.length&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},u.prototype.diff=function(r,e){if(this.ops===r.ops)return new u;var t=[this,r].map(function(t){return t.map(function(e){if(null!=e.insert)return"string"==typeof e.insert?e.insert:o;throw new Error("diff() called "+(t===r?"on":"with")+" non-document")}).join("")}),i=new u,t=s(t[0],t[1],e),a=p.iterator(this.ops),l=p.iterator(r.ops);return t.forEach(function(e){for(var t=e[1].length;0<t;){var r=0;switch(e[0]){case s.INSERT:r=Math.min(l.peekLength(),t),i.push(l.next(r));break;case s.DELETE:r=Math.min(t,a.peekLength()),a.next(r),i.delete(r);break;case s.EQUAL:var r=Math.min(a.peekLength(),l.peekLength(),t),n=a.next(r),o=l.next(r);d(n.insert,o.insert)?i.retain(r,p.attributes.diff(n.attributes,o.attributes)):i.push(o).delete(r)}t-=r}}),i.chop()},u.prototype.eachLine=function(e,t){t=t||"\n";for(var r=p.iterator(this.ops),n=new u,o=0;r.hasNext();){if("insert"!==r.peekType())return;var i=r.peek(),a=p.length(i)-r.peekLength(),i="string"==typeof i.insert?i.insert.indexOf(t,a)-a:-1;if(i<0)n.push(r.next());else if(0<i)n.push(r.next(i));else{if(!1===e(n,r.next(1).attributes||{},o))return;o+=1,n=new u}}0<n.length()&&e(n,{},o)},u.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var r=p.iterator(this.ops),n=p.iterator(e.ops),o=new u;r.hasNext()||n.hasNext();)if("insert"!==r.peekType()||!t&&"insert"===n.peekType())if("insert"===n.peekType())o.push(n.next());else{var i=Math.min(r.peekLength(),n.peekLength()),a=r.next(i),l=n.next(i);if(a.delete)continue;l.delete?o.push(l):o.retain(i,p.attributes.transform(a.attributes,l.attributes,t))}else o.retain(p.length(r.next()));return o.chop()},u.prototype.transformPosition=function(e,t){t=!!t;for(var r=p.iterator(this.ops),n=0;r.hasNext()&&n<=e;){var o=r.peekLength(),i=r.peekType();r.next(),"delete"!==i?("insert"===i&&(n<e||!t)&&(e+=o),n+=o):e-=Math.min(o,e-n)}return e},e.exports=u},4644:(e,t,r)=>{var o=r(251),i=r(4470),a={attributes:{compose:function(e,t,r){"object"!=typeof e&&(e={});var n,o=i(!0,{},t="object"!=typeof t?{}:t);for(n in r||(o=Object.keys(o).reduce(function(e,t){return null!=o[t]&&(e[t]=o[t]),e},{})),e)void 0!==e[n]&&void 0===t[n]&&(o[n]=e[n]);return 0<Object.keys(o).length?o:void 0},diff:function(r,n){"object"!=typeof r&&(r={}),"object"!=typeof n&&(n={});var e=Object.keys(r).concat(Object.keys(n)).reduce(function(e,t){return o(r[t],n[t])||(e[t]=void 0===n[t]?null:n[t]),e},{});return 0<Object.keys(e).length?e:void 0},transform:function(r,n,e){if("object"!=typeof r)return n;if("object"==typeof n){if(!e)return n;e=Object.keys(n).reduce(function(e,t){return void 0===r[t]&&(e[t]=n[t]),e},{});return 0<Object.keys(e).length?e:void 0}}},iterator:function(e){return new n(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function n(e){this.ops=e,this.index=0,this.offset=0}n.prototype.hasNext=function(){return this.peekLength()<1/0},n.prototype.next=function(e){e=e||1/0;var t=this.ops[this.index];if(t){var r=this.offset,n=a.length(t);if(n-r<=e?(e=n-r,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};n={};return t.attributes&&(n.attributes=t.attributes),"number"==typeof t.retain?n.retain=e:"string"==typeof t.insert?n.insert=t.insert.substr(r,e):n.insert=t.insert,n}return{retain:1/0}},n.prototype.peek=function(){return this.ops[this.index]},n.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},n.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},n.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,r=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(n)}return[]},e.exports=a},6095:function(e){e.exports=function(){return r=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),o=r(18),i=r(19),a=r(45),l=r(46),s=r(47),c=r(48),u=r(49),d=r(12),p=r(32),h=r(33),f=r(31),r=r(1),r={Scope:r.Scope,create:r.create,find:r.find,query:r.query,register:r.register,Container:n.default,Format:o.default,Leaf:i.default,Embed:c.default,Scroll:a.default,Block:s.default,Inline:l.default,Text:u.default,Attributor:{Attribute:d.default,Class:p.default,Style:h.default,Store:f.default}};t.default=r},function(e,n,t){"use strict";var o,r,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(n,"__esModule",{value:!0}),r=Error,i(l,r),l);function l(e){var t=this;return(t=r.call(this,e="[Parchment] "+e)||this).message=e,t.name=t.constructor.name,t}n.ParchmentError=a;var s,c={},u={},d={},p={};function h(e,t){var r;if(void 0===t&&(t=s.ANY),"string"==typeof e)r=p[e]||c[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)r=p.text;else if("number"==typeof e)e&s.LEVEL&s.BLOCK?r=p.block:e&s.LEVEL&s.INLINE&&(r=p.inline);else if(e instanceof HTMLElement){var n,o=(e.getAttribute("class")||"").split(/\s+/);for(n in o)if(r=u[o[n]])break;r=r||d[e.tagName]}return null!=r&&t&s.LEVEL&r.scope&&t&s.TYPE&r.scope?r:null}n.DATA_KEY="__blot",(i=s=n.Scope||(n.Scope={}))[i.TYPE=3]="TYPE",i[i.LEVEL=12]="LEVEL",i[i.ATTRIBUTE=13]="ATTRIBUTE",i[i.BLOT=14]="BLOT",i[i.INLINE=7]="INLINE",i[i.BLOCK=11]="BLOCK",i[i.BLOCK_BLOT=10]="BLOCK_BLOT",i[i.INLINE_BLOT=6]="INLINE_BLOT",i[i.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",i[i.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",i[i.ANY=15]="ANY",n.create=function(e,t){var r=h(e);if(null==r)throw new a("Unable to create "+e+" blot");e=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:r.create(t);return new r(e,t)},n.find=function e(t,r){return void 0===r&&(r=!1),null==t?null:null!=t[n.DATA_KEY]?t[n.DATA_KEY].blot:r?e(t.parentNode,r):null},n.query=h,n.register=function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(1<e.length)return e.map(function(e){return t(e)});var n=e[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new a("Invalid definition");if("abstract"===n.blotName)throw new a("Cannot register abstract class");return"string"==typeof(p[n.blotName||n.attrName]=n).keyName?c[n.keyName]=n:(null!=n.className&&(u[n.className]=n),null!=n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(function(e){return e.toUpperCase()}):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(function(e){null!=d[e]&&null!=n.className||(d[e]=n)}))),n}},function(e,t,r){function u(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}var s=r(51),d=r(11),n=r(3),p=r(20),o=String.fromCharCode(0);u.prototype.insert=function(e,t){var r={};return 0===e.length?this:(r.insert=e,null!=t&&"object"==typeof t&&0<Object.keys(t).length&&(r.attributes=t),this.push(r))},u.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},u.prototype.retain=function(e,t){if(e<=0)return this;e={retain:e};return null!=t&&"object"==typeof t&&0<Object.keys(t).length&&(e.attributes=t),this.push(e)},u.prototype.push=function(e){var t=this.ops.length,r=this.ops[t-1];if(e=n(!0,{},e),"object"==typeof r){if("number"==typeof e.delete&&"number"==typeof r.delete)return this.ops[t-1]={delete:r.delete+e.delete},this;if("number"==typeof r.delete&&null!=e.insert&&"object"!=typeof(r=this.ops[--t-1]))return this.ops.unshift(e),this;if(d(e.attributes,r.attributes)){if("string"==typeof e.insert&&"string"==typeof r.insert)return this.ops[t-1]={insert:r.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof r.retain)return this.ops[t-1]={retain:r.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},u.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},u.prototype.filter=function(e){return this.ops.filter(e)},u.prototype.forEach=function(e){this.ops.forEach(e)},u.prototype.map=function(e){return this.ops.map(e)},u.prototype.partition=function(t){var r=[],n=[];return this.forEach(function(e){(t(e)?r:n).push(e)}),[r,n]},u.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},u.prototype.changeLength=function(){return this.reduce(function(e,t){return t.insert?e+p.length(t):t.delete?e-t.delete:e},0)},u.prototype.length=function(){return this.reduce(function(e,t){return e+p.length(t)},0)},u.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var r,n=[],o=p.iterator(this.ops),i=0;i<t&&o.hasNext();)i<e?r=o.next(e-i):(r=o.next(t-i),n.push(r)),i+=p.length(r);return new u(n)},u.prototype.compose=function(e){var t=p.iterator(this.ops),r=p.iterator(e.ops),n=[],e=r.peek();if(null!=e&&"number"==typeof e.retain&&null==e.attributes){for(var o=e.retain;"insert"===t.peekType()&&t.peekLength()<=o;)o-=t.peekLength(),n.push(t.next());0<e.retain-o&&r.next(e.retain-o)}for(var i=new u(n);t.hasNext()||r.hasNext();)if("insert"===r.peekType())i.push(r.next());else if("delete"===t.peekType())i.push(t.next());else{var a=Math.min(t.peekLength(),r.peekLength()),l=t.next(a),s=r.next(a);if("number"==typeof s.retain){var c={},a=("number"==typeof l.retain?c.retain=a:c.insert=l.insert,p.attributes.compose(l.attributes,s.attributes,"number"==typeof l.retain));if(a&&(c.attributes=a),i.push(c),!r.hasNext()&&d(i.ops[i.ops.length-1],c))return a=new u(t.rest()),i.concat(a).chop()}else"number"==typeof s.delete&&"number"==typeof l.retain&&i.push(s)}return i.chop()},u.prototype.concat=function(e){var t=new u(this.ops.slice());return 0<e.ops.length&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},u.prototype.diff=function(r,e){if(this.ops===r.ops)return new u;var t=[this,r].map(function(t){return t.map(function(e){if(null!=e.insert)return"string"==typeof e.insert?e.insert:o;throw new Error("diff() called "+(t===r?"on":"with")+" non-document")}).join("")}),i=new u,t=s(t[0],t[1],e),a=p.iterator(this.ops),l=p.iterator(r.ops);return t.forEach(function(e){for(var t=e[1].length;0<t;){var r=0;switch(e[0]){case s.INSERT:r=Math.min(l.peekLength(),t),i.push(l.next(r));break;case s.DELETE:r=Math.min(t,a.peekLength()),a.next(r),i.delete(r);break;case s.EQUAL:var r=Math.min(a.peekLength(),l.peekLength(),t),n=a.next(r),o=l.next(r);d(n.insert,o.insert)?i.retain(r,p.attributes.diff(n.attributes,o.attributes)):i.push(o).delete(r)}t-=r}}),i.chop()},u.prototype.eachLine=function(e,t){t=t||"\n";for(var r=p.iterator(this.ops),n=new u,o=0;r.hasNext();){if("insert"!==r.peekType())return;var i=r.peek(),a=p.length(i)-r.peekLength(),i="string"==typeof i.insert?i.insert.indexOf(t,a)-a:-1;if(i<0)n.push(r.next());else if(0<i)n.push(r.next(i));else{if(!1===e(n,r.next(1).attributes||{},o))return;o+=1,n=new u}}0<n.length()&&e(n,{},o)},u.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var r=p.iterator(this.ops),n=p.iterator(e.ops),o=new u;r.hasNext()||n.hasNext();)if("insert"!==r.peekType()||!t&&"insert"===n.peekType())if("insert"===n.peekType())o.push(n.next());else{var i=Math.min(r.peekLength(),n.peekLength()),a=r.next(i),l=n.next(i);if(a.delete)continue;l.delete?o.push(l):o.retain(i,p.attributes.transform(a.attributes,l.attributes,t))}else o.retain(p.length(r.next()));return o.chop()},u.prototype.transformPosition=function(e,t){t=!!t;for(var r=p.iterator(this.ops),n=0;r.hasNext()&&n<=e;){var o=r.peekLength(),i=r.peekType();r.next(),"delete"!==i?("insert"===i&&(n<e||!t)&&(e+=o),n+=o):e-=Math.min(o,e-n)}return e},e.exports=u},function(e,t){"use strict";function u(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)}function d(e){if(e&&"[object Object]"===i.call(e)){var t,r=o.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&o.call(e.constructor.prototype,"isPrototypeOf");if(!e.constructor||r||n){for(t in e);return void 0===t||o.call(e,t)}}}function p(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue}function h(e,t){if("__proto__"===t){if(!o.call(e,t))return;if(n)return n(e,t).value}return e[t]}var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor;e.exports=function e(){var t,r,n,o,i,a=arguments[0],l=1,s=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},l=2),(null==a||"object"!=typeof a&&"function"!=typeof a)&&(a={});l<s;++l)if(null!=(t=arguments[l]))for(r in t)i=h(a,r),a!==(n=h(t,r))&&(c&&n&&(d(n)||(o=u(n)))?(i=o?(o=!1,i&&u(i)?i:[]):i&&d(i)?i:{},p(a,{name:r,newValue:e(c,i,n)})):void 0!==n&&p(a,{name:r,newValue:n}));return a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e},i=d(r(3)),a=d(r(2)),l=d(r(0)),s=d(r(16)),c=d(r(6)),r=d(r(7));function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}f(m,l.default.Embed),n(m,[{key:"attach",value:function(){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"attach",this).call(this),this.attributes=new l.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new a.default).insert(this.value(),(0,i.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){e=l.default.query(e,l.default.Scope.BLOCK_ATTRIBUTE);null!=e&&this.attributes.attribute(e,t)}},{key:"formatAt",value:function(e,t,r,n){this.format(r,n)}},{key:"insertAt",value:function(e,t,r){var n;"string"==typeof t&&t.endsWith("\n")?(n=l.default.create(g.blotName),this.parent.insertBefore(n,0===e?this:this.next),n.insertAt(0,t.slice(0,-1))):o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"insertAt",this).call(this,e,t,r)}}]);var y=m;function m(){return p(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}y.scope=l.default.Scope.BLOCK_BLOT;f(b,l.default.Block),n(b,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(l.default.Leaf).reduce(function(e,t){return 0===t.length()?e:e.insert(t.value(),v(t))},new a.default).insert("\n",v(this))),this.cache.delta}},{key:"deleteAt",value:function(e,t){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"deleteAt",this).call(this,e,t),this.cache={}}},{key:"formatAt",value:function(e,t,r,n){t<=0||(l.default.query(r,l.default.Scope.BLOCK)?e+t===this.length()&&this.format(r,n):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"formatAt",this).call(this,e,Math.min(t,this.length()-e-1),r,n),this.cache={})}},{key:"insertAt",value:function(e,t,r){if(null!=r)return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertAt",this).call(this,e,t,r);var n;0!==t.length&&(0<(t=(r=t.split("\n")).shift()).length&&(e<this.length()-1||null==this.children.tail?o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),t):this.children.tail.insertAt(this.children.tail.length(),t),this.cache={}),n=this,r.reduce(function(e,t){return(n=n.split(e,!0)).insertAt(0,t),t.length},e+t.length))}},{key:"insertBefore",value:function(e,t){var r=this.children.head;o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertBefore",this).call(this,e,t),r instanceof s.default&&r.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,t){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"moveChildren",this).call(this,e,t),this.cache={}}},{key:"optimize",value:function(e){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(t&&(0===e||e>=this.length()-1))return r=this.clone(),0===e?(this.parent.insertBefore(r,this),this):(this.parent.insertBefore(r,this.next),r);var r=o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"split",this).call(this,e,t);return this.cache={},r}}]);var g=b;function b(e){p(this,b);e=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,e));return e.cache={},e}function v(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"==typeof e.formats&&(t=(0,i.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:v(e.parent,t))}g.blotName="block",g.tagName="P",g.defaultChild="break",g.allowedChildren=[c.default,l.default.Embed,r.default],t.bubbleFormats=v,t.BlockEmbed=y,t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;function l(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var r=e,n=t,o=[],i=!0,e=!1,t=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done)&&(o.push(a.value),!n||o.length!==n);i=!0);}catch(r){e=!0,t=r}finally{try{!i&&l.return&&l.return()}finally{if(e)throw t}}return o}throw new TypeError("Invalid attempt to destructure non-iterable instance")}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(50);var s=g(r(2)),i=g(r(14)),c=g(r(8)),u=g(r(9)),d=g(r(0)),p=r(15),h=g(p),f=g(r(3)),y=g(r(10)),m=g(r(34));function g(e){return e&&e.__esModule?e:{default:e}}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=(0,y.default)("quill"),_=(n(w,null,[{key:"debug",value:function(e){y.default.level(e=!0===e?"log":e)}},{key:"find",value:function(e){return e.__quill||d.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&v.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(t,r){var e,n=this,o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];"string"!=typeof t?"string"==typeof(e=t.attrName||t.blotName)?this.register("formats/"+e,t,r):Object.keys(t).forEach(function(e){n.register(e,t[e],r)}):(null==this.imports[t]||o||v.warn("Overwriting "+t+" with",r),this.imports[t]=r,(t.startsWith("blots/")||t.startsWith("formats/"))&&"abstract"!==r.blotName?d.default.register(r):t.startsWith("modules")&&"function"==typeof r.register&&r.register())}}]),n(w,[{key:"addContainer",value:function(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof e&&(t=e,(e=document.createElement("div")).classList.add(t)),this.container.insertBefore(e,r),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,r){var n=this,o=C(e,t,r),o=l(o,4);return e=o[0],t=o[1],r=o[3],I.call(this,function(){return n.editor.deleteText(e,t)},r,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(r,n){var o=this,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;return I.call(this,function(){var e=o.getSelection(!0),t=new s.default;if(null==e)return t;if(d.default.query(r,d.default.Scope.BLOCK))t=o.editor.formatLine(e.index,e.length,b({},r,n));else{if(0===e.length)return o.selection.format(r,n),t;t=o.editor.formatText(e.index,e.length,b({},r,n))}return o.setSelection(e,c.default.sources.SILENT),t},e)}},{key:"formatLine",value:function(e,t,r,n,o){var i,a=this,r=C(e,t,r,n,o),n=l(r,4);return e=n[0],t=n[1],i=n[2],o=n[3],I.call(this,function(){return a.editor.formatLine(e,t,i)},o,e,0)}},{key:"formatText",value:function(e,t,r,n,o){var i,a=this,r=C(e,t,r,n,o),n=l(r,4);return e=n[0],t=n[1],i=n[2],o=n[3],I.call(this,function(){return a.editor.formatText(e,t,i)},o,e,0)}},{key:"getBounds",value:function(e){var e="number"==typeof e?this.selection.getBounds(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0):this.selection.getBounds(e.index,e.length),t=this.container.getBoundingClientRect();return{bottom:e.bottom-t.top,height:e.height,left:e.left-t.left,right:e.right-t.left,top:e.top-t.top,width:e.width}}},{key:"getContents",value:function(){var e=C(t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getLength()-t),e=l(e,2),t=e[0],e=e[1];return this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0);return"number"==typeof e?this.editor.getFormat(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=C(t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getLength()-t),e=l(e,2),t=e[0],e=e[1];return this.editor.getText(t,e)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,t,r){var n=this,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:w.sources.API;return I.call(this,function(){return n.editor.insertEmbed(e,t,r)},o,e)}},{key:"insertText",value:function(e,t,r,n,o){var i,a=this,r=C(e,0,r,n,o),n=l(r,4);return e=n[0],i=n[2],o=n[3],I.call(this,function(){return a.editor.insertText(e,t,i)},o,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,r){this.clipboard.dangerouslyPasteHTML(e,t,r)}},{key:"removeFormat",value:function(e,t,r){var n=this,o=C(e,t,r),o=l(o,4);return e=o[0],t=o[1],r=o[3],I.call(this,function(){return n.editor.removeFormat(e,t)},r,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(n){var o=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:c.default.sources.API;return I.call(this,function(){n=new s.default(n);var e=o.getLength(),e=o.editor.deleteText(0,e),t=o.editor.applyDelta(n),r=t.ops[t.ops.length-1];return null!=r&&"string"==typeof r.insert&&"\n"===r.insert[r.insert.length-1]&&(o.editor.deleteText(o.getLength()-1,1),t.delete(1)),e.compose(t)},e)}},{key:"setSelection",value:function(e,t,r){var n;null==e?this.selection.setRange(null,t||w.sources.API):(n=C(e,t,r),e=(n=l(n,4))[0],t=n[1],r=n[3],this.selection.setRange(new p.Range(e,t),r),r!==c.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer))}},{key:"setText",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:c.default.sources.API,e=(new s.default).insert(e);return this.setContents(e,t)}},{key:"update",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:c.default.sources.API;return I.call(this,function(){return e=new s.default(e),t.editor.applyDelta(e,r)},r,!0)}}]),w);function w(e){var o=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this,n=w;if(!(r instanceof n))throw new TypeError("Cannot call a class as a function");if(this.options=E(e,t),this.container=this.options.container,null==this.container)return v.error("Invalid Quill container",e);this.options.debug&&w.debug(this.options.debug);r=this.container.innerHTML.trim(),this.container.classList.add("ql-container"),this.container.innerHTML="",(this.container.__quill=this).root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new c.default,this.scroll=d.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new i.default(this.scroll),this.selection=new h.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(c.default.events.EDITOR_CHANGE,function(e){e===c.default.events.TEXT_CHANGE&&o.root.classList.toggle("ql-blank",o.editor.isBlank())}),this.emitter.on(c.default.events.SCROLL_UPDATE,function(e,t){var r=o.selection.lastRange,n=r&&0===r.length?r.index:void 0;I.call(o,function(){return o.editor.update(null,t,n)},e)}),n=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+r+"<p><br></p></div>");this.setContents(n),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}function E(e,r){if((r=(0,f.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},r)).theme&&r.theme!==_.DEFAULTS.theme){if(r.theme=_.import("themes/"+r.theme),null==r.theme)throw new Error("Invalid theme "+r.theme+". Did you register it?")}else r.theme=m.default;var e=(0,f.default)(!0,{},r.theme.DEFAULTS),t=([e,r].forEach(function(t){t.modules=t.modules||{},Object.keys(t.modules).forEach(function(e){!0===t.modules[e]&&(t.modules[e]={})})}),Object.keys(e.modules).concat(Object.keys(r.modules)).reduce(function(e,t){var r=_.import("modules/"+t);return null==r?v.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=r.DEFAULTS||{},e},{}));return null!=r.modules&&r.modules.toolbar&&r.modules.toolbar.constructor!==Object&&(r.modules.toolbar={container:r.modules.toolbar}),r=(0,f.default)(!0,{},_.DEFAULTS,{modules:t},e,r),["bounds","container","scrollingContainer"].forEach(function(e){"string"==typeof r[e]&&(r[e]=document.querySelector(r[e]))}),r.modules=Object.keys(r.modules).reduce(function(e,t){return r.modules[t]&&(e[t]=r.modules[t]),e},{}),r}function I(e,t,r,n){if(this.options.strict&&!this.isEnabled()&&t===c.default.sources.USER)return new s.default;var o=null==r?null:this.getSelection(),i=this.editor.delta,e=e();return null!=o&&(!0===r&&(r=o.index),null==n?o=x(o,e,t):0!==n&&(o=x(o,r,n,t)),this.setSelection(o,c.default.sources.SILENT)),0<e.length()&&(r=[c.default.events.TEXT_CHANGE,e,i,t],(n=this.emitter).emit.apply(n,[c.default.events.EDITOR_CHANGE].concat(r)),t!==c.default.sources.SILENT&&(o=this.emitter).emit.apply(o,r)),e}function C(e,t,r,n,o){var i={};return"number"==typeof e.index&&"number"==typeof e.length?e=(t=("number"!=typeof t&&(o=n,n=r,r=t),e.length),e.index):"number"!=typeof t&&(o=n,n=r,r=t,t=0),"object"===(void 0===r?"undefined":a(r))?(i=r,o=n):"string"==typeof r&&(null!=n?i[r]=n:o=r),[e,t,i,o=o||c.default.sources.API]}function x(e,t,r,n){if(null==e)return null;var o,i=void 0,a=void 0;return a=t instanceof s.default?(o=[e.index,e.index+e.length].map(function(e){return t.transformPosition(e,n!==c.default.sources.USER)}),i=(o=l(o,2))[0],o[1]):(o=[e.index,e.index+e.length].map(function(e){return e<t||e===t&&n===c.default.sources.USER?e:0<=r?e+r:Math.max(t,e+r)}),i=(e=l(o,2))[0],e[1]),new p.Range(i,a-i)}_.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},_.events=c.default.events,_.sources=c.default.sources,_.version="1.3.7",_.imports={delta:s.default,parchment:d.default,"core/module":u.default,"core/theme":m.default},t.expandConfig=E,t.overload=C,t.default=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function a(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:a(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},o=s(r(7)),l=s(r(0));function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return e&&e.__esModule?e:{default:e}}r=function(e){function i(){var e=this,t=i;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(i,[{key:"formatAt",value:function(e,t,r,n){var o;i.compare(this.statics.blotName,r)<0&&l.default.query(r,l.default.Scope.BLOT)?(o=this.isolate(e,t),n&&o.wrap(r,n)):a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"formatAt",this).call(this,e,t,r,n)}},{key:"optimize",value:function(e){a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"optimize",this).call(this,e),this.parent instanceof i&&0<i.compare(this.statics.blotName,this.parent.statics.blotName)&&(e=this.parent.isolate(this.offset(),this.length()),this.moveChildren(e),e.wrap(this))}}],[{key:"compare",value:function(e,t){var r=i.order.indexOf(e),n=i.order.indexOf(t);return 0<=r||0<=n?r-n:e===t?0:e<t?-1:1}}]),i}(l.default.Inline);r.allowedChildren=[r,l.default.Embed,o.default],r.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r}(((r=r(0))&&r.__esModule?r:{default:r}).default.Text);t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},i=l(r(54));function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}var s=(0,l(r(10)).default)("quill:events"),r=(["selectionchange","mousedown","mouseup","click"].forEach(function(e){document.addEventListener(e,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(e){e.__quill&&e.__quill.emitter&&(e=e.__quill.emitter).handleDOM.apply(e,t)})})}),function(e){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");var e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",s.error),e}var r=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e),n(t,[{key:"emit",value:function(){s.log.apply(s,arguments),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(r){for(var e=arguments.length,n=Array(1<e?e-1:0),t=1;t<e;t++)n[t-1]=arguments[t];(this.listeners[r.type]||[]).forEach(function(e){var t=e.node,e=e.handler;r.target!==t&&!t.contains(r.target)||e.apply(void 0,[r].concat(n))})}},{key:"listenDOM",value:function(e,t,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:r})}}]),t}(i.default));r.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},r.sources={API:"api",SILENT:"silent",USER:"user"},t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this,n=o;if(!(r instanceof n))throw new TypeError("Cannot call a class as a function");this.quill=e,this.options=t}o.DEFAULTS={},t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=["error","warn","log","info"],a="warn";function n(e){if(i.indexOf(e)<=i.indexOf(a)){for(var t,r=arguments.length,n=Array(1<r?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(t=console)[e].apply(t,n)}}function o(r){return i.reduce(function(e,t){return e[t]=n.bind(console,t,r),e},{})}n.level=o.level=function(e){a=e},t.default=o},function(e,t,r){var l=Array.prototype.slice,s=r(52),c=r(53),u=e.exports=function(e,t,r){return r=r||{},e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:function(e,t,r){var n,o;if(d(e)||d(t))return!1;if(e.prototype!==t.prototype)return!1;if(c(e))return!!c(t)&&(e=l.call(e),t=l.call(t),u(e,t,r));if(p(e)){if(!p(t))return!1;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}try{var i=s(e),a=s(t)}catch(e){return!1}if(i.length!=a.length)return!1;for(i.sort(),a.sort(),n=i.length-1;0<=n;n--)if(i[n]!=a[n])return!1;for(n=i.length-1;0<=n;n--)if(o=i[n],!u(e[o],t[o],r))return!1;return typeof e==typeof t}(e,t,r))};function d(e){return null==e}function p(e){return e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.copy&&"function"==typeof e.slice&&!(0<e.length&&"number"!=typeof e[0])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);function o(e,t,r){void 0===r&&(r={}),this.attrName=e,this.keyName=t;e=n.Scope.TYPE&n.Scope.ATTRIBUTE;null!=r.scope?this.scope=r.scope&n.Scope.LEVEL|e:this.scope=n.Scope.ATTRIBUTE,null!=r.whitelist&&(this.whitelist=r.whitelist)}o.keys=function(e){return[].map.call(e.attributes,function(e){return e.name})},o.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},o.prototype.canAdd=function(e,t){return null!=n.query(e,n.Scope.BLOT&(this.scope|n.Scope.TYPE))&&(null==this.whitelist||("string"==typeof t?-1<this.whitelist.indexOf(t.replace(/["']/g,"")):-1<this.whitelist.indexOf(t)))},o.prototype.remove=function(e){e.removeAttribute(this.keyName)},o.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;function n(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var r=e,n=t,o=[],i=!0,e=!1,t=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done)&&(o.push(a.value),!n||o.length!==n);i=!0);}catch(r){e=!0,t=r}finally{try{!i&&l.return&&l.return()}finally{if(e)throw t}}return o}throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var i=function(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e},a=p(r(2)),s=p(r(0)),l=p(r(4)),c=p(r(6)),u=p(r(7));function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}y(m,c.default);r=m;function m(){return h(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}r.blotName="code",r.tagName="CODE";y(g,l.default),i(g,[{key:"delta",value:function(){var r=this,e=this.domNode.textContent;return(e=e.endsWith("\n")?e.slice(0,-1):e).split("\n").reduce(function(e,t){return e.insert(t).insert("\n",r.formats())},new a.default)}},{key:"format",value:function(e,t){var r;e===this.statics.blotName&&t||(r=this.descendant(u.default,this.length()-1),null!=(r=n(r,1)[0])&&r.deleteAt(r.length()-1,1),o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,e,t))}},{key:"formatAt",value:function(e,t,r,n){var o,i,a,l;0===t||null==s.default.query(r,s.default.Scope.BLOCK)||r===this.statics.blotName&&n===this.statics.formats(this.domNode)||((i=this.newlineIndex(e))<0||e+t<=i||(o=this.newlineIndex(e,!0)+1,l=(a=this.isolate(o,i=i-o+1)).next,a.format(r,n),l instanceof g&&l.formatAt(0,e-o+t-i,r,n)))}},{key:"insertAt",value:function(e,t,r){null==r&&(r=this.descendant(u.default,e),r=(e=n(r,2))[0],e=e[1],r.insertAt(e,t))}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(1<arguments.length&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return-1<t?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(s.default.create("text","\n")),o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,e);var t=this.next;null!=t&&t.prev===this&&t.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===t.statics.formats(t.domNode)&&(t.optimize(e),t.moveChildren(this),t.remove())}},{key:"replace",value:function(e){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(e){var t=s.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof s.default.Embed?t.remove():t.unwrap()})}}],[{key:"create",value:function(e){e=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,e);return e.setAttribute("spellcheck",!1),e}},{key:"formats",value:function(){return!0}}]);c=g;function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}c.blotName="code-block",c.tagName="PRE",c.TAB="  ",t.Code=r,t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function u(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var r=e,n=t,o=[],i=!0,e=!1,t=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done)&&(o.push(a.value),!n||o.length!==n);i=!0);}catch(r){e=!0,t=r}finally{try{!i&&l.return&&l.return()}finally{if(e)throw t}}return o}throw new TypeError("Invalid attempt to destructure non-iterable instance")}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},p=b(r(2)),h=b(r(20)),f=b(r(0)),c=b(r(13)),l=b(r(24)),y=r(4),m=b(y),o=b(r(16)),i=b(r(21)),s=b(r(11)),g=b(r(3));function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return e&&e.__esModule?e:{default:e}}var v=/^[ -~]*$/,r=(n(_,[{key:"applyDelta",value:function(e){var l=this,s=!1,c=(this.scroll.update(),this.scroll.length());return this.scroll.batchStart(),(e=e.reduce(function(e,t){var r;return 1===t.insert?(delete(r=(0,i.default)(t.attributes)).image,e.insert({image:t.attributes.image},r)):(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,i.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"==typeof t.insert?(r=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e.insert(r,t.attributes)):e.push(t))},new p.default)).reduce(function(t,e){var r=e.retain||e.delete||e.insert.length||1,n=e.attributes||{};if(null!=e.insert){if("string"==typeof e.insert){var o=e.insert,o=(o.endsWith("\n")&&s&&(s=!1,o=o.slice(0,-1)),c<=t&&!o.endsWith("\n")&&(s=!0),l.scroll.insertAt(t,o),l.scroll.line(t)),o=u(o,2),i=o[0],o=o[1],a=(0,g.default)({},(0,y.bubbleFormats)(i));i instanceof m.default&&(i=i.descendant(f.default.Leaf,o),o=u(i,1)[0],a=(0,g.default)(a,(0,y.bubbleFormats)(o))),n=h.default.attributes.diff(a,n)||{}}else if("object"===d(e.insert)){i=Object.keys(e.insert)[0];if(null==i)return t;l.scroll.insertAt(t,i,e.insert[i])}c+=r}return Object.keys(n).forEach(function(e){l.scroll.formatAt(t,r,e,n[e])}),t+r},0),e.reduce(function(e,t){return"number"==typeof t.delete?(l.scroll.deleteAt(e,t.delete),e):e+(t.retain||t.insert.length||1)},0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new p.default).retain(e).delete(t))}},{key:"formatLine",value:function(a,t){var l=this,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(s).forEach(function(o){var e,i;null!=l.scroll.whitelist&&!l.scroll.whitelist[o]||(e=l.scroll.lines(a,Math.max(t,1)),i=t,e.forEach(function(e){var t,r,n=e.length();e instanceof c.default?(t=a-e.offset(l.scroll),r=e.newlineIndex(t+i)-t+1,e.formatAt(t,r,o,s[o])):e.format(o,s[o]),i-=n}))}),this.scroll.optimize(),this.update((new p.default).retain(a).retain(t,(0,i.default)(s)))}},{key:"formatText",value:function(t,r){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(o).forEach(function(e){n.scroll.formatAt(t,r,e,o[e])}),this.update((new p.default).retain(t).retain(r,(0,i.default)(o)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(e,t){return e.concat(t.delta())},new p.default)}},{key:"getFormat",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=[],n=[],e=(0===t?this.scroll.path(e).forEach(function(e){e=u(e,1)[0];e instanceof m.default?r.push(e):e instanceof f.default.Leaf&&n.push(e)}):(r=this.scroll.lines(e,t),n=this.scroll.descendants(f.default.Leaf,e,t)),[r,n].map(function(e){if(0===e.length)return{};for(var t=(0,y.bubbleFormats)(e.shift());0<Object.keys(t).length;){var r=e.shift();if(null==r)return t;t=function(r,n){return Object.keys(n).reduce(function(e,t){return null!=r[t]&&(n[t]===r[t]?e[t]=n[t]:Array.isArray(n[t])?n[t].indexOf(r[t])<0&&(e[t]=n[t].concat([r[t]])):e[t]=[n[t],r[t]]),e},{})}((0,y.bubbleFormats)(r),t)}return t}));return g.default.apply(g.default,e)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter(function(e){return"string"==typeof e.insert}).map(function(e){return e.insert}).join("")}},{key:"insertEmbed",value:function(e,t,r){return this.scroll.insertAt(e,t,r),this.update((new p.default).retain(e).insert((e=r,(r=t)in(t={})?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t)))}},{key:"insertText",value:function(t,r){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r=r.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,r),Object.keys(o).forEach(function(e){n.scroll.formatAt(t,r.length,e,o[e])}),this.update((new p.default).retain(t).insert(r,(0,i.default)(o)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(1<this.scroll.children.length)return!1;var e=this.scroll.children.head;return e.statics.blotName===m.default.blotName&&!(1<e.children.length)&&e.children.head instanceof o.default}},{key:"removeFormat",value:function(e,t){var r=this.getText(e,t),n=this.scroll.line(e+t),n=u(n,2),o=n[0],n=n[1],i=0,a=new p.default,o=(null!=o&&(i=o instanceof c.default?o.newlineIndex(n)-n+1:o.length()-n,a=o.delta().slice(n,n+i-1).insert("\n")),this.getContents(e,t+i).diff((new p.default).insert(r).concat(a))),n=(new p.default).retain(e).concat(o);return this.applyDelta(n)}},{key:"update",value:function(e){var r,t,n,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,a=this.delta;return 1===o.length&&"characterData"===o[0].type&&o[0].target.data.match(v)&&f.default.find(o[0].target)?(n=f.default.find(o[0].target),r=(0,y.bubbleFormats)(n),t=n.offset(this.scroll),o=o[0].oldValue.replace(l.default.CONTENTS,""),o=(new p.default).insert(o),n=(new p.default).insert(n.value()),e=(new p.default).retain(t).concat(o.diff(n,i)).reduce(function(e,t){return t.insert?e.insert(t.insert,r):e.push(t)},new p.default),this.delta=a.compose(e)):(this.delta=this.getDelta(),e&&(0,s.default)(a.compose(e),this.delta)||(e=a.diff(this.delta,i))),e}}]),_);function _(e){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");this.scroll=e,this.delta=this.getDelta()}t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;function a(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var r=e,n=t,o=[],i=!0,e=!1,t=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done)&&(o.push(a.value),!n||o.length!==n);i=!0);}catch(r){e=!0,t=r}finally{try{!i&&l.return&&l.return()}finally{if(e)throw t}}return o}throw new TypeError("Invalid attempt to destructure non-iterable instance")}var n=function(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e},l=u(r(0)),o=u(r(21)),i=u(r(11)),s=u(r(8));function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=(0,u(r(10)).default)("quill:selection"),f=function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;p(this,e),this.index=t,this.length=r},r=(n(y,[{key:"handleComposition",value:function(){var t=this;this.root.addEventListener("compositionstart",function(){t.composing=!0}),this.root.addEventListener("compositionend",function(){var e;t.composing=!1,t.cursor.parent&&(e=t.cursor.restore())&&setTimeout(function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)})}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,function(){e.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){e.mouseDown=!1,e.update(s.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var r=this.getNativeRange();if(null!=r&&r.native.collapsed&&!l.default.query(e,l.default.Scope.BLOCK)){if(r.start.node!==this.cursor.textNode){var n,o=l.default.find(r.start.node,!1);if(null==o)return;o instanceof l.default.Leaf?(n=o.split(r.start.offset),o.parent.insertBefore(this.cursor,n)):o.insertBefore(this.cursor,r.start.node),this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=this.scroll.length(),r=(e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e,void 0),n=this.scroll.leaf(e),n=a(n,2),o=n[0],n=n[1];if(null==o)return null;var i=o.position(n,!0),i=a(i,2),i=(r=i[0],n=i[1],document.createRange());if(0<t){i.setStart(r,n);e=this.scroll.leaf(e+t),t=a(e,2),o=t[0],n=t[1];if(null==o)return null;e=o.position(n,!0),t=a(e,2),r=t[0];return n=t[1],i.setEnd(r,n),i.getBoundingClientRect()}e="left",t=void 0;return r instanceof Text?(n<r.data.length?(i.setStart(r,n),i.setEnd(r,n+1)):(i.setStart(r,n-1),i.setEnd(r,n),e="right"),t=i.getBoundingClientRect()):(t=o.domNode.getBoundingClientRect(),0<n&&(e="right")),{bottom:t.top+t.height,height:t.height,left:t[e],right:t[e],top:t.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;e=e.getRangeAt(0);if(null==e)return null;e=this.normalizeNative(e);return h.info("getNativeRange",e),e}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var o=this,t=[[e.start.node,e.start.offset]],e=(e.native.collapsed||t.push([e.end.node,e.end.offset]),t.map(function(e){var e=a(e,2),t=e[0],e=e[1],r=l.default.find(t,!0),n=r.offset(o.scroll);return 0===e?n:r instanceof l.default.Container?n+r.length():n+r.index(t,e)})),t=Math.min(Math.max.apply(Math,d(e)),this.scroll.length()-1),e=Math.min.apply(Math,[t].concat(d(e)));return new f(e,t-e)}},{key:"normalizeNative",value:function(e){if(!m(this.root,e.startContainer)||!e.collapsed&&!m(this.root,e.endContainer))return null;e={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[e.start,e.end].forEach(function(e){for(var t=e.node,r=e.offset;!(t instanceof Text)&&0<t.childNodes.length;)if(t.childNodes.length>r)t=t.childNodes[r],r=0;else{if(t.childNodes.length!==r)break;r=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=r}),e}},{key:"rangeToNative",value:function(e){var n=this,e=e.collapsed?[e.index]:[e.index,e.index+e.length],o=[],i=this.scroll.length();return e.forEach(function(e,t){e=Math.min(i-1,e);var e=n.scroll.leaf(e),e=a(e,2),r=e[0],e=e[1],r=r.position(e,0!==t),t=a(r,2),r=t[0],e=t[1];o.push(r,e)}),o=o.length<2?o.concat(o):o}},{key:"scrollIntoView",value:function(e){var t,r,n,o,i=this.lastRange;null!=i&&null!=(t=this.getBounds(i.index,i.length))&&(o=this.scroll.length()-1,r=this.scroll.line(Math.min(i.index,o)),n=r=a(r,1)[0],0<i.length&&(i=this.scroll.line(Math.min(i.index+i.length,o)),n=a(i,1)[0]),null!=r&&null!=n&&(o=e.getBoundingClientRect(),t.top<o.top?e.scrollTop-=o.top-t.top:t.bottom>o.bottom&&(e.scrollTop+=t.bottom-o.bottom)))}},{key:"setNativeRange",value:function(e,t){var r,n,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t,a=4<arguments.length&&void 0!==arguments[4]&&arguments[4];h.info("setNativeRange",e,t,o,i),(null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=o.parentNode)&&null!=(r=document.getSelection())&&(null!=e?(this.hasFocus()||this.root.focus(),null!=(n=(this.getNativeRange()||{}).native)&&!a&&e===n.startContainer&&t===n.startOffset&&o===n.endContainer&&i===n.endOffset||("BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==o.tagName&&(i=[].indexOf.call(o.parentNode.childNodes,o),o=o.parentNode),(a=document.createRange()).setStart(e,t),a.setEnd(o,i),r.removeAllRanges(),r.addRange(a))):(r.removeAllRanges(),this.root.blur(),document.body.focus()))}},{key:"setRange",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:s.default.sources.API;"string"==typeof t&&(r=t,t=!1),h.info("setRange",e),null!=e?(e=this.rangeToNative(e),this.setNativeRange.apply(this,d(e).concat([t]))):this.setNativeRange(null),this.update(r)}},{key:"update",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s.default.sources.USER,t=this.lastRange,r=this.getRange(),r=a(r,2),n=r[0],r=r[1];this.lastRange=n,null!=this.lastRange&&(this.savedRange=this.lastRange),(0,i.default)(t,this.lastRange)||(!this.composing&&null!=r&&r.native.collapsed&&r.start.node!==this.cursor.textNode&&this.cursor.restore(),n=[s.default.events.SELECTION_CHANGE,(0,o.default)(this.lastRange),(0,o.default)(t),e],(r=this.emitter).emit.apply(r,[s.default.events.EDITOR_CHANGE].concat(n)),e!==s.default.sources.SILENT&&(t=this.emitter).emit.apply(t,n))}}]),y);function y(e,t){var i=this;p(this,y),this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new f(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){i.mouseDown||setTimeout(i.update.bind(i,s.default.sources.USER),1)}),this.emitter.on(s.default.events.EDITOR_CHANGE,function(e,t){e===s.default.events.TEXT_CHANGE&&0<t.length()&&i.update(s.default.sources.SILENT)}),this.emitter.on(s.default.events.SCROLL_BEFORE_UPDATE,function(){var e;i.hasFocus()&&null!=(e=i.getNativeRange())&&e.start.node!==i.cursor.textNode&&i.emitter.once(s.default.events.SCROLL_UPDATE,function(){try{i.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(e){}})}),this.emitter.on(s.default.events.SCROLL_OPTIMIZE,function(e,t){var r,n,o;t.range&&(r=(t=t.range).startNode,n=t.startOffset,o=t.endNode,t=t.endOffset,i.setNativeRange(r,n,o,t))}),this.update(s.default.sources.SILENT)}function m(e,t){try{t.parentNode}catch(e){return}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=f,t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"insertInto",value:function(e,t){0===e.children.length?o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"insertInto",this).call(this,e,t):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),r}(((r=r(0))&&r.__esModule?r:{default:r}).default.Embed);r.blotName="break",r.tagName="BR",t.default=r},function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),r(44)),l=r(30),s=r(1),r=(o=l.default,i(c,o),c.prototype.appendChild=function(e){this.insertBefore(e)},c.prototype.attach=function(){o.prototype.attach.call(this),this.children.forEach(function(e){e.attach()})},c.prototype.build=function(){var r=this;this.children=new a.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(e){try{var t=u(e);r.insertBefore(t,r.children.head||void 0)}catch(e){if(e instanceof s.ParchmentError)return;throw e}})},c.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,function(e,t,r){e.deleteAt(t,r)})},c.prototype.descendant=function(e,t){var t=this.children.find(t),r=t[0],t=t[1];return null==e.blotName&&e(r)||null!=e.blotName&&r instanceof e?[r,t]:r instanceof c?r.descendant(e,t):[null,-1]},c.prototype.descendants=function(n,e,t){void 0===e&&(e=0),void 0===t&&(t=Number.MAX_VALUE);var o=[],i=t;return this.children.forEachAt(e,t,function(e,t,r){(null==n.blotName&&n(e)||null!=n.blotName&&e instanceof n)&&o.push(e),e instanceof c&&(o=o.concat(e.descendants(n,t,i))),i-=r}),o},c.prototype.detach=function(){this.children.forEach(function(e){e.detach()}),o.prototype.detach.call(this)},c.prototype.formatAt=function(e,t,n,o){this.children.forEachAt(e,t,function(e,t,r){e.formatAt(t,r,n,o)})},c.prototype.insertAt=function(e,t,r){var e=this.children.find(e),n=e[0],e=e[1];n?n.insertAt(e,t,r):(n=null==r?s.create("text",t):s.create(t,r),this.appendChild(n))},c.prototype.insertBefore=function(t,e){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(e){return t instanceof e}))throw new s.ParchmentError("Cannot insert "+t.statics.blotName+" into "+this.statics.blotName);t.insertInto(this,e)},c.prototype.length=function(){return this.children.reduce(function(e,t){return e+t.length()},0)},c.prototype.moveChildren=function(t,r){this.children.forEach(function(e){t.insertBefore(e,r)})},c.prototype.optimize=function(e){var t;o.prototype.optimize.call(this,e),0===this.children.length&&(null!=this.statics.defaultChild?(t=s.create(this.statics.defaultChild),this.appendChild(t),t.optimize(e)):this.remove())},c.prototype.path=function(e,t){var r=this.children.find(e,t=void 0===t?!1:t),n=r[0],r=r[1],e=[[this,e]];return n instanceof c?e.concat(n.path(r,t)):(null!=n&&e.push([n,r]),e)},c.prototype.removeChild=function(e){this.children.remove(e)},c.prototype.replace=function(e){e instanceof c&&e.moveChildren(this),o.prototype.replace.call(this,e)},c.prototype.split=function(e,n){if(!(n=void 0===n?!1:n)){if(0===e)return this;if(e===this.length())return this.next}var o=this.clone();return this.parent.insertBefore(o,this.next),this.children.forEachAt(e,this.length(),function(e,t,r){e=e.split(t,n),o.appendChild(e)}),o},c.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},c.prototype.update=function(e,t){var r=this,n=[],o=[];e.forEach(function(e){e.target===r.domNode&&"childList"===e.type&&(n.push.apply(n,e.addedNodes),o.push.apply(o,e.removedNodes))}),o.forEach(function(e){null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY||(null==(e=s.find(e))||null!=e.domNode.parentNode&&e.domNode.parentNode!==r.domNode||e.detach())}),n.filter(function(e){return e.parentNode==r.domNode}).sort(function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(e){var t=null,e=(null!=e.nextSibling&&(t=s.find(e.nextSibling)),u(e));e.next==t&&null!=e.next||(null!=e.parent&&e.parent.removeChild(r),r.insertBefore(e,t||void 0))})},c);function c(e){e=o.call(this,e)||this;return e.build(),e}function u(t){var r=s.find(t);if(null==r)try{r=s.create(t)}catch(e){r=s.create(s.Scope.INLINE),[].slice.call(t.childNodes).forEach(function(e){r.domNode.appendChild(e)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach()}return r}t.default=r},function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),r(12)),l=r(31),s=r(17),c=r(1),r=(o=s.default,i(u,o),u.formats=function(e){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},u.prototype.format=function(e,t){var r=c.query(e);r instanceof a.default?this.attributes.attribute(r,t):!t||null==r||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t)},u.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},u.prototype.replaceWith=function(e,t){e=o.prototype.replaceWith.call(this,e,t);return this.attributes.copy(e),e},u.prototype.update=function(e,t){var r=this;o.prototype.update.call(this,e,t),e.some(function(e){return e.target===r.domNode&&"attributes"===e.type})&&this.attributes.build()},u.prototype.wrap=function(e,t){e=o.prototype.wrap.call(this,e,t);return e instanceof u&&e.statics.scope===this.statics.scope&&this.attributes.move(e),e},u);function u(e){e=o.call(this,e)||this;return e.attributes=new l.default(e.domNode),e}t.default=r},function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),r(30)),r=r(1),a=(o=a.default,i(l,o),l.value=function(e){return!0},l.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},l.prototype.position=function(e,t){var r=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return 0<e&&(r+=1),[this.parent.domNode,r]},l.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},l.scope=r.Scope.INLINE_BLOT,l);function l(){return null!==o&&o.apply(this,arguments)||this}t.default=a},function(e,t,r){var o=r(11),i=r(3),a={attributes:{compose:function(e,t,r){"object"!=typeof e&&(e={});var n,o=i(!0,{},t="object"!=typeof t?{}:t);for(n in r||(o=Object.keys(o).reduce(function(e,t){return null!=o[t]&&(e[t]=o[t]),e},{})),e)void 0!==e[n]&&void 0===t[n]&&(o[n]=e[n]);return 0<Object.keys(o).length?o:void 0},diff:function(r,n){"object"!=typeof r&&(r={}),"object"!=typeof n&&(n={});var e=Object.keys(r).concat(Object.keys(n)).reduce(function(e,t){return o(r[t],n[t])||(e[t]=void 0===n[t]?null:n[t]),e},{});return 0<Object.keys(e).length?e:void 0},transform:function(r,n,e){if("object"!=typeof r)return n;if("object"==typeof n){if(!e)return n;e=Object.keys(n).reduce(function(e,t){return void 0===r[t]&&(e[t]=n[t]),e},{});return 0<Object.keys(e).length?e:void 0}}},iterator:function(e){return new n(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function n(e){this.ops=e,this.index=0,this.offset=0}n.prototype.hasNext=function(){return this.peekLength()<1/0},n.prototype.next=function(e){e=e||1/0;var t=this.ops[this.index];if(t){var r=this.offset,n=a.length(t);if(n-r<=e?(e=n-r,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};n={};return t.attributes&&(n.attributes=t.attributes),"number"==typeof t.retain?n.retain=e:"string"==typeof t.insert?n.insert=t.insert.substr(r,e):n.insert=t.insert,n}return{retain:1/0}},n.prototype.peek=function(){return this.ops[this.index]},n.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},n.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},n.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,r=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(n)}return[]},e.exports=a},function(e,t){var r=function(){"use strict";function v(e,t){return null!=t&&e instanceof t}var _,w,E;try{_=Map}catch(v){_=function(){}}try{w=Set}catch(v){w=function(){}}try{E=Promise}catch(v){E=function(){}}function I(e,h,t,f,y){"object"==typeof h&&(t=h.depth,f=h.prototype,y=h.includeNonEnumerable,h=h.circular);var m=[],g=[],b="undefined"!=typeof Buffer;return void 0===h&&(h=!0),function n(e,o){if(null===e)return null;if(0===o)return e;var r,t,i;if("object"!=typeof e)return e;if(v(e,_))r=new _;else if(v(e,w))r=new w;else if(v(e,E))r=new E(function(t,r){e.then(function(e){t(n(e,o-1))},function(e){r(n(e,o-1))})});else if(I.__isArray(e))r=[];else if(I.__isRegExp(e))r=new RegExp(e.source,C(e)),e.lastIndex&&(r.lastIndex=e.lastIndex);else if(I.__isDate(e))r=new Date(e.getTime());else{if(b&&Buffer.isBuffer(e))return r=Buffer.allocUnsafe?Buffer.allocUnsafe(e.length):new Buffer(e.length),e.copy(r),r;v(e,Error)?r=Object.create(e):void 0===f?(t=Object.getPrototypeOf(e),r=Object.create(t)):(r=Object.create(f),t=f)}if(h){var a=m.indexOf(e);if(-1!=a)return g[a];m.push(e),g.push(r)}for(s in v(e,_)&&e.forEach(function(e,t){t=n(t,o-1),e=n(e,o-1);r.set(t,e)}),v(e,w)&&e.forEach(function(e){e=n(e,o-1);r.add(e)}),e)(i=t?Object.getOwnPropertyDescriptor(t,s):i)&&null==i.set||(r[s]=n(e[s],o-1));if(Object.getOwnPropertySymbols)for(var l=Object.getOwnPropertySymbols(e),s=0;s<l.length;s++){var c=l[s];(d=Object.getOwnPropertyDescriptor(e,c))&&!d.enumerable&&!y||(r[c]=n(e[c],o-1),d.enumerable||Object.defineProperty(r,c,{enumerable:!1}))}if(y){var u=Object.getOwnPropertyNames(e);for(s=0;s<u.length;s++){var d,p=u[s];(d=Object.getOwnPropertyDescriptor(e,p))&&d.enumerable||(r[p]=n(e[p],o-1),Object.defineProperty(r,p,{enumerable:!1}))}}return r}(e,t=void 0===t?1/0:t)}function t(e){return Object.prototype.toString.call(e)}function C(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return I.clonePrototype=function(e){if(null===e)return null;function t(){}return t.prototype=e,new t},I.__objToStr=t,I.__isDate=function(e){return"object"==typeof e&&"[object Date]"===t(e)},I.__isArray=function(e){return"object"==typeof e&&"[object Array]"===t(e)},I.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===t(e)},I.__getRegExpFlags=C,I}();"object"==typeof e&&e.exports&&(e.exports=r)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function a(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var r=e,n=t,o=[],i=!0,e=!1,t=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done)&&(o.push(a.value),!n||o.length!==n);i=!0);}catch(r){e=!0,t=r}finally{try{!i&&l.return&&l.return()}finally{if(e)throw t}}return o}throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:l(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e},s=h(r(0)),o=h(r(8)),c=r(4),i=h(c),u=h(r(16)),d=h(r(13)),r=h(r(25));function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return e&&e.__esModule?e:{default:e}}function f(e){return e instanceof i.default||e instanceof c.BlockEmbed}var y=function(e){function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return e.emitter=t.emitter,Array.isArray(t.whitelist)&&(e.whitelist=t.whitelist.reduce(function(e,t){return e[t]=!0,e},{})),e.domNode.addEventListener("DOMNodeInserted",function(){}),e.optimize(),e.enable(),e}var t=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(i,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,t){var r=this.line(e),r=a(r,2),n=r[0],r=r[1],o=this.line(e+t),o=a(o,1)[0];if(l(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"deleteAt",this).call(this,e,t),null!=o&&n!==o&&0<r){if(n instanceof c.BlockEmbed||o instanceof c.BlockEmbed)return void this.optimize();if(n instanceof d.default){e=n.newlineIndex(n.length(),!0);if(-1<e&&(n=n.split(e+1))===o)return void this.optimize()}else o instanceof d.default&&(-1<(t=o.newlineIndex(0))&&o.split(t+1));r=o.children.head instanceof u.default?null:o.children.head;n.moveChildren(o,r),n.remove()}this.optimize()}},{key:"enable",value:function(){this.domNode.setAttribute("contenteditable",!(0<arguments.length&&void 0!==arguments[0])||arguments[0])}},{key:"formatAt",value:function(e,t,r,n){null!=this.whitelist&&!this.whitelist[r]||(l(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"formatAt",this).call(this,e,t,r,n),this.optimize())}},{key:"insertAt",value:function(e,t,r){var n;null!=r&&null!=this.whitelist&&!this.whitelist[t]||(e>=this.length()?null==r||null==s.default.query(t,s.default.Scope.BLOCK)?(n=s.default.create(this.statics.defaultChild),this.appendChild(n),null==r&&t.endsWith("\n")&&(t=t.slice(0,-1)),n.insertAt(0,t,r)):(n=s.default.create(t,r),this.appendChild(n)):l(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"insertAt",this).call(this,e,t,r),this.optimize())}},{key:"insertBefore",value:function(e,t){var r;e.statics.scope===s.default.Scope.INLINE_BLOT&&((r=s.default.create(this.statics.defaultChild)).appendChild(e),e=r),l(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"insertBefore",this).call(this,e,t)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(f,e)}},{key:"lines",value:function(){return function n(e,t,r){var o=[],i=r;return e.children.forEachAt(t,r,function(e,t,r){f(e)?o.push(e):e instanceof s.default.Container&&(o=o.concat(n(e,t,i))),i-=r}),o}(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(l(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"optimize",this).call(this,e,t),0<e.length&&this.emitter.emit(o.default.events.SCROLL_OPTIMIZE,e,t))}},{key:"path",value:function(e){return l(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){var t;!0!==this.batch&&(t=o.default.sources.USER,"string"==typeof e&&(t=e),0<(e=Array.isArray(e)?e:this.observer.takeRecords()).length&&this.emitter.emit(o.default.events.SCROLL_BEFORE_UPDATE,t,e),l(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"update",this).call(this,e.concat([])),0<e.length&&this.emitter.emit(o.default.events.SCROLL_UPDATE,t,e))}}]),i}(s.default.Scroll);y.blotName="scroll",y.className="ql-editor",y.tagName="DIV",y.defaultChild="block",y.allowedChildren=[i.default,c.BlockEmbed,r.default],t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var r=e,n=t,o=[],i=!0,e=!1,t=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done)&&(o.push(a.value),!n||o.length!==n);i=!0);}catch(r){e=!0,t=r}finally{try{!i&&l.return&&l.return()}finally{if(e)throw t}}return o}throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e},o=d(r(21)),f=d(r(11)),i=d(r(3)),a=d(r(2)),l=d(r(20)),y=d(r(0)),c=d(r(5)),s=d(r(10)),r=d(r(9));function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return e&&e.__esModule?e:{default:e}}function m(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var g=(0,s.default)("quill:keyboard"),b=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",v=function(e){function d(t,e){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var r=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,t,e));return r.bindings={},Object.keys(r.options.bindings).forEach(function(e){("list autofill"!==e||null==t.scroll.whitelist||t.scroll.whitelist.list)&&r.options.bindings[e]&&r.addBinding(r.options.bindings[e])}),r.addBinding({key:d.keys.ENTER,shiftKey:null},C),r.addBinding({key:d.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(r.addBinding({key:d.keys.BACKSPACE},{collapsed:!0},w),r.addBinding({key:d.keys.DELETE},{collapsed:!0},E)):(r.addBinding({key:d.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},w),r.addBinding({key:d.keys.DELETE},{collapsed:!0,suffix:/^.?$/},E)),r.addBinding({key:d.keys.BACKSPACE},{collapsed:!1},I),r.addBinding({key:d.keys.DELETE},{collapsed:!1},I),r.addBinding({key:d.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},w),r.listen(),r}var t=d;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(d,null,[{key:"match",value:function(t,r){return r=S(r),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(e){return!!r[e]!==t[e]&&null!==r[e]})&&r.key===(t.which||t.keyCode)}}]),n(d,[{key:"addBinding",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=S(e);if(null==e||null==e.key)return g.warn("Attempted to add invalid keyboard binding",e);e=(0,i.default)(e,t="function"==typeof t?{handler:t}:t,r="function"==typeof r?{handler:r}:r),this.bindings[e.key]=this.bindings[e.key]||[],this.bindings[e.key].push(e)}},{key:"listen",value:function(){var u=this;this.quill.root.addEventListener("keydown",function(t){var e,r,n,o,i,a,l,s,c;t.defaultPrevented||(e=t.which||t.keyCode,0!==(e=(u.bindings[e]||[]).filter(function(e){return d.match(t,e)})).length&&null!=(r=u.quill.getSelection())&&u.quill.hasFocus()&&(o=u.quill.getLine(r.index),n=(o=h(o,2))[0],o=o[1],s=u.quill.getLeaf(r.index),l=(s=h(s,2))[0],s=s[1],a=0===r.length?[l,s]:u.quill.getLeaf(r.index+r.length),i=(a=h(a,2))[0],a=a[1],l=l instanceof y.default.Text?l.value().slice(0,s):"",s=i instanceof y.default.Text?i.value().slice(a):"",c={collapsed:0===r.length,empty:0===r.length&&n.length()<=1,format:u.quill.getFormat(r),offset:o,prefix:l,suffix:s},e.some(function(t){if(null!=t.collapsed&&t.collapsed!==c.collapsed)return!1;if(null!=t.empty&&t.empty!==c.empty)return!1;if(null!=t.offset&&t.offset!==c.offset)return!1;if(Array.isArray(t.format)){if(t.format.every(function(e){return null==c.format[e]}))return!1}else if("object"===p(t.format)&&!Object.keys(t.format).every(function(e){return!0===t.format[e]?null!=c.format[e]:!1===t.format[e]?null==c.format[e]:(0,f.default)(t.format[e],c.format[e])}))return!1;return!(null!=t.prefix&&!t.prefix.test(c.prefix)||null!=t.suffix&&!t.suffix.test(c.suffix)||!0===t.handler.call(u,r,c))})&&t.preventDefault()))})}}]),d}(r.default);function _(r,n){var e,t=r===v.keys.LEFT?"prefix":"suffix";return m(e={key:r,shiftKey:n,altKey:null},t,/^$/),m(e,"handler",function(e){var t=e.index,t=(r===v.keys.RIGHT&&(t+=e.length+1),this.quill.getLeaf(t));return!(h(t,1)[0]instanceof y.default.Embed&&(r===v.keys.LEFT?n?this.quill.setSelection(e.index-1,e.length+1,c.default.sources.USER):this.quill.setSelection(e.index-1,c.default.sources.USER):n?this.quill.setSelection(e.index,e.length+1,c.default.sources.USER):this.quill.setSelection(e.index+e.length+1,c.default.sources.USER),1))}),e}function w(e,t){var r,n,o;0===e.index||this.quill.getLength()<=1||(r=this.quill.getLine(e.index),r=h(r,1)[0],n={},0===t.offset&&(o=this.quill.getLine(e.index-1),null!=(o=h(o,1)[0])&&1<o.length()&&(o=r.formats(),r=this.quill.getFormat(e.index-1,1),n=l.default.attributes.diff(o,r)||{})),o=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1,this.quill.deleteText(e.index-o,o,c.default.sources.USER),0<Object.keys(n).length&&this.quill.formatLine(e.index-o,o,n,c.default.sources.USER),this.quill.focus())}function E(e,t){var r,n,o,i,a=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;e.index>=this.quill.getLength()-a||(o={},i=0,r=this.quill.getLine(e.index),r=h(r,1)[0],t.offset>=r.length()-1&&(t=this.quill.getLine(e.index+1),(t=h(t,1)[0])&&(r=r.formats(),n=this.quill.getFormat(e.index,1),o=l.default.attributes.diff(r,n)||{},i=t.length())),this.quill.deleteText(e.index,a,c.default.sources.USER),0<Object.keys(o).length&&this.quill.formatLine(e.index+i-1,a,o,c.default.sources.USER))}function I(e){var t,r=this.quill.getLines(e),n={};1<r.length&&(t=r[0].formats(),r=r[r.length-1].formats(),n=l.default.attributes.diff(r,t)||{}),this.quill.deleteText(e,c.default.sources.USER),0<Object.keys(n).length&&this.quill.formatLine(e.index,1,n,c.default.sources.USER),this.quill.setSelection(e.index,c.default.sources.SILENT),this.quill.focus()}function C(e,r){var t=this,n=(0<e.length&&this.quill.scroll.deleteAt(e.index,e.length),Object.keys(r.format).reduce(function(e,t){return y.default.query(t,y.default.Scope.BLOCK)&&!Array.isArray(r.format[t])&&(e[t]=r.format[t]),e},{}));this.quill.insertText(e.index,"\n",n,c.default.sources.USER),this.quill.setSelection(e.index+1,c.default.sources.SILENT),this.quill.focus(),Object.keys(r.format).forEach(function(e){null!=n[e]||Array.isArray(r.format[e])||"link"!==e&&t.quill.format(e,r.format[e],c.default.sources.USER)})}function x(s){return{key:v.keys.TAB,shiftKey:!s,format:{"code-block":!0},handler:function(e){var r,n=y.default.query("code-block"),o=e.index,i=e.length,e=this.quill.scroll.descendant(n,o),e=h(e,2),a=e[0],l=e[1];null!=a&&(e=this.quill.getIndex(a),r=a.newlineIndex(l,!0)+1,e=a.newlineIndex(e+l+i),e=a.domNode.textContent.slice(r,e).split("\n"),l=0,e.forEach(function(e,t){s?(a.insertAt(r+l,n.TAB),l+=n.TAB.length,0===t?o+=n.TAB.length:i+=n.TAB.length):e.startsWith(n.TAB)&&(a.deleteAt(r+l,n.TAB.length),l-=n.TAB.length,0===t?o-=n.TAB.length:i-=n.TAB.length),l+=e.length+1}),this.quill.update(c.default.sources.USER),this.quill.setSelection(o,i,c.default.sources.SILENT))}}}function k(r){return{key:r[0].toUpperCase(),shortKey:!0,handler:function(e,t){this.quill.format(r,!t.format[r],c.default.sources.USER)}}}function S(e){if("string"==typeof e||"number"==typeof e)return S({key:e});if("string"==typeof(e="object"===(void 0===e?"undefined":p(e))?(0,o.default)(e,!1):e).key)if(null!=v.keys[e.key.toUpperCase()])e.key=v.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[b]=e.shortKey,delete e.shortKey),e}v.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},v.DEFAULTS={bindings:{bold:k("bold"),italic:k("italic"),underline:k("underline"),indent:{key:v.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",c.default.sources.USER)}},outdent:{key:v.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",c.default.sources.USER)}},"outdent backspace":{key:v.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",c.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,c.default.sources.USER)}},"indent code-block":x(!0),"outdent code-block":x(!1),"remove tab":{key:v.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,c.default.sources.USER)}},tab:{key:v.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new a.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,c.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,c.default.sources.SILENT)}},"list empty enter":{key:v.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,c.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,c.default.sources.USER)}},"checklist enter":{key:v.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),t=h(t,2),r=t[0],t=t[1],n=(0,i.default)({},r.formats(),{list:"checked"}),n=(new a.default).retain(e.index).insert("\n",n).retain(r.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(n,c.default.sources.USER),this.quill.setSelection(e.index+1,c.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:v.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var r=this.quill.getLine(e.index),r=h(r,2),n=r[0],r=r[1],t=(new a.default).retain(e.index).insert("\n",t.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(t,c.default.sources.USER),this.quill.setSelection(e.index+1,c.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var r=t.prefix.length,n=this.quill.getLine(e.index),n=h(n,2),o=n[0],n=n[1];if(r<n)return!0;var i=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(e.index," ",c.default.sources.USER),this.quill.history.cutoff();t=(new a.default).retain(e.index-n).delete(r+1).retain(o.length()-2-n).retain(1,{list:i});this.quill.updateContents(t,c.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,c.default.sources.SILENT)}},"code exit":{key:v.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),t=h(t,2),r=t[0],t=t[1],e=(new a.default).retain(e.index+r.length()-t-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(e,c.default.sources.USER)}},"embed left":_(v.keys.LEFT,!1),"embed left shift":_(v.keys.LEFT,!0),"embed right":_(v.keys.RIGHT,!1),"embed right shift":_(v.keys.RIGHT,!0)}},t.default=v,t.SHORTKEY=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},a=s(r(0)),l=s(r(7));function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return e&&e.__esModule?e:{default:e}}r=function(e){function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return e.selection=t,e.textNode=document.createTextNode(i.CONTENTS),e.domNode.appendChild(e.textNode),e._length=0,e}var t=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(i,null,[{key:"value",value:function(){}}]),n(i,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,t){if(0!==this._length)return o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"format",this).call(this,e,t);for(var r=this,n=0;null!=r&&r.statics.scope!==a.default.Scope.BLOCK_BLOT;)n+=r.offset(r.parent),r=r.parent;null!=r&&(this._length=i.CONTENTS.length,r.optimize(),r.formatAt(n,i.CONTENTS.length,e,t),this._length=0)}},{key:"index",value:function(e,t){return e===this.textNode?0:o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"index",this).call(this,e,t)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,t=this.selection.getNativeRange(),r=void 0,n=void 0,o=void 0;for(null!=t&&t.start.node===e&&t.end.node===e&&(e=[e,t.start.offset,t.end.offset],r=e[0],n=e[1],o=e[2]);null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==i.CONTENTS&&(t=this.textNode.data.split(i.CONTENTS).join(""),this.next instanceof l.default?(r=this.next.domNode,this.next.insertAt(0,t),this.textNode.data=i.CONTENTS):(this.textNode.data=t,this.parent.insertBefore(a.default.create(this.textNode),this),this.textNode=document.createTextNode(i.CONTENTS),this.domNode.appendChild(this.textNode))),this.remove(),null!=n)return n=(e=function(e){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var t=e,r=[],n=!0,e=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),2!==r.length);n=!0);}catch(t){e=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(e)throw o}}return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")}([n,o].map(function(e){return Math.max(0,Math.min(r.data.length,e-1))})))[0],o=e[1],{startNode:r,startOffset:n,endNode:r,endOffset:o}}}},{key:"update",value:function(e,t){var r=this;e.some(function(e){return"characterData"===e.type&&e.target===r.textNode})&&(e=this.restore())&&(t.range=e)}},{key:"value",value:function(){return""}}]),i}(a.default.Embed);r.blotName="cursor",r.className="ql-cursor",r.tagName="span",r.CONTENTS="\ufeff",t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(0)),r=r(4),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}n=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r}(n.default.Container);n.allowedChildren=[o.default,r.BlockEmbed,n],t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},r=(r=r(0))&&r.__esModule?r:{default:r};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"value",value:function(e){e=o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"value",this).call(this,e);return e.startsWith("rgb(")?"#"+(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(e){return("00"+parseInt(e).toString(16)).slice(-2)}).join(""):e}}]),r}(r.default.Attributor.Style),l=new r.default.Attributor.Class("color","ql-color",{scope:r.default.Scope.INLINE}),r=new a("color","color",{scope:r.default.Scope.INLINE});t.ColorAttributor=a,t.ColorClass=l,t.ColorStyle=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"format",value:function(e,t){if(e!==this.statics.blotName||!t)return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"format",this).call(this,e,t);t=this.constructor.sanitize(t),this.domNode.setAttribute("href",t)}}],[{key:"create",value:function(e){var t=o(r.__proto__||Object.getPrototypeOf(r),"create",this).call(this,e);return e=this.sanitize(e),t.setAttribute("href",e),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return a(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),r}(((r=r(6))&&r.__esModule?r:{default:r}).default);function a(e,t){var r=document.createElement("a"),e=(r.href=e,r.href.slice(0,r.href.indexOf(":")));return-1<t.indexOf(e)}r.blotName="link",r.tagName="A",r.SANITIZED_URL="about:blank",r.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=r,t.sanitize=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e},i=s(r(23)),a=s(r(107));function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return e&&e.__esModule?e:{default:e}}var c=0;function u(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}o(d,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),u(this.label,"aria-expanded"),u(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,r=document.createElement("span");return r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item"),e.hasAttribute("value")&&r.setAttribute("data-value",e.getAttribute("value")),e.textContent&&r.setAttribute("data-label",e.textContent),r.addEventListener("click",function(){t.selectItem(r,!0)}),r.addEventListener("keydown",function(e){switch(e.keyCode){case i.default.keys.ENTER:t.selectItem(r,!0),e.preventDefault();break;case i.default.keys.ESCAPE:t.escape(),e.preventDefault()}}),r}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=a.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var r=this,n=document.createElement("span");n.classList.add("ql-picker-options"),n.setAttribute("aria-hidden","true"),n.tabIndex="-1",n.id="ql-picker-options-"+c,c+=1,this.label.setAttribute("aria-controls",n.id),this.options=n,[].slice.call(this.select.options).forEach(function(e){var t=r.buildItem(e);n.appendChild(t),!0===e.selected&&r.selectItem(t)}),this.container.appendChild(n)}},{key:"buildPicker",value:function(){var t=this;[].slice.call(this.select.attributes).forEach(function(e){t.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout(function(){return e.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=this.container.querySelector(".ql-selected");e!==r&&(null!=r&&r.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))&&("function"==typeof Event?this.select.dispatchEvent(new Event("change")):"object"===("undefined"==typeof Event?"undefined":n(Event))&&((r=document.createEvent("Event")).initEvent("change",!0,!0),this.select.dispatchEvent(r)),this.close())}},{key:"update",value:function(){var e=void 0,t=(-1<this.select.selectedIndex?(t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex],e=this.select.options[this.select.selectedIndex],this.selectItem(t)):this.selectItem(null),null!=e&&e!==this.select.querySelector("option[selected]"));this.label.classList.toggle("ql-active",t)}}]);r=d;function d(e){var t=this;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){t.togglePicker()}),this.label.addEventListener("keydown",function(e){switch(e.keyCode){case i.default.keys.ENTER:t.togglePicker();break;case i.default.keys.ESCAPE:t.escape(),e.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(r(0)),o=m(r(5)),i=r(4),a=m(i),l=m(r(16)),s=m(r(25)),c=m(r(24)),u=m(r(35)),d=m(r(6)),p=m(r(22)),h=m(r(7)),f=m(r(55)),y=m(r(42)),r=m(r(23));function m(e){return e&&e.__esModule?e:{default:e}}o.default.register({"blots/block":a.default,"blots/block/embed":i.BlockEmbed,"blots/break":l.default,"blots/container":s.default,"blots/cursor":c.default,"blots/embed":u.default,"blots/inline":d.default,"blots/scroll":p.default,"blots/text":h.default,"modules/clipboard":f.default,"modules/history":y.default,"modules/keyboard":r.default}),n.default.register(a.default,l.default,c.default,d.default,p.default,h.default),t.default=o.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(1);function n(e){this.domNode=e,this.domNode[o.DATA_KEY]={blot:this}}Object.defineProperty(n.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),n.create=function(e){if(null==this.tagName)throw new o.ParchmentError("Blot definition missing tagName");e=Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),"number"==typeof e?document.createElement(this.tagName[e-1]):-1<this.tagName.indexOf(e)?document.createElement(e):document.createElement(this.tagName[0])):document.createElement(this.tagName);return this.className&&e.classList.add(this.className),e},n.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},n.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return o.create(e)},n.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},n.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},n.prototype.formatAt=function(e,t,r,n){e=this.isolate(e,t);null!=o.query(r,o.Scope.BLOT)&&n?e.wrap(r,n):null!=o.query(r,o.Scope.ATTRIBUTE)&&(t=o.create(this.statics.scope),e.wrap(t),t.format(r,n))},n.prototype.insertAt=function(e,t,r){t=null==r?o.create("text",t):o.create(t,r),r=this.split(e);this.parent.insertBefore(t,r)},n.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var r=null;e.children.insertBefore(this,t),null!=t&&(r=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==r||e.domNode.insertBefore(this.domNode,r),this.parent=e,this.attach()},n.prototype.isolate=function(e,t){e=this.split(e);return e.split(t),e},n.prototype.length=function(){return 1},n.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},n.prototype.optimize=function(e){null!=this.domNode[o.DATA_KEY]&&delete this.domNode[o.DATA_KEY].mutations},n.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},n.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},n.prototype.replaceWith=function(e,t){t="string"==typeof e?o.create(e,t):e;return t.replace(this),t},n.prototype.split=function(e,t){return 0===e?this:this.next},n.prototype.update=function(e,t){},n.prototype.wrap=function(e,t){t="string"==typeof e?o.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(t,this.next),t.appendChild(this),t},n.blotName="abstract",t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(12),i=r(32),a=r(33),l=r(1);function n(e){this.attributes={},this.domNode=e,this.build()}n.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},n.prototype.build=function(){var t=this,e=(this.attributes={},o.default.keys(this.domNode)),r=i.default.keys(this.domNode),n=a.default.keys(this.domNode);e.concat(r).concat(n).forEach(function(e){e=l.query(e,l.Scope.ATTRIBUTE);e instanceof o.default&&(t.attributes[e.attrName]=e)})},n.prototype.copy=function(r){var n=this;Object.keys(this.attributes).forEach(function(e){var t=n.attributes[e].value(n.domNode);r.format(e,t)})},n.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach(function(e){t.attributes[e].remove(t.domNode)}),this.attributes={}},n.prototype.values=function(){var r=this;return Object.keys(this.attributes).reduce(function(e,t){return e[t]=r.attributes[t].value(r.domNode),e},{})},t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function i(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(function(e){return 0===e.indexOf(t+"-")})}Object.defineProperty(t,"__esModule",{value:!0});a=r(12).default,o(l,a),l.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map(function(e){return e.split("-").slice(0,-1).join("-")})},l.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},l.prototype.remove=function(t){i(t,this.keyName).forEach(function(e){t.classList.remove(e)}),0===t.classList.length&&t.removeAttribute("class")},l.prototype.value=function(e){var t=(i(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""};var a,r=l;function l(){return null!==a&&a.apply(this,arguments)||this}t.default=r},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function i(e){var e=e.split("-"),t=e.slice(1).map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("");return e[0]+t}Object.defineProperty(t,"__esModule",{value:!0});a=r(12).default,o(l,a),l.keys=function(e){return(e.getAttribute("style")||"").split(";").map(function(e){return e.split(":")[0].trim()})},l.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[i(this.keyName)]=t,!0)},l.prototype.remove=function(e){e.style[i(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},l.prototype.value=function(e){var t=e.style[i(this.keyName)];return this.canAdd(e,t)?t:""};var a,r=l;function l(){return null!==a&&a.apply(this,arguments)||this}t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e,t,r){t&&i(e.prototype,t),r&&i(e,r)})(o,[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach(function(e){null==t.modules[e]&&t.addModule(e)})}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]);var n=o;function o(e,t){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this.quill=e,this.options=t,this.modules={}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.DEFAULTS={modules:{}},n.themes={default:n},t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e},i=s(r(0)),a=s(r(7));function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return e&&e.__esModule?e:{default:e}}var c="\ufeff",r=function(e){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var t=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.contentNode=document.createElement("span"),t.contentNode.setAttribute("contenteditable",!1),[].slice.call(t.domNode.childNodes).forEach(function(e){t.contentNode.appendChild(e)}),t.leftGuard=document.createTextNode(c),t.rightGuard=document.createTextNode(c),t.domNode.appendChild(t.leftGuard),t.domNode.appendChild(t.contentNode),t.domNode.appendChild(t.rightGuard),t}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"index",value:function(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"index",this).call(this,e,t)}},{key:"restore",value:function(e){var t,r=void 0,n=void 0,o=e.data.split(c).join("");return e===this.leftGuard?r=this.prev instanceof a.default?(t=this.prev.length(),this.prev.insertAt(t,o),{startNode:this.prev.domNode,startOffset:t+o.length}):(n=document.createTextNode(o),this.parent.insertBefore(i.default.create(n),this),{startNode:n,startOffset:o.length}):e===this.rightGuard&&(r=this.next instanceof a.default?(this.next.insertAt(0,o),{startNode:this.next.domNode,startOffset:o.length}):(n=document.createTextNode(o),this.parent.insertBefore(i.default.create(n),this.next),{startNode:n,startOffset:o.length})),e.data=c,r}},{key:"update",value:function(e,t){var r=this;e.forEach(function(e){"characterData"!==e.type||e.target!==r.leftGuard&&e.target!==r.rightGuard||(e=r.restore(e.target))&&(t.range=e)})}}]),r}(i.default.Embed);t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var r=(r=r(0))&&r.__esModule?r:{default:r},n={scope:r.default.Scope.BLOCK,whitelist:["right","center","justify"]},o=new r.default.Attributor.Attribute("align","align",n),i=new r.default.Attributor.Class("align","ql-align",n),r=new r.default.Attributor.Style("align","text-align",n);t.AlignAttribute=o,t.AlignClass=i,t.AlignStyle=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var n=(n=r(0))&&n.__esModule?n:{default:n},r=r(26),o=new n.default.Attributor.Class("background","ql-bg",{scope:n.default.Scope.INLINE}),r=new r.ColorAttributor("background","background-color",{scope:n.default.Scope.INLINE});t.BackgroundClass=o,t.BackgroundStyle=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var r=(r=r(0))&&r.__esModule?r:{default:r},n={scope:r.default.Scope.BLOCK,whitelist:["rtl"]},o=new r.default.Attributor.Attribute("direction","dir",n),i=new r.default.Attributor.Class("direction","ql-direction",n),r=new r.default.Attributor.Style("direction","direction",n);t.DirectionAttribute=o,t.DirectionClass=i,t.DirectionStyle=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},r=(r=r(0))&&r.__esModule?r:{default:r};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a={scope:r.default.Scope.INLINE,whitelist:["serif","monospace"]},l=new r.default.Attributor.Class("font","ql-font",a),r=new(function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"value",value:function(e){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),r}(r.default.Attributor.Style))("font","font-family",a);t.FontStyle=r,t.FontClass=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var r=(r=r(0))&&r.__esModule?r:{default:r},n=new r.default.Attributor.Class("size","ql-size",{scope:r.default.Scope.INLINE,whitelist:["small","large","huge"]}),r=new r.default.Attributor.Style("size","font-size",{scope:r.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=n,t.SizeStyle=r},function(e,t,r){"use strict";e.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var n=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e},o=l(r(0)),i=l(r(5));function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return e&&e.__esModule?e:{default:e}}r=function(e){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var o=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return o.lastRecorded=0,o.ignoreChange=!1,o.clear(),o.quill.on(i.default.events.EDITOR_CHANGE,function(e,t,r,n){e!==i.default.events.TEXT_CHANGE||o.ignoreChange||(o.options.userOnly&&n!==i.default.sources.USER?o.transform(t):o.record(t,r))}),o.quill.keyboard.addBinding({key:"Z",shortKey:!0},o.undo.bind(o)),o.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},o.redo.bind(o)),/Win/i.test(navigator.platform)&&o.quill.keyboard.addBinding({key:"Y",shortKey:!0},o.redo.bind(o)),o}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"change",value:function(e,t){var r;0!==this.stack[e].length&&(r=this.stack[e].pop(),this.stack[t].push(r),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r[e],i.default.sources.USER),this.ignoreChange=!1,t=s(r[e]),this.quill.setSelection(t))}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){var r,n;0!==e.ops.length&&(this.stack.redo=[],t=this.quill.getContents().diff(t),r=Date.now(),this.lastRecorded+this.options.delay>r&&0<this.stack.undo.length?(n=this.stack.undo.pop(),t=t.compose(n.undo),e=n.redo.compose(e)):this.lastRecorded=r,this.stack.undo.push({redo:e,undo:t}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){this.stack.undo.forEach(function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)}),this.stack.redo.forEach(function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),r}(l(r(9)).default);function s(e){var t=e.reduce(function(e,t){return e+(t.delete||0)},0),t=e.length()-t;return null!=(e=e.ops[e.ops.length-1])&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some(function(e){return null!=o.default.query(e,o.default.Scope.BLOCK)}))&&--t,t}r.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=r,t.getLastChangeIndex=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e},i=f(r(3)),a=f(r(2)),l=f(r(8)),s=f(r(23)),c=f(r(34)),u=f(r(59)),d=f(r(60)),p=f(r(28)),r=f(r(61));function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=[!1,"center","right","justify"],v=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],_=[!1,"serif","monospace"],w=["1","2","3",!1],E=["small",!1,"large","huge"],I=(g(C,c.default),n(C,[{key:"addModule",value:function(e){var t=o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(t),t}},{key:"buildButtons",value:function(e,n){e.forEach(function(r){(r.getAttribute("class")||"").split(/\s+/).forEach(function(e){var t;e.startsWith("ql-")&&(e=e.slice("ql-".length),null!=n[e])&&("direction"===e?r.innerHTML=n[e][""]+n[e].rtl:"string"==typeof n[e]?r.innerHTML=n[e]:null!=(t=r.value||"")&&n[e][t]&&(r.innerHTML=n[e][t]))})})}},{key:"buildPickers",value:function(e,r){var t=this;this.pickers=e.map(function(e){return e.classList.contains("ql-align")?(null==e.querySelector("option")&&k(e,b),new d.default(e,r.align)):e.classList.contains("ql-background")||e.classList.contains("ql-color")?(t=e.classList.contains("ql-background")?"background":"color",null==e.querySelector("option")&&k(e,v,"background"==t?"#ffffff":"#000000"),new u.default(e,r[t])):(null==e.querySelector("option")&&(e.classList.contains("ql-font")?k(e,_):e.classList.contains("ql-header")?k(e,w):e.classList.contains("ql-size")&&k(e,E)),new p.default(e));var t}),this.quill.on(l.default.events.EDITOR_CHANGE,function(){t.pickers.forEach(function(e){e.update()})})}}]),C);function C(r,e){y(this,C);var n=m(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,r,e));return r.emitter.listenDOM("click",document.body,function e(t){if(!document.body.contains(r.root))return document.body.removeEventListener("click",e);null==n.tooltip||n.tooltip.root.contains(t.target)||document.activeElement===n.tooltip.textbox||n.quill.hasFocus()||n.tooltip.hide(),null!=n.pickers&&n.pickers.forEach(function(e){e.container.contains(t.target)||e.close()})}),n}I.DEFAULTS=(0,i.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var r=this,n=this.container.querySelector("input.ql-image[type=file]");null==n&&((n=document.createElement("input")).setAttribute("type","file"),n.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),n.classList.add("ql-image"),n.addEventListener("change",function(){var e;null!=n.files&&null!=n.files[0]&&((e=new FileReader).onload=function(e){var t=r.quill.getSelection(!0);r.quill.updateContents((new a.default).retain(t.index).delete(t.length).insert({image:e.target.result}),l.default.sources.USER),r.quill.setSelection(t.index+1,l.default.sources.SILENT),n.value=""},e.readAsDataURL(n.files[0]))}),this.container.appendChild(n)),n.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});g(x,r.default),n(x,[{key:"listen",value:function(){var t=this;this.textbox.addEventListener("keydown",function(e){s.default.match(e,"enter")?(t.save(),e.preventDefault()):s.default.match(e,"escape")&&(t.cancel(),e.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"link",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var t=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,l.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,l.default.sources.USER)),this.quill.root.scrollTop=t;break;case"video":e=(r=(t=e).match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/))?(r[1]||"https")+"://www.youtube.com/embed/"+r[2]+"?showinfo=0":(r=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(r[1]||"https")+"://player.vimeo.com/video/"+r[2]+"/":t;case"formula":if(!e)break;var r=this.quill.getSelection(!0);null!=r&&(t=r.index+r.length,this.quill.insertEmbed(t,this.root.getAttribute("data-mode"),e,l.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(t+1," ",l.default.sources.USER),this.quill.setSelection(t+2,l.default.sources.USER))}this.textbox.value="",this.hide()}}]);i=x;function x(e,t){y(this,x);e=m(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,e,t));return e.textbox=e.root.querySelector('input[type="text"]'),e.listen(),e}function k(r,e,t){var n=2<arguments.length&&void 0!==t&&t;e.forEach(function(e){var t=document.createElement("option");e===n?t.setAttribute("selected","selected"):t.setAttribute("value",e),r.appendChild(t)})}t.BaseTooltip=i,t.default=I},function(e,t,r){"use strict";function n(){this.head=this.tail=null,this.length=0}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),1<e.length&&this.append.apply(this,e.slice(1))},n.prototype.contains=function(e){for(var t,r=this.iterator();t=r();)if(t===e)return!0;return!1},n.prototype.insertBefore=function(e,t){e&&(null!=(e.next=t)?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?((this.tail.next=e).prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},n.prototype.offset=function(e){for(var t=0,r=this.head;null!=r;){if(r===e)return t;t+=r.length(),r=r.next}return-1},n.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),--this.length)},n.prototype.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},n.prototype.find=function(e,t){void 0===t&&(t=!1);for(var r,n=this.iterator();r=n();){var o=r.length();if(e<o||t&&e===o&&(null==r.next||0!==r.next.length()))return[r,e];e-=o}return[null,0]},n.prototype.forEach=function(e){for(var t,r=this.iterator();t=r();)e(t)},n.prototype.forEachAt=function(e,t,r){if(!(t<=0))for(var n,o=this.find(e),i=o[0],a=e-o[1],l=this.iterator(i);(n=l())&&a<e+t;){var s=n.length();a<e?r(n,e-a,Math.min(t,a+s-e)):r(n,0,Math.min(s,e+t-a)),a+=s}},n.prototype.map=function(r){return this.reduce(function(e,t){return e.push(r(t)),e},[])},n.prototype.reduce=function(e,t){for(var r,n=this.iterator();r=n();)t=e(t,r);return t},t.default=n},function(e,t,r){"use strict";var n,s,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=(Object.defineProperty(t,"__esModule",{value:!0}),r(17)),u=r(1),i={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},r=(s=c.default,o(a,s),a.prototype.detach=function(){s.prototype.detach.call(this),this.observer.disconnect()},a.prototype.deleteAt=function(e,t){this.update(),0===e&&t===this.length()?this.children.forEach(function(e){e.remove()}):s.prototype.deleteAt.call(this,e,t)},a.prototype.formatAt=function(e,t,r,n){this.update(),s.prototype.formatAt.call(this,e,t,r,n)},a.prototype.insertAt=function(e,t,r){this.update(),s.prototype.insertAt.call(this,e,t,r)},a.prototype.optimize=function(e,t){var r=this;void 0===e&&(e=[]),void 0===t&&(t={}),s.prototype.optimize.call(this,t);for(var n=[].slice.call(this.observer.takeRecords());0<n.length;)e.push(n.pop());for(var o=function(e,t){void 0===t&&(t=!0),null!=e&&e!==r&&null!=e.domNode.parentNode&&(null==e.domNode[u.DATA_KEY].mutations&&(e.domNode[u.DATA_KEY].mutations=[]),t&&o(e.parent))},i=function(e){null!=e.domNode[u.DATA_KEY]&&null!=e.domNode[u.DATA_KEY].mutations&&(e instanceof c.default&&e.children.forEach(i),e.optimize(t))},a=e,l=0;0<a.length;l+=1){if(100<=l)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(function(e){var t=u.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(o(u.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,function(e){e=u.find(e,!1);o(e,!1),e instanceof c.default&&e.children.forEach(function(e){o(e,!1)})})):"attributes"===e.type&&o(t.prev)),o(t))}),this.children.forEach(i),n=(a=[].slice.call(this.observer.takeRecords())).slice();0<n.length;)e.push(n.pop())}},a.prototype.update=function(e,t){var r=this;void 0===t&&(t={}),(e=e||this.observer.takeRecords()).map(function(e){var t=u.find(e.target,!0);return null==t?null:null==t.domNode[u.DATA_KEY].mutations?(t.domNode[u.DATA_KEY].mutations=[e],t):(t.domNode[u.DATA_KEY].mutations.push(e),null)}).forEach(function(e){null!=e&&e!==r&&null!=e.domNode[u.DATA_KEY]&&e.update(e.domNode[u.DATA_KEY].mutations||[],t)}),null!=this.domNode[u.DATA_KEY].mutations&&s.prototype.update.call(this,this.domNode[u.DATA_KEY].mutations,t),this.optimize(e,t)},a.blotName="scroll",a.defaultChild="block",a.scope=u.Scope.BLOCK_BLOT,a.tagName="DIV",a);function a(e){var t=s.call(this,e)||this;return(t.scroll=t).observer=new MutationObserver(function(e){t.update(e)}),t.observer.observe(t.domNode,i),t.attach(),t}t.default=r},function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),r(18)),l=r(1),r=(o=a.default,i(s,o),s.formats=function(e){if(e.tagName!==s.tagName)return o.formats.call(this,e)},s.prototype.format=function(e,t){var r=this;e!==this.statics.blotName||t?o.prototype.format.call(this,e,t):(this.children.forEach(function(e){e instanceof a.default||(e=e.wrap(s.blotName,!0)),r.attributes.copy(e)}),this.unwrap())},s.prototype.formatAt=function(e,t,r,n){null!=this.formats()[r]||l.query(r,l.Scope.ATTRIBUTE)?this.isolate(e,t).format(r,n):o.prototype.formatAt.call(this,e,t,r,n)},s.prototype.optimize=function(e){o.prototype.optimize.call(this,e);e=this.formats();if(0===Object.keys(e).length)return this.unwrap();var t=this.next;t instanceof s&&t.prev===this&&function(e,t){if(Object.keys(e).length===Object.keys(t).length){for(var r in e)if(e[r]!==t[r])return;return 1}}(e,t.formats())&&(t.moveChildren(this),t.remove())},s.blotName="inline",s.scope=l.Scope.INLINE_BLOT,s.tagName="SPAN",s);function s(){return null!==o&&o.apply(this,arguments)||this}t.default=r},function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),r(18)),l=r(1),r=(o=a.default,i(s,o),s.formats=function(e){var t=l.query(s.blotName).tagName;if(e.tagName!==t)return o.formats.call(this,e)},s.prototype.format=function(e,t){null!=l.query(e,l.Scope.BLOCK)&&(e!==this.statics.blotName||t?o.prototype.format.call(this,e,t):this.replaceWith(s.blotName))},s.prototype.formatAt=function(e,t,r,n){null!=l.query(r,l.Scope.BLOCK)?this.format(r,n):o.prototype.formatAt.call(this,e,t,r,n)},s.prototype.insertAt=function(e,t,r){null==r||null!=l.query(t,l.Scope.INLINE)?o.prototype.insertAt.call(this,e,t,r):(e=this.split(e),t=l.create(t,r),e.parent.insertBefore(t,e))},s.prototype.update=function(e,t){navigator.userAgent.match(/Trident/)?this.build():o.prototype.update.call(this,e,t)},s.blotName="block",s.scope=l.Scope.BLOCK_BLOT,s.tagName="P",s);function s(){return null!==o&&o.apply(this,arguments)||this}t.default=r},function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),r=(Object.defineProperty(t,"__esModule",{value:!0}),o=r(19).default,i(a,o),a.formats=function(e){},a.prototype.format=function(e,t){o.prototype.formatAt.call(this,0,this.length(),e,t)},a.prototype.formatAt=function(e,t,r,n){0===e&&t===this.length()?this.format(r,n):o.prototype.formatAt.call(this,e,t,r,n)},a.prototype.formats=function(){return this.statics.formats(this.domNode)},a);function a(){return null!==o&&o.apply(this,arguments)||this}t.default=r},function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),r(19)),l=r(1),r=(o=a.default,i(s,o),s.create=function(e){return document.createTextNode(e)},s.value=function(e){e=e.data;return e=e.normalize?e.normalize():e},s.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},s.prototype.index=function(e,t){return this.domNode===e?t:-1},s.prototype.insertAt=function(e,t,r){null==r?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):o.prototype.insertAt.call(this,e,t,r)},s.prototype.length=function(){return this.text.length},s.prototype.optimize=function(e){o.prototype.optimize.call(this,e),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof s&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},s.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},s.prototype.split=function(e,t){if(!(t=void 0===t?!1:t)){if(0===e)return this;if(e===this.length())return this.next}t=l.create(this.domNode.splitText(e));return this.parent.insertBefore(t,this.next),this.text=this.statics.value(this.domNode),t},s.prototype.update=function(e,t){var r=this;e.some(function(e){return"characterData"===e.type&&e.target===r.domNode})&&(this.text=this.statics.value(this.domNode))},s.prototype.value=function(){return this.text},s.blotName="text",s.scope=l.Scope.INLINE_BLOT,s);function s(e){e=o.call(this,e)||this;return e.text=e.statics.value(e.domNode),e}t.default=r},function(e,t,r){"use strict";var n,o=document.createElement("div");o.classList.toggle("test-class",!1),o.classList.contains("test-class")&&(n=DOMTokenList.prototype.toggle,DOMTokenList.prototype.toggle=function(e,t){return 1<arguments.length&&!this.contains(e)==!t?t:n.call(this,e)}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(t=t||0,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString(),r=(("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length,r.indexOf(e,t));return-1!==r&&r===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,o=arguments[1],i=0;i<n;i++)if(t=r[i],e.call(o,t,i,r))return t}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,t){var L=-1;function T(e,t,r){if(e==t)return e?[[0,e]]:[];(r<0||e.length<r)&&(r=null);var n=B(e,t),o=e.substring(0,n),n=R(e=e.substring(n),t=t.substring(n)),i=e.substring(e.length-n),e=function(e,t){if(!e)return[[1,t]];if(!t)return[[L,e]];var r=e.length>t.length?e:t,n=e.length>t.length?t:e,o=r.indexOf(n);if(-1!=o)return r=[[1,r.substring(0,o)],[0,n],[1,r.substring(o+n.length)]],e.length>t.length&&(r[0][0]=r[2][0]=L),r;if(1==n.length)return[[L,e],[1,t]];var i,a,o=function(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||2*n.length<r.length)return null;function o(e,t,r){for(var n,o,i,a,l=e.substring(r,r+Math.floor(e.length/4)),s=-1,c="";-1!=(s=t.indexOf(l,s+1));){var u=B(e.substring(r),t.substring(s)),d=R(e.substring(0,r),t.substring(0,s));c.length<d+u&&(c=t.substring(s-d,s)+t.substring(s,s+u),n=e.substring(0,r-d),o=e.substring(r+u),i=t.substring(0,s-d),a=t.substring(s+u))}return 2*c.length>=e.length?[n,o,i,a,c]:null}var i,a,l,s,c=o(r,n,Math.ceil(r.length/4)),n=o(r,n,Math.ceil(r.length/2));return c||n?(r=!n||c&&c[4].length>n[4].length?c:n,e.length>t.length?(i=r[0],a=r[1],l=r[2],s=r[3]):(l=r[0],s=r[1],i=r[2],a=r[3]),[i,a,l,s,r[4]]):null}(e,t);if(o)return r=o[0],n=o[1],a=o[2],i=o[3],o=o[4],r=T(r,a),a=T(n,i),r.concat([[0,o]],a);for(var l=e,s=t,c=l.length,u=s.length,d=Math.ceil((c+u)/2),p=d,h=2*d,f=new Array(h),y=new Array(h),m=0;m<h;m++)f[m]=-1,y[m]=-1;f[p+1]=0;for(var g=c-u,b=g%2!=(y[p+1]=0),v=0,_=0,w=0,E=0,I=0;I<d;I++){for(var C=-I+v;C<=I-_;C+=2){for(var x=p+C,k=(P=C==-I||C!=I&&f[x-1]<f[x+1]?f[x+1]:f[x-1]+1)-C;P<c&&k<u&&l.charAt(P)==s.charAt(k);)P++,k++;if(c<(f[x]=P))_+=2;else if(u<k)v+=2;else if(b&&0<=(A=p+g-C)&&A<h&&-1!=y[A]&&P>=(O=c-y[A]))return j(l,s,P,k)}for(var S=-I+w;S<=I-E;S+=2){for(var O,P,A=p+S,D=(O=S==-I||S!=I&&y[A-1]<y[A+1]?y[A+1]:y[A-1]+1)-S;O<c&&D<u&&l.charAt(c-O-1)==s.charAt(u-D-1);)O++,D++;if(c<(y[A]=O))E+=2;else if(u<D)w+=2;else if(!b)if(0<=(x=p+g-S)&&x<h&&-1!=f[x]&&(k=p+(P=f[x])-x,P>=(O=c-O)))return j(l,s,P,k)}}return[[L,l],[1,s]]}(e=e.substring(0,e.length-n),t=t.substring(0,t.length-n)),a=(o&&e.unshift([0,o]),i&&e.push([0,i]),function e(t){t.push([0,""]);for(var r,n=0,o=0,i=0,a="",l="";n<t.length;)switch(t[n][0]){case 1:i++,l+=t[n][1],n++;break;case L:o++,a+=t[n][1],n++;break;case 0:1<o+i?(0!==o&&0!==i&&(0!==(r=B(l,a))&&(0<n-o-i&&0==t[n-o-i-1][0]?t[n-o-i-1][1]+=l.substring(0,r):(t.splice(0,0,[0,l.substring(0,r)]),n++),l=l.substring(r),a=a.substring(r)),0!==(r=R(l,a))&&(t[n][1]=l.substring(l.length-r)+t[n][1],l=l.substring(0,l.length-r),a=a.substring(0,a.length-r))),0===o?t.splice(n-i,o+i,[1,l]):0===i?t.splice(n-o,o+i,[L,a]):t.splice(n-o-i,o+i,[L,a],[1,l]),n=n-o-i+(o?1:0)+(i?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,o=i=0,l=a=""}""===t[t.length-1][1]&&t.pop();var s=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),s=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),s=!0)),n++;s&&e(t)}(e),null!=r&&(t=function(e,t){if(0===t)return[0,e];for(var r=0,n=0;n<e.length;n++){var o=e[n];if(o[0]===L||0===o[0]){var i,a,l=r+o[1].length;if(t===l)return[n+1,e];if(t<l)return e=e.slice(),a=[o[0],o[1].slice(0,i=t-r)],o=[o[0],o[1].slice(i)],e.splice(n,1,a,o),[n+1,e];r=l}}throw new Error("cursor_pos is out of bounds!")}(n=e,r),o=t[1],t=t[0],i=o[t],r=o[t+1],e=null==i||0!==i[0]?n:null!=r&&i[1]+r[1]===r[1]+i[1]?(o.splice(t,2,r,i),p(o,t,2)):null!=r&&0===r[1].indexOf(i[1])?(o.splice(t,2,[r[0],i[1]],[0,i[1]]),0<(i=r[1].slice(i[1].length)).length&&o.splice(t+2,0,[r[0],i]),p(o,t,3)):n),e);function l(e){return 56320<=e.charCodeAt(0)&&e.charCodeAt(0)<=57343}for(var s,c=!1,u=2;u<a.length;u+=1)0===a[u-2][0]&&55296<=(s=a[u-2][1]).charCodeAt(s.length-1)&&s.charCodeAt(s.length-1)<=56319&&a[u-1][0]===L&&l(a[u-1][1])&&1===a[u][0]&&l(a[u][1])&&(c=!0,a[u-1][1]=a[u-2][1].slice(-1)+a[u-1][1],a[u][1]=a[u-2][1].slice(-1)+a[u][1],a[u-2][1]=a[u-2][1].slice(0,-1));if(!c)return a;for(var d=[],u=0;u<a.length;u+=1)0<a[u][1].length&&d.push(a[u]);return d}function j(e,t,r,n){var o=e.substring(0,r),i=t.substring(0,n),e=e.substring(r),r=t.substring(n),t=T(o,i),n=T(e,r);return t.concat(n)}function B(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),o=n,i=0;r<o;)e.substring(i,o)==t.substring(i,o)?i=r=o:n=o,o=Math.floor((n-r)/2+r);return o}function R(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,n=Math.min(e.length,t.length),o=n,i=0;r<o;)e.substring(e.length-o,e.length-i)==t.substring(t.length-o,t.length-i)?i=r=o:n=o,o=Math.floor((n-r)/2+r);return o}var r=T;function p(e,t,r){for(var n,o,i=t+r-1;0<=i&&t-1<=i;i--)i+1<e.length&&(n=e[i],o=e[i+1],n[0]===o[1]&&e.splice(i,2,[n[0],n[1]+o[1]]));return e}r.INSERT=1,r.DELETE=L,r.EQUAL=0,e.exports=r},function(e,t){function r(e){var t,r=[];for(t in e)r.push(t);return r}(e.exports="function"==typeof Object.keys?Object.keys:r).shim=r},function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?n:o).supported=n,t.unsupported=o},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,h="~";function s(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function r(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(h=!1)),r.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(h?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},r.prototype.listeners=function(e,t){var e=h?h+e:e,r=this._events[e];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,i=new Array(o);n<o;n++)i[n]=r[n].fn;return i},r.prototype.emit=function(e,t,r,n,o,i){var a=h?h+e:e;if(!this._events[a])return!1;var l,s=this._events[a],c=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),c){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,n),!0;case 5:return s.fn.call(s.context,t,r,n,o),!0;case 6:return s.fn.call(s.context,t,r,n,o,i),!0}for(p=1,l=new Array(c-1);p<c;p++)l[p-1]=arguments[p];s.fn.apply(s.context,l)}else for(var u,d=s.length,p=0;p<d;p++)switch(s[p].once&&this.removeListener(e,s[p].fn,void 0,!0),c){case 1:s[p].fn.call(s[p].context);break;case 2:s[p].fn.call(s[p].context,t);break;case 3:s[p].fn.call(s[p].context,t,r);break;case 4:s[p].fn.call(s[p].context,t,r,n);break;default:if(!l)for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];s[p].fn.apply(s[p].context,l)}return!0},r.prototype.on=function(e,t,r){t=new o(t,r||this),r=h?h+e:e;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],t]:this._events[r].push(t):(this._events[r]=t,this._eventsCount++),this},r.prototype.once=function(e,t,r){t=new o(t,r||this,!0),r=h?h+e:e;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],t]:this._events[r].push(t):(this._events[r]=t,this._eventsCount++),this},r.prototype.removeListener=function(e,t,r,n){e=h?h+e:e;if(!this._events[e])return this;if(!t)return 0==--this._eventsCount?this._events=new s:delete this._events[e],this;var o=this._events[e];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||(0==--this._eventsCount?this._events=new s:delete this._events[e]);else{for(var i=0,a=[],l=o.length;i<l;i++)(o[i].fn!==t||n&&!o[i].once||r&&o[i].context!==r)&&a.push(o[i]);a.length?this._events[e]=1===a.length?a[0]:a:0==--this._eventsCount?this._events=new s:delete this._events[e]}return this},r.prototype.removeAllListeners=function(e){return e?(e=h?h+e:e,this._events[e]&&(0==--this._eventsCount?this._events=new s:delete this._events[e])):(this._events=new s,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=h,r.EventEmitter=r,void 0!==e&&(e.exports=r)},function(B,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.matchText=e.matchSpacing=e.matchNewline=e.matchBlot=e.matchAttributor=e.default=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var r=e,n=t,o=[],i=!0,e=!1,t=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done)&&(o.push(a.value),!n||o.length!==n);i=!0);}catch(r){e=!0,t=r}finally{try{!i&&l.return&&l.return()}finally{if(e)throw t}}return o}throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),e},i=b(t(3)),l=b(t(2)),s=b(t(0)),c=b(t(5)),r=b(t(10)),u=b(t(9)),d=t(36),p=t(37),h=b(t(13)),f=t(26),y=t(38),m=t(39),t=t(40);function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=(0,r.default)("quill:clipboard"),w="__ql-matcher",E=[[Node.TEXT_NODE,j],[Node.TEXT_NODE,L],["br",function(e,t){return S(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,T],[Node.ELEMENT_NODE,A],[Node.ELEMENT_NODE,function(e,t){var r={},n=e.style||{};return n.fontStyle&&"italic"===k(e).fontStyle&&(r.italic=!0),n.fontWeight&&(k(e).fontWeight.startsWith("bold")||700<=parseInt(k(e).fontWeight))&&(r.bold=!0),0<Object.keys(r).length&&(t=x(t,r)),t=0<parseFloat(n.textIndent||0)?(new l.default).insert("\t").concat(t):t}],["li",function(e,t){var r=s.default.query(e);if(null==r||"list-item"!==r.blotName||!S(t,"\n"))return t;for(var n=-1,o=e.parentNode;!o.classList.contains("ql-clipboard");)"list"===(s.default.query(o)||{}).blotName&&(n+=1),o=o.parentNode;return n<=0?t:t.compose((new l.default).retain(t.length()-1).retain(1,{indent:n}))}],["b",P.bind(P,"bold")],["i",P.bind(P,"italic")],["style",function(){return new l.default}]],I=[d.AlignAttribute,y.DirectionAttribute].reduce(function(e,t){return e[t.keyName]=t,e},{}),C=[d.AlignStyle,p.BackgroundStyle,f.ColorStyle,y.DirectionStyle,m.FontStyle,t.SizeStyle].reduce(function(e,t){return e[t.keyName]=t,e},{}),r=function(e){function t(e,r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");var n=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.root.addEventListener("paste",n.onPaste.bind(n)),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],E.concat(n.options.matchers).forEach(function(e){var e=a(e,2),t=e[0],e=e[1];!r.matchVisual&&e===T||n.addMatcher(t,e)}),n}var r=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e),n(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"==typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();e=this.quill.getFormat(this.quill.selection.savedRange.index);if(e[h.default.blotName])return t=this.container.innerText,this.container.innerHTML="",(new l.default).insert(t,v({},h.default.blotName,e[h.default.blotName]));var t=this.prepareMatching(),e=a(t,2),t=e[0],e=e[1],t=function n(o,i,a){return o.nodeType===o.TEXT_NODE?a.reduce(function(e,t){return t(o,e)},new l.default):o.nodeType===o.ELEMENT_NODE?[].reduce.call(o.childNodes||[],function(e,r){var t=n(r,i,a);return r.nodeType===o.ELEMENT_NODE&&(t=i.reduce(function(e,t){return t(r,e)},t),t=(r[w]||[]).reduce(function(e,t){return t(r,e)},t)),e.concat(t)},new l.default):new l.default}(this.container,t,e);return S(t,"\n")&&null==t.ops[t.ops.length-1].attributes&&(t=t.compose((new l.default).retain(t.length()-1).delete(1))),_.log("convert",this.container.innerHTML,t),this.container.innerHTML="",t}},{key:"dangerouslyPasteHTML",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;"string"==typeof e?(this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT)):(t=this.convert(t),this.quill.updateContents((new l.default).retain(e).concat(t),r),this.quill.setSelection(e+t.length(),c.default.sources.SILENT))}},{key:"onPaste",value:function(e){var t,r,n,o=this;!e.defaultPrevented&&this.quill.isEnabled()&&(t=this.quill.getSelection(),r=(new l.default).retain(t.index),n=this.quill.scrollingContainer.scrollTop,this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout(function(){r=r.concat(o.convert()).delete(t.length),o.quill.updateContents(r,c.default.sources.USER),o.quill.setSelection(r.length()-t.length,c.default.sources.SILENT),o.quill.scrollingContainer.scrollTop=n,o.quill.focus()},1))}},{key:"prepareMatching",value:function(){var n=this,o=[],i=[];return this.matchers.forEach(function(e){var e=a(e,2),t=e[0],r=e[1];switch(t){case Node.TEXT_NODE:i.push(r);break;case Node.ELEMENT_NODE:o.push(r);break;default:[].forEach.call(n.container.querySelectorAll(t),function(e){e[w]=e[w]||[],e[w].push(r)})}}),[o,i]}}]),t}(u.default);function x(e,r,n){return"object"===(void 0===r?"undefined":o(r))?Object.keys(r).reduce(function(e,t){return x(e,t,r[t])},e):e.reduce(function(e,t){return t.attributes&&t.attributes[r]?e.push(t):e.insert(t.insert,(0,i.default)({},v({},r,n),t.attributes))},new l.default)}function k(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function S(e,t){for(var r="",n=e.ops.length-1;0<=n&&r.length<t.length;--n){var o=e.ops[n];if("string"!=typeof o.insert)break;r=o.insert+r}return r.slice(-1*t.length)===t}function O(e){if(0!==e.childNodes.length)return e=k(e),-1<["block","list-item"].indexOf(e.display)}function P(e,t,r){return x(r,e,!0)}function A(r,e){var t=s.default.Attributor.Attribute.keys(r),n=s.default.Attributor.Class.keys(r),o=s.default.Attributor.Style.keys(r),i={};return t.concat(n).concat(o).forEach(function(e){var t=s.default.query(e,s.default.Scope.ATTRIBUTE);null!=t&&(i[t.attrName]=t.value(r),i[t.attrName])||(null==(t=I[e])||t.attrName!==e&&t.keyName!==e||(i[t.attrName]=t.value(r)||void 0),null==(t=C[e])||t.attrName!==e&&t.keyName!==e||(t=C[e],i[t.attrName]=t.value(r)||void 0))}),e=0<Object.keys(i).length?x(e,i):e}function D(e,t){var r,n,o=s.default.query(e);return null==o||(o.prototype instanceof s.default.Embed?(r={},null!=(n=o.value(e))&&(r[o.blotName]=n,t=(new l.default).insert(r,o.formats(e)))):"function"==typeof o.formats&&(t=x(t,o.blotName,o.formats(e)))),t}function L(e,t){return S(t,"\n")||(O(e)||0<t.length()&&e.nextSibling&&O(e.nextSibling))&&t.insert("\n"),t}function T(e,t){var r;return O(e)&&null!=e.nextElementSibling&&!S(t,"\n\n")&&(r=e.offsetHeight+parseFloat(k(e).marginTop)+parseFloat(k(e).marginBottom),e.nextElementSibling.offsetTop>e.offsetTop+1.5*r&&t.insert("\n")),t}function j(e,t){var r,n=e.data;return"O:P"===e.parentNode.tagName?t.insert(n.trim()):0===n.trim().length&&e.parentNode.classList.contains("ql-clipboard")?t:(k(e.parentNode).whiteSpace.startsWith("pre")||(r=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t},n=(n=n.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,r.bind(r,!0)),(null==e.previousSibling&&O(e.parentNode)||null!=e.previousSibling&&O(e.previousSibling))&&(n=n.replace(/^\s+/,r.bind(r,!1))),(null==e.nextSibling&&O(e.parentNode)||null!=e.nextSibling&&O(e.nextSibling))&&(n=n.replace(/\s+$/,r.bind(r,!1)))),t.insert(n))}r.DEFAULTS={matchers:[],matchVisual:!0},e.default=r,e.matchAttributor=A,e.matchBlot=D,e.matchNewline=L,e.matchSpacing=T,e.matchText=j},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"optimize",value:function(e){o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(r.__proto__||Object.getPrototypeOf(r),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),r}(((r=r(6))&&r.__esModule?r:{default:r}).default);r.blotName="bold",r.tagName=["STRONG","B"],t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var r=e,n=t,o=[],i=!0,e=!1,t=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done)&&(o.push(a.value),!n||o.length!==n);i=!0);}catch(r){e=!0,t=r}finally{try{!i&&l.return&&l.return()}finally{if(e)throw t}}return o}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},c=a(r(2)),u=a(r(0)),d=a(r(5)),n=a(r(10)),r=a(r(9));function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var p=(0,n.default)("quill:toolbar"),n=function(e){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var r=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return Array.isArray(r.options.container)?(f(t=document.createElement("div"),r.options.container),e.container.parentNode.insertBefore(t,e.container),r.container=t):"string"==typeof r.options.container?r.container=document.querySelector(r.options.container):r.container=r.options.container,r.container instanceof HTMLElement?(r.container.classList.add("ql-toolbar"),r.controls=[],r.handlers={},Object.keys(r.options.handlers).forEach(function(e){r.addHandler(e,r.options.handlers[e])}),[].forEach.call(r.container.querySelectorAll("button, select"),function(e){r.attach(e)}),r.quill.on(d.default.events.EDITOR_CHANGE,function(e,t){e===d.default.events.SELECTION_CHANGE&&r.update(t)}),r.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){var e=r.quill.selection.getRange(),e=s(e,1)[0];r.update(e)}),r):(e=p.error("Container required for toolbar",r.options),l(r,e))}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o(n,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(i){var a=this,l=[].find.call(i.classList,function(e){return 0===e.indexOf("ql-")});if(l){if(l=l.slice("ql-".length),"BUTTON"===i.tagName&&i.setAttribute("type","button"),null==this.handlers[l]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[l])return void p.warn("ignoring attaching to disabled format",l,i);if(null==u.default.query(l))return void p.warn("ignoring attaching to nonexistent format",l,i)}var e="SELECT"===i.tagName?"change":"click";i.addEventListener(e,function(e){var t=void 0;if("SELECT"===i.tagName){if(i.selectedIndex<0)return;var r=i.options[i.selectedIndex],t=!r.hasAttribute("selected")&&(r.value||!1)}else t=!i.classList.contains("ql-active")&&(i.value||!i.hasAttribute("value")),e.preventDefault();a.quill.focus();var n,o,r=a.quill.selection.getRange(),e=s(r,1)[0];if(null!=a.handlers[l])a.handlers[l].call(a,t);else if(u.default.query(l).prototype instanceof u.default.Embed){if(!(t=prompt("Enter "+l)))return;a.quill.updateContents((new c.default).retain(e.index).delete(e.length).insert((r=t,(o=l)in(n={})?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n)),d.default.sources.USER)}else a.quill.format(l,t,d.default.sources.USER);a.update(e)}),this.controls.push([l,i])}}},{key:"update",value:function(o){var i=null==o?{}:this.quill.getFormat(o);this.controls.forEach(function(e){var t,r,e=s(e,2),n=e[0],e=e[1];"SELECT"===e.tagName?(t=void 0,null==o?t=null:null==i[n]?t=e.querySelector("option[selected]"):Array.isArray(i[n])||("string"==typeof(r=i[n])&&(r=r.replace(/\"/g,'\\"')),t=e.querySelector('option[value="'+r+'"]')),null==t?(e.value="",e.selectedIndex=-1):t.selected=!0):null==o?e.classList.remove("ql-active"):e.hasAttribute("value")?(r=i[n]===e.getAttribute("value")||null!=i[n]&&i[n].toString()===e.getAttribute("value")||null==i[n]&&!e.getAttribute("value"),e.classList.toggle("ql-active",r)):e.classList.toggle("ql-active",null!=i[n])})}}]),n}(r.default);function h(e,t,r){var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-"+t),null!=r&&(n.value=r),e.appendChild(n)}function f(t,e){(e=Array.isArray(e[0])?e:[e]).forEach(function(e){var a=document.createElement("span");a.classList.add("ql-formats"),e.forEach(function(e){var t,r,n,o,i;"string"==typeof e?h(a,e):(t=e[e=Object.keys(e)[0]],Array.isArray(t)?(r=a,n=e,o=t,(i=document.createElement("select")).classList.add("ql-"+n),o.forEach(function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),i.appendChild(t)}),r.appendChild(i)):h(a,e,t))}),t.appendChild(a)})}n.DEFAULTS={},n.DEFAULTS={container:null,handlers:{clean:function(){var e,t=this,r=this.quill.getSelection();null!=r&&(0==r.length?(e=this.quill.getFormat(),Object.keys(e).forEach(function(e){null!=u.default.query(e,u.default.Scope.INLINE)&&t.quill.format(e,!1)})):this.quill.removeFormat(r,d.default.sources.USER))},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",d.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,d.default.sources.USER),this.quill.format("direction",e,d.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),t=this.quill.getFormat(t),r=parseInt(t.indent||0);"+1"!==e&&"-1"!==e||(e="+1"===e?1:-1,"rtl"===t.direction&&(e*=-1),this.quill.format("indent",r+e,d.default.sources.USER))},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,d.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),t=this.quill.getFormat(t);"check"===e?"checked"===t.list||"unchecked"===t.list?this.quill.format("list",!1,d.default.sources.USER):this.quill.format("list","unchecked",d.default.sources.USER):this.quill.format("list",e,d.default.sources.USER)}}},t.default=n,t.addControls=f},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},r=function(e){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return e.label.innerHTML=t,e.container.classList.add("ql-color-picker"),[].slice.call(e.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(e){e.classList.add("ql-primary")}),e}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"buildItem",value:function(e){var t=o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"buildItem",this).call(this,e);return t.style.backgroundColor=e.getAttribute("value")||"",t}},{key:"selectItem",value:function(e,t){o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"selectItem",this).call(this,e,t);t=this.label.querySelector(".ql-color-label"),e=e&&e.getAttribute("data-value")||"";t&&("line"===t.tagName?t.style.stroke=e:t.style.fill=e)}}]),r}(((r=r(28))&&r.__esModule?r:{default:r}).default);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e},r=function(e){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return e.container.classList.add("ql-icon-picker"),[].forEach.call(e.container.querySelectorAll(".ql-picker-item"),function(e){e.innerHTML=t[e.getAttribute("data-value")||""]}),e.defaultItem=e.container.querySelector(".ql-selected"),e.selectItem(e.defaultItem),e}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"selectItem",value:function(e,t){o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"selectItem",this).call(this,e,t),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),r}(((r=r(28))&&r.__esModule?r:{default:r}).default);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=r},function(e,t,r){"use strict";function n(e,t){var r=this;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){r.root.style.marginTop=-1*r.quill.root.scrollTop+"px"}),this.hide()}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t,r){t&&o(e.prototype,t),r&&o(e,r)}(n,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop,n=(this.root.style.left=t+"px",this.root.style.top=r+"px",this.root.classList.remove("ql-flip"),this.boundsContainer.getBoundingClientRect()),o=this.root.getBoundingClientRect(),i=0;return o.right>n.right&&(i=n.right-o.right,this.root.style.left=t+i+"px"),o.left<n.left&&(i=n.left-o.left,this.root.style.left=t+i+"px"),o.bottom>n.bottom&&(t=o.bottom-o.top,n=e.bottom-e.top+t,this.root.style.top=r-n+"px",this.root.classList.add("ql-flip")),i}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function i(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:i(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e},o=h(r(3)),a=h(r(8)),l=r(43),s=h(l),c=h(r(27)),u=r(15),d=h(r(41));function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],r=(m(b,s.default),n(b,[{key:"extendToolbar",value:function(r){r.container.classList.add("ql-snow"),this.buildButtons([].slice.call(r.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(r.container.querySelectorAll("select")),d.default),this.tooltip=new v(this.quill,this.options.bounds),r.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(e,t){r.handlers.link.call(r,!t.format.link)})}}]),b);function b(e,t){f(this,b),null!=t.modules.toolbar&&null==t.modules.toolbar.container&&(t.modules.toolbar.container=g);e=y(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,e,t));return e.quill.container.classList.add("ql-snow"),e}r.DEFAULTS=(0,o.default)(!0,{},s.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?null!=(e=this.quill.getSelection())&&0!=e.length&&(e=this.quill.getText(e),/^\S+@\S+\.\S+$/.test(e)&&0!==e.indexOf("mailto:")&&(e="mailto:"+e),this.quill.theme.tooltip.edit("link",e)):this.quill.format("link",!1)}}}}});m(_,l.BaseTooltip),n(_,[{key:"listen",value:function(){var o=this;i(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(e){o.root.classList.contains("ql-editing")?o.save():o.edit("link",o.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(e){var t;null!=o.linkRange&&(t=o.linkRange,o.restoreFocus(),o.quill.formatText(t,"link",!1,a.default.sources.USER),delete o.linkRange),e.preventDefault(),o.hide()}),this.quill.on(a.default.events.SELECTION_CHANGE,function(e,t,r){if(null!=e){if(0===e.length&&r===a.default.sources.USER){var r=function(e){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var t=e,r=[],n=!0,e=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),2!==r.length);n=!0);}catch(t){e=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(e)throw o}}return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")}(o.quill.scroll.descendant(c.default,e.index)),n=r[0],r=r[1];if(null!=n)return o.linkRange=new u.Range(e.index-r,n.length()),e=c.default.formats(n.domNode),o.preview.textContent=e,o.preview.setAttribute("href",e),o.show(),void o.position(o.quill.getBounds(o.linkRange))}else delete o.linkRange;o.hide()}})}},{key:"show",value:function(){i(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]);var v=_;function _(e,t){f(this,_);e=y(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,e,t));return e.preview=e.root.querySelector("a.ql-preview"),e}v.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=j(r(29)),o=r(36),i=r(38),a=r(64),l=j(r(65)),s=j(r(66)),c=r(67),u=j(c),d=r(37),p=r(26),h=r(39),f=r(40),y=j(r(56)),m=j(r(68)),g=j(r(27)),b=j(r(69)),v=j(r(70)),_=j(r(71)),w=j(r(72)),E=j(r(73)),I=r(13),C=j(I),x=j(r(74)),k=j(r(75)),S=j(r(57)),O=j(r(41)),P=j(r(28)),A=j(r(59)),D=j(r(60)),L=j(r(61)),T=j(r(108)),r=j(r(62));function j(e){return e&&e.__esModule?e:{default:e}}n.default.register({"attributors/attribute/direction":i.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":d.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":i.DirectionClass,"attributors/class/font":h.FontClass,"attributors/class/size":f.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":d.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":i.DirectionStyle,"attributors/style/font":h.FontStyle,"attributors/style/size":f.SizeStyle},!0),n.default.register({"formats/align":o.AlignClass,"formats/direction":i.DirectionClass,"formats/indent":a.IndentClass,"formats/background":d.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":h.FontClass,"formats/size":f.SizeClass,"formats/blockquote":l.default,"formats/code-block":C.default,"formats/header":s.default,"formats/list":u.default,"formats/bold":y.default,"formats/code":I.Code,"formats/italic":m.default,"formats/link":g.default,"formats/script":b.default,"formats/strike":v.default,"formats/underline":_.default,"formats/image":w.default,"formats/video":E.default,"formats/list/item":c.ListItem,"modules/formula":x.default,"modules/syntax":k.default,"modules/toolbar":S.default,"themes/bubble":T.default,"themes/snow":r.default,"ui/icons":O.default,"ui/picker":P.default,"ui/icon-picker":D.default,"ui/color-picker":A.default,"ui/tooltip":L.default},!0),t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var i=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},r=(r=r(0))&&r.__esModule?r:{default:r};function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r=new(function(e){function n(){var e=this,t=n;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),i(n,[{key:"add",value:function(e,t){var r;return"+1"!==t&&"-1"!==t||(r=this.value(e)||0,t="+1"===t?r+1:r-1),0===t?(this.remove(e),!0):o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"add",this).call(this,e,t)}},{key:"canAdd",value:function(e,t){return o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"canAdd",this).call(this,e,t)||o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"canAdd",this).call(this,e,parseInt(t))}},{key:"value",value:function(e){return parseInt(o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"value",this).call(this,e))||void 0}}]),n}(r.default.Attributor.Class))("indent","ql-indent",{scope:r.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r}(((r=r(4))&&r.__esModule?r:{default:r}).default);r.blotName="blockquote",r.tagName="blockquote",t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),r}(((r=r(4))&&r.__esModule?r:{default:r}).default);r.blotName="header",r.tagName=["H1","H2","H3","H4","H5","H6"],t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e},i=s(r(0)),a=s(r(4)),r=s(r(25));function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}d(h,a.default),n(h,[{key:"format",value:function(e,t){e!==f.blotName||t?o(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,e,t):this.replaceWith(i.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():o(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,t){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,t),this):(this.parent.unwrap(),o(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"replaceWith",this).call(this,e,t))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:o(h.__proto__||Object.getPrototypeOf(h),"formats",this).call(this,e)}}]);var p=h;function h(){return c(this,h),u(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}p.blotName="list-item",p.tagName="LI";d(y,r.default),n(y,null,[{key:"create",value:function(e){var t="ordered"===e?"OL":"UL",t=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,t);return"checked"!==e&&"unchecked"!==e||t.setAttribute("data-checked","checked"===e),t}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),n(y,[{key:"format",value:function(e,t){0<this.children.length&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,r=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;var e,t,r}},{key:"insertBefore",value:function(e,t){e instanceof p?o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertBefore",this).call(this,e,t):(t=null==t?this.length():t.offset(this),(t=this.split(t)).parent.insertBefore(e,t))}},{key:"optimize",value:function(e){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,e);e=this.next;null!=e&&e.prev===this&&e.statics.blotName===this.statics.blotName&&e.domNode.tagName===this.domNode.tagName&&e.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(e.moveChildren(this),e.remove())}},{key:"replace",value:function(e){var t;e.statics.blotName!==this.statics.blotName&&(t=i.default.create(this.statics.defaultChild),e.moveChildren(t),this.appendChild(t)),o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"replace",this).call(this,e)}}]);var f=y;function y(r){c(this,y);function e(e){var t;e.target.parentNode===r&&(t=n.statics.formats(r),e=i.default.find(e.target),"checked"===t?e.format("list","unchecked"):"unchecked"===t&&e.format("list","checked"))}var n=u(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,r));return r.addEventListener("touchstart",e),r.addEventListener("mousedown",e),n}f.blotName="list",f.scope=i.default.Scope.BLOCK_BLOT,f.tagName=["OL","UL"],f.defaultChild="list-item",f.allowedChildren=[p],t.ListItem=p,t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r}(((r=r(56))&&r.__esModule?r:{default:r}).default);r.blotName="italic",r.tagName=["EM","I"],t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):o(r.__proto__||Object.getPrototypeOf(r),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),r}(((r=r(6))&&r.__esModule?r:{default:r}).default);r.blotName="script",r.tagName=["SUB","SUP"],t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r}(((r=r(6))&&r.__esModule?r:{default:r}).default);r.blotName="strike",r.tagName="S",t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r}(((r=r(6))&&r.__esModule?r:{default:r}).default);r.blotName="underline",r.tagName="U",t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e},i=(i=r(0))&&i.__esModule?i:{default:i},a=r(27);function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=["alt","height","width"],r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"format",value:function(e,t){-1<s.indexOf(e)?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"format",this).call(this,e,t)}}],[{key:"create",value:function(e){var t=o(r.__proto__||Object.getPrototypeOf(r),"create",this).call(this,e);return"string"==typeof e&&t.setAttribute("src",this.sanitize(e)),t}},{key:"formats",value:function(r){return s.reduce(function(e,t){return r.hasAttribute(t)&&(e[t]=r.getAttribute(t)),e},{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,a.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),r}(i.default.Embed);r.blotName="image",r.tagName="IMG",t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e},i=r(4),a=(r=r(27))&&r.__esModule?r:{default:r};function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=["height","width"],r=function(e){function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"format",value:function(e,t){-1<s.indexOf(e)?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"format",this).call(this,e,t)}}],[{key:"create",value:function(e){var t=o(r.__proto__||Object.getPrototypeOf(r),"create",this).call(this,e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen",!0),t.setAttribute("src",this.sanitize(e)),t}},{key:"formats",value:function(r){return s.reduce(function(e,t){return r.hasAttribute(t)&&(e[t]=r.getAttribute(t)),e},{})}},{key:"sanitize",value:function(e){return a.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),r}(i.BlockEmbed);r.blotName="video",r.className="ql-video",r.tagName="IFRAME",t.default=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e},i=s(r(35)),a=s(r(5)),r=s(r(9));function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}d(h,i.default),n(h,null,[{key:"create",value:function(e){var t=o(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,e);return"string"==typeof e&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]);var p=h;function h(){return c(this,h),u(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}p.blotName="formula",p.className="ql-formula",p.tagName="SPAN";d(f,r.default),n(f,null,[{key:"register",value:function(){a.default.register(p,!0)}}]);i=f;function f(){c(this,f);var e=u(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}t.FormulaBlot=p,t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e},i=c(r(0)),a=c(r(5)),l=c(r(9));function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}p(f,c(r(13)).default),n(f,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),o(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((0<t.trim().length||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]);var h=f;function f(){return u(this,f),d(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}h.className="ql-syntax";var y=new i.default.Attributor.Class("token","hljs",{scope:i.default.Scope.INLINE}),r=(p(m,l.default),n(m,null,[{key:"register",value:function(){a.default.register(y,!0),a.default.register(h,!0)}}]),n(m,[{key:"highlight",value:function(){var e,t=this;this.quill.selection.composing||(this.quill.update(a.default.sources.USER),e=this.quill.getSelection(),this.quill.scroll.descendants(h).forEach(function(e){e.highlight(t.options.highlight)}),this.quill.update(a.default.sources.SILENT),null!=e&&this.quill.setSelection(e,a.default.sources.SILENT))}}]),m);function m(e,t){u(this,m);var r=d(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e,t));if("function"!=typeof r.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var n=null;return r.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(n),n=setTimeout(function(){r.highlight(),n=null},r.options.interval)}),r.highlight(),r}r.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=h,t.CodeToken=y,t.default=r},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;function o(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n?null===(e=Object.getPrototypeOf(e))?void 0:o(e,t,r):"value"in n?n.value:void 0!==(e=n.get)?e.call(r):void 0}var n=function(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e},i=p(r(3)),a=p(r(8)),l=r(43),s=p(l),c=r(15),u=p(r(41));function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],r=(y(g,s.default),n(g,[{key:"extendToolbar",value:function(e){this.tooltip=new b(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),u.default)}}]),g);function g(e,t){h(this,g),null!=t.modules.toolbar&&null==t.modules.toolbar.container&&(t.modules.toolbar.container=m);e=f(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,e,t));return e.quill.container.classList.add("ql-bubble"),e}r.DEFAULTS=(0,i.default)(!0,{},s.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});y(v,l.BaseTooltip),n(v,[{key:"listen",value:function(){var t=this;o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){t.root.classList.remove("ql-editing")}),this.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){var e;t.root.classList.contains("ql-hidden")||null!=(e=t.quill.getSelection())&&t.position(t.quill.getBounds(e))},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var e=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"position",this).call(this,e),t=this.root.querySelector(".ql-tooltip-arrow");if(t.style.marginLeft="",0===e)return e;t.style.marginLeft=-1*e-t.offsetWidth/2+"px"}}]);var b=v;function v(e,t){h(this,v);var o=f(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,e,t));return o.quill.on(a.default.events.EDITOR_CHANGE,function(e,t,r,n){e===a.default.events.SELECTION_CHANGE&&(null!=t&&0<t.length&&n===a.default.sources.USER?(o.show(),o.root.style.left="0px",o.root.style.width="",o.root.style.width=o.root.offsetWidth+"px",1===(e=o.quill.getLines(t.index,t.length)).length?o.position(o.quill.getBounds(t)):(n=e[e.length-1],e=o.quill.getIndex(n),n=Math.min(n.length()-1,t.index+t.length-e),t=o.quill.getBounds(new c.Range(e,n)),o.position(t))):document.activeElement!==o.textbox&&o.quill.hasFocus()&&o.hide())}),o}b.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=b,t.default=r},function(e,t,r){e.exports=r(63)}],o={},n.m=r,n.c=o,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=109).default;function n(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r,o}()},3697:(e,t,r)=>{"use strict";var r=r(5972).functionsHaveConfigurableNames(),n=Object,o=TypeError;e.exports=function(){if(null!=this&&this!==n(this))throw new o("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e},r&&Object.defineProperty&&Object.defineProperty(e.exports,"name",{value:"get flags"})},2847:(e,t,r)=>{"use strict";var n=r(4289),o=r(5559),i=r(3697),a=r(1721),r=r(2753),o=o(a());n(o,{getPolyfill:a,implementation:i,shim:r}),e.exports=o},1721:(e,t,r)=>{"use strict";var n=r(3697),o=r(4289).supportsDescriptors,i=Object.getOwnPropertyDescriptor;e.exports=function(){if(o&&"gim"===/a/gim.flags){var e=i(RegExp.prototype,"flags");if(e&&"function"==typeof e.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var t="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){t+="d"}}),Object.defineProperty(r,"sticky",{get:function(){t+="y"}}),"dy"===t)return e.get}}return n}},2753:(e,t,r)=>{"use strict";var n=r(4289).supportsDescriptors,o=r(1721),i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,l=TypeError,s=Object.getPrototypeOf,c=/a/;e.exports=function(){if(!n||!s)throw new l("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=o(),t=s(c),r=i(t,"flags");return r&&r.get===e||a(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}}},n={};function _t(e){var t=n[e];if(void 0!==t)return t.exports;t=n[e]={exports:{}};return r[e].call(t.exports,t,t.exports,_t),t.exports}_t.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return _t.d(t,{a:t}),t},_t.d=(e,t)=>{for(var r in t)_t.o(t,r)&&!_t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},_t.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function e(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e(i,[{key:"getName",value:function(){}},{key:"do",value:function(){}},{key:"undo",value:function(){}},{key:"allowReplace",value:function(e){return!1}},{key:"replace",value:function(e){}}]);var p=i;function i(){u(this,i)}function R(){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(this,arguments)}p.operation={rename:"rename",change:"change",add:"add",remove:"remove",move:"move"};var S=function(){t(a,p);r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,i=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function a(e,t,r,n){var o;return u(this,a),(o=i.call(this)).objId=e.getId(),o.moveToParentId=t.getId(),o.moveToPosition=r,o.oldParentId=e.getParent().getId(),o.oldPosition=e.getSiblingPosition(),o.oldContainerId=null,o.moveToContainerId=null,e.getData()instanceof Q&&(r=e.getData(),o.oldContainerId=r.getValue("containerId"),null!==(e=n.getMainPanel().getContainerByItem(t))&&(o.moveToContainerId=e.getId())),o.rb=n,o}return e(a,[{key:"getName",value:function(){return"Move panel item"}},{key:"do",value:function(){var e=this.moveToPosition;this.moveToParentId===this.oldParentId&&this.oldPosition<e&&e--,this.moveTo(this.moveToParentId,e,this.moveToContainerId!==this.oldContainerId?this.moveToContainerId:null)}},{key:"undo",value:function(){this.moveTo(this.oldParentId,this.oldPosition,this.moveToContainerId!==this.oldContainerId?this.oldContainerId:null)}},{key:"moveTo",value:function(e,t,r){var n=this.rb.getDataObject(this.objId),e=this.rb.getDataObject(e);null!==n&&null!==e&&(n.getPanelItem().moveToPosition(e.getPanelItem(),t),n.getPanelItem().openParentItems(),this.rb.notifyEvent(n,p.operation.move))}},{key:"getClassName",value:function(){return"MovePanelItemCmd"}}]),a}(),me=function(){t(l,p);r=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,a=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function l(e,t,r,n,o){u(this,l),(i=a.call(this)).objId=e,i.field=t,i.value=r,i.type=n;var i,r=(i.rb=o).getDataObject(e);return i.oldValue=r.getValue(t),i.firstExecution=!0,i.select=!0,i.notifyChange=!0,i}return e(l,[{key:"getName",value:function(){return"Set value"}},{key:"getObjId",value:function(){return this.objId}},{key:"do",value:function(){!this.firstExecution&&this.select&&this.rb.selectObject(this.objId,!0),this.setValue(this.value),this.firstExecution=!1}},{key:"undo",value:function(){this.select&&this.rb.selectObject(this.objId,!0),this.setValue(this.oldValue)}},{key:"setValue",value:function(e){var t,r=this.rb.getDataObject(this.objId);r.setValue(this.field,e),"name"===this.field&&((t=document.getElementById("rbro_menu_item_name".concat(this.objId))).textContent=e,t.setAttribute("title",e),this.rb.notifyEvent(r,p.operation.rename)),!this.notifyChange||this.type===l.type.richText&&this.firstExecution||this.rb.notifyEvent(r,p.operation.change,this.field)}},{key:"disableSelect",value:function(){this.select=!1}},{key:"setNotifyChange",value:function(e){this.notifyChange=e}},{key:"allowReplace",value:function(e){return e instanceof l&&(this.type===l.type.text||this.type===l.type.richText)&&this.objId===e.objId&&this.field===e.field}},{key:"replace",value:function(e){this.oldValue=e.oldValue}},{key:"getClassName",value:function(){return"SetValueCmd"}}]),l}(),s=(me.type={text:"text",richText:"richText",select:"select",file:"file",filename:"filename",checkbox:"checkbox",button:"button",buttonGroup:"buttonGroup",color:"color",internal:"internal"},e(a,[{key:"init",value:function(e){this.owner=e,this.el=e.getElement(),this.elContent=e.getContentElement(),this.panelItem=e.getPanelItem(),this.parent=e.getContainer(),this.initLevel()}},{key:"initLevel",value:function(){this.level=0;for(var e=this.parent;null!==e;)this.level++,e=e.getParent()}},{key:"setup",value:function(){}},{key:"remove",value:function(){}},{key:"appendElement",value:function(e){null!==this.elContent&&this.elContent.append(e)}},{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getPanelItem",value:function(){return this.panelItem}},{key:"setPanelItem",value:function(e){this.panelItem=e}},{key:"getLevel",value:function(){return this.level}},{key:"getParent",value:function(){return this.parent}},{key:"setParent",value:function(e){this.parent=e,this.initLevel()}},{key:"isChildOf",value:function(e){for(var t=this.getParent();null!==t;){if(t===e)return!0;t=t.getParent()}return!1}},{key:"isSelected",value:function(){return!(null===this.owner||!this.rb.isSelectedObject(this.owner.getId()))}},{key:"isElementAllowed",value:function(e){return!1}},{key:"dragOver",value:function(){null!==this.el&&this.el.classList.add("rbroElementDragOver")}},{key:"getOffset",value:function(){return{x:0,y:0}}},{key:"getOffsetTo",value:function(e){var t;return null!==e&&e!==this?(t=this.getOffset(),e=e.getOffset(),{x:t.x-e.x,y:t.y-e.y}):{x:0,y:0}}},{key:"getSize",value:function(){return{width:0,height:0}}},{key:"getContentSize",value:function(){return{width:0,height:0}}},{key:"isInside",value:function(e,t){var r=this.getOffset(),n=this.getSize();return e-=r.x,t-=r.y,0<=e&&0<=t&&e<n.width&&t<n.height}},{key:"clearErrors",value:function(){}}]),a);function a(e,t,r){u(this,a),this.rb=r,this.id=e,this.panelItem=null,this.name=t,this.el=null,this.elContent=null,this.owner=null,this.level=0,this.parent=null}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ge(e,t,r){var n=document.createElement(e);if(t)for(var o in t)t.hasOwnProperty(o)&&n.setAttribute(o,t[o]);return r&&(n.textContent=r),n}function m(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function be(e,t,r,n){n=n||{};r&&(n.for=r),e.append(ge("label",n,t+":"))}function g(e){e=e.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}}function y(e){e.addEventListener("keyup",function(e){var t=e.target.value,r=t.replace(/[^0-9]/g,"");t!==r&&(e.target.value=r)})}function xe(e,t,r){var n=parseFloat(e.replace(",","."));return isNaN(n)||n<t?""+t:r<n?""+r:e}function ve(e){if("number"==typeof e)return e;if("string"==typeof e&&""!==e){e=parseFloat(e.replace(",","."));if(!isNaN(e))return e}return 0}function P(e,t){var r=Math.ceil(e/t)*t;return r-e<=t>>1?r:r-t}function A(e,t){return Math.floor(e/t)*t}function D(e,t){return Math.ceil(e/t)*t}function L(e,t,r){var n=e;if(t!==r)for(;-1!==n.indexOf(t);)n=n.replace(t,r);return n}function ke(t,r,e,n){var o,i={shown:!1,paletteId:r.getAttribute("id")+"_select"},a=n.getProperty("colors"),l=ge("div",{class:"rbroColorPalette rbroHidden"}),s=function(e){var t,r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return O(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?O(e,void 0):void 0}}(e)))return n&&(e=n),t=0,{s:r=function(){},n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;l.append(ge("span",{style:"color: ".concat(c),"data-value":c,class:"rbroColorPaletteItem"}))}}catch(t){s.e(t)}finally{s.f()}e&&l.append(ge("span",{"data-value":"clear",class:"rbroClearColorPalette"},n.getLabel("clear"))),l.addEventListener("click",function(e){var t=e.target.dataset.value;t&&("clear"===t?(r.value="",r.dispatchEvent(new Event("change"))):r.value=t,r.dispatchEvent(new Event("change"))),l.classList.add("rbroHidden"),e.stopImmediatePropagation()});a=ge("div",{id:i.paletteId,class:"rbroColorPicker"});return a.addEventListener("click",function(e){l.classList.toggle("rbroHidden"),i.shown=!i.shown}),t.prepend(a),t.append(l),r.addEventListener("focus",function(e){t.classList.add("rbroActive")}),r.addEventListener("blur",function(e){t.classList.remove("rbroActive")}),i.documentClickListener=function(e){e=e.target.id;i.shown&&e!==i.paletteId&&(l.classList.add("rbroHidden"),i.shown=!1)},document.addEventListener("click",i.documentClickListener),i.destroy=function(){i.documentClickListener&&(document.removeEventListener("click",i.documentClickListener),i.documentClickListener=null)},i}function Se(e){return!e||/^#[0-9A-F]{6}$/i.test(e)}function c(e){return window.TouchEvent&&e instanceof TouchEvent?0<e.touches.length?{x:(t=e.touches[e.touches.length-1]).pageX,y:t.pageY}:null:{x:e.pageX,y:e.pageY};var t}String.prototype.reverse=function(){return this.split("").reverse().join("")};var h=e(function e(t,r){u(this,e),this.value=t,this.type=r});function T(e,t){for(var r=0,n=[];r<e.length;){var o=e[r];if(/[0-9]/.test(o)){for(var i="";r<e.length&&/[0-9.]/.test(e[r]);)i+=e[r++];var a=parseFloat(i);n.push(new h(a,h.type.number))}else if(/[a-zA-Z]/.test(o)){for(var l="";r<e.length&&/[a-zA-Z0-9]/.test(e[r]);)l+=e[r++];"true"===l?n.push(new h(!0,h.type.boolean)):"false"===l?n.push(new h(!1,h.type.boolean)):"type"===l?null!==t?n.push(new h(t.getElementType(),h.type.string)):n.push(new h("type",h.type.string)):null===t?n.push(new h(l,h.type.field)):(s=(a=t.getValue(l))instanceof Number?h.type.number:a instanceof String?h.type.string:a instanceof Boolean?h.type.boolean:h.type.undefined,n.push(new h(a,s)))}else if("'"!==o)if("("!==o&&")"!==o)if(/[!=|&]/.test(o))if(r++,"!"===o&&(r>=e.length||"="!==e[r]))n.push(new h(h.operator.negate,h.type.operator));else{if(!(r<e.length))throw new Error("Invalid token ".concat(o," at end of input"));var s=e[r];if("!"===o&&"="===s)n.push(new h(h.operator.notEqual,h.type.operator)),r++;else if("="===o&&"="===s)n.push(new h(h.operator.equal,h.type.operator)),r++;else if("|"===o&&"|"===s)n.push(new h(h.operator.or,h.type.operator)),r++;else{if("&"!==o||"&"!==s)throw new Error("Invalid token ".concat(s," at position ").concat(r));n.push(new h(h.operator.and,h.type.operator)),r++}}else{if(" "!==o)throw new Error("Invalid token ".concat(o," at position ").concat(r));r++}else n.push(new h(o,!1,"("===o?h.type.bracketOpen:h.type.bracketClose)),r++;else{var c="";for(r++;r<e.length&&"'"!==e[r];)c+=e[r++];if(r>=e.length)throw new Error("Unterminated string token in input ".concat(e));n.push(new h(c,h.type.string)),r++}}return n}h.type={operator:"operator",bracketOpen:"bracketOpen",bracketClose:"bracketClose",boolean:"boolean",number:"number",string:"string",undefined:"undefined",field:"field"},h.operator={and:"&&",or:"||",equal:"==",notEqual:"!=",negate:"!"};var j={"!":4,"!=":3,"==":3,"||":2,"&&":1};function N(e,t){for(var r=function(e){for(var t=[],r=[],n=0;n<e.length;n++){var o=e[n];if(o.type===h.type.operator){for(;function(e,t){if(0!==e.length)return e=e[e.length-1],j[e.value]>=j[t.value]}(t,o);)r.push(t.pop());t.push(o)}else if(o.type===h.type.bracketOpen)t.push(o);else if(o.type===h.type.bracketClose){for(;0<t.length&&t[t.length-1]!==h.type.bracketOpen;)r.push(t.pop());t.pop()}else r.push(o)}for(var i=t.length-1;0<=i;i--)r.push(t[i]);return r}(T(e,t)),n=[],o=0;o<r.length;o++){var i=r[o];i.type!==h.type.operator?n.push(i):n.push(function(e,t){var r,n=t.pop().value;switch(e.value!==h.operator.negate&&(r=t.pop().value),e.value){case h.operator.and:return new h(r&&n,h.type.boolean);case h.operator.or:return new h(r||n,h.type.boolean);case h.operator.equal:return new h(r===n,h.type.boolean);case h.operator.notEqual:return new h(r!==n,h.type.boolean);case h.operator.negate:return new h(!n,h.type.boolean);default:throw new Error("Invalid operator: ".concat(e))}}(i,n))}e=n.pop();return e.type,h.type.boolean,e.value}var b=function(){t(a,s);r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,i=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function a(e,t,r,n,o){return u(this,a),(r=i.call(this,r,n,o)).panelItem=null,r.bandType=e,(r.section=t)||(e===a.bandType.header?(r.id="0_header",r.name=o.getLabel("bandHeader")):e===a.bandType.content?(r.id="0_content",r.name=o.getLabel("bandContent"),r.allowAllElements=!0):e===a.bandType.footer&&(r.id="0_footer",r.name=o.getLabel("bandFooter"))),r.el=null,r}return e(a,[{key:"setup",value:function(){this.section||(this.el=this.rb.getDocument().getElement(this.bandType),this.elContent=this.el)}},{key:"isElementAllowed",value:function(e){return e!==Q.type.tableText&&(this.bandType===a.bandType.content||e!==Q.type.pageBreak&&e!==Q.type.table&&e!==Q.type.section)}},{key:"getOffset",value:function(){var e,t=0;return this.section?null!==this.owner&&(t=this.owner.getAbsolutePosition().y):(e=this.rb.getDocumentProperties(),this.bandType===a.bandType.content&&e.getValue("header")?t=ve(e.getValue("headerSize")):this.bandType===a.bandType.footer&&(t=this.rb.getDocument().getHeight()-ve(e.getValue("footerSize")))),{x:0,y:t}}},{key:"getSize",value:function(){var e=this.rb.getDocumentProperties(),t=e.getValue("width")-e.getValue("marginLeftVal")-e.getValue("marginRightVal"),r=0;return this.section?null!==this.owner&&(r=this.owner.getValue("heightVal")):this.bandType===a.bandType.header?r=e.getValue("headerSizeVal"):this.bandType===a.bandType.content?r=e.getValue("height")-e.getValue("headerSizeVal")-e.getValue("footerSizeVal")-e.getValue("marginTopVal")-e.getValue("marginBottomVal"):this.bandType===a.bandType.footer&&(r=e.getValue("footerSizeVal")),{width:t,height:r}}},{key:"getContentSize",value:function(){return this.getSize()}},{key:"isInside",value:function(e,t){return!(this.section&&null!==this.owner&&this.owner&&!this.owner.isVisible())&&R(B(a.prototype),"isInside",this).call(this,e,t)}}]),a}();function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return V(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?V(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}b.bandType={header:"header",content:"content",footer:"footer"};e(q,[{key:"setInitialData",value:function(e){for(var t in e)e.hasOwnProperty(t)&&this.hasOwnProperty(t)&&(this[t]=e[t]);this.borderWidthVal=ve(this.borderWidth)}},{key:"getFields",value:function(){return["id","name","bold","italic","underline","strikethrough","horizontalAlignment","verticalAlignment","textColor","backgroundColor","font","fontSize","lineSpacing","borderColor","borderWidth","borderAll","borderLeft","borderTop","borderRight","borderBottom","paddingLeft","paddingTop","paddingRight","paddingBottom"]}},{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getPanelItem",value:function(){return this.panelItem}},{key:"setPanelItem",value:function(e){this.panelItem=e}},{key:"getValue",value:function(e){return this[e]}},{key:"setValue",value:function(e,t){if(this[e]=t,-1!==e.indexOf("border")&&("borderWidth"===e&&(this.borderWidthVal=ve(t)),q.setBorderValue(this,e,"",t,this.rb)),"name"!==e){var r,n=F(this.rb.getDocElements(!0));try{for(n.s();!(r=n.n()).done;)r.value.updateChangedStyle(this.getId())}catch(e){n.e(e)}finally{n.f()}}}},{key:"addCommandsForChangedProperty",value:function(e,t,r,n){var o,i=""+this.getId(),a=F(this.rb.getDocElements(!0));try{for(a.s();!(o=a.n()).done;){var l,s,c=o.value;c.hasProperty("styleId")&&(c.getValue("styleId")===i&&c.getValue(e)!==t&&((l=new me(c.getId(),e,t,r,this.rb)).disableSelect(),n.addCommand(l)),c.getValue("cs_styleId")===i&&c.getValue("cs_"+e)!==t&&((s=new me(c.getId(),"cs_"+e,t,r,this.rb)).disableSelect(),n.addCommand(s)))}}catch(e){a.e(e)}finally{a.f()}}},{key:"addCommandsForDelete",value:function(e){var t,r,n=F(this.rb.getDocElements(!0));try{for(n.s();!(r=n.n()).done;){var o=r.value;o.getElementType()!==Q.type.text&&o.getElementType()!==Q.type.tableText||!o.getValue("styleId")||ve(o.getValue("styleId"))!==this.id||(t=new me(o.getId(),"styleId","",me.type.text,this.rb),e.addCommand(t))}}catch(e){n.e(e)}finally{n.f()}t=new ne(!1,this.toJS(),this.getId(),this.getPanelItem().getParent().getId(),this.getPanelItem().getSiblingPosition(),this.rb),e.addCommand(t)}},{key:"addError",value:function(e){this.errors.push(e)}},{key:"clearErrors",value:function(){this.errors=[]}},{key:"getErrors",value:function(){return this.errors}},{key:"remove",value:function(){}},{key:"select",value:function(){}},{key:"deselect",value:function(){}},{key:"toJS",value:function(){var e,t={},r=F(this.getFields());try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n]=this.getValue(n)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"getClassName",value:function(){return"Style"}}],[{key:"setBorderValue",value:function(e,t,r,n,o){"borderLeft"!==(t=0<r.length?t.substr(r.length):t)&&"borderTop"!==t&&"borderRight"!==t&&"borderBottom"!==t||(t=e.getValue("".concat(r,"borderLeft"))&&e.getValue("".concat(r,"borderTop"))&&e.getValue("".concat(r,"borderRight"))&&e.getValue("".concat(r,"borderBottom")))!==e[r="".concat(r,"borderAll")]&&(e[r]=t,o.notifyEvent(e,p.operation.change,r))}}]);var Y=q;function q(e,t,r){u(this,q),this.rb=r,this.id=e,this.name=r.getLabel("style"),this.panelItem=null,this.errors=[],this.bold=!1,this.italic=!1,this.underline=!1,this.strikethrough=!1,this.horizontalAlignment=q.alignment.left,this.verticalAlignment=q.alignment.top,this.textColor="#000000",this.backgroundColor="",this.font=r.getProperty("defaultFont"),this.fontSize=12,this.lineSpacing=1,this.borderColor="#000000",this.borderWidth="1",this.borderAll=!1,this.borderLeft=!1,this.borderTop=!1,this.borderRight=!1,this.borderBottom=!1,this.paddingLeft="",this.paddingTop="",this.paddingRight="",this.paddingBottom="",this.borderWidthVal=0,this.setInitialData(t)}Y.font={courier:"courier",helvetica:"helvetica",times:"times"},Y.alignment={left:"left",center:"center",right:"right",justify:"justify",top:"top",middle:"middle",bottom:"bottom"};var ne=function(){t(s,p);r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,l=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function s(e,t,r,n,o,i){var a;return u(this,s),(a=l.call(this)).add=e,a.initialData=t,a.parentId=n,a.position=o,a.rb=i,a.id=r,a}return e(s,[{key:"getName",value:function(){return this.add?"Add style":"Delete style"}},{key:"do",value:function(){this.add?this.addStyle():this.deleteStyle()}},{key:"undo",value:function(){this.add?this.deleteStyle():this.addStyle()}},{key:"addStyle",value:function(){var e,t,r=this.rb.getDataObject(this.parentId);null!==r&&(e=new Y(this.id,this.initialData,this.rb),(t=new v("style",r.getPanelItem(),e,{draggable:!0},this.rb)).openParentItems(),e.setPanelItem(t),r.getPanelItem().insertChild(this.position,t),this.rb.addStyle(e))}},{key:"deleteStyle",value:function(){var e=this.rb.getDataObject(this.id);null!==e&&(this.initialData=e.toJS(),this.rb.deleteStyle(e))}},{key:"getClassName",value:function(){return"AddDeleteStyleCmd"}}]),s}();function z(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return H(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?H(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _e=function(){t(i,p);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t){var r;return u(this,i),(r=o.call(this)).name=e,r.rb=t,r.commands=[],r.selectObjectIds=[],r.selectionCmdIndex=[],r}return e(i,[{key:"getName",value:function(){return this.name}},{key:"do",value:function(){if(0<this.selectionCmdIndex.length)for(var e=this.selectionCmdIndex[this.selectionCmdIndex.length-1],t=0;t<this.commands.length;t++){var r=this.commands[t];r instanceof me&&r.setNotifyChange(e<=t)}for(var n=0;n<this.commands.length;n++)this.commands[n].do();this.selectObjects()}},{key:"undo",value:function(){if(0<this.selectionCmdIndex.length)for(var e=1<this.selectionCmdIndex.length?this.selectionCmdIndex[1]:this.commands.length,t=this.commands.length-1;0<=t;t--){var r=this.commands[t];r instanceof me&&r.setNotifyChange(t<e)}for(var n=this.commands.length-1;0<=n;n--)this.commands[n].undo();this.selectObjects()}},{key:"addCommand",value:function(e){e instanceof me&&e.disableSelect(),this.commands.push(e)}},{key:"addSelection",value:function(e){-1===this.selectObjectIds.indexOf(e)&&this.selectObjectIds.push(e),this.selectionCmdIndex.push(this.commands.length)}},{key:"isEmpty",value:function(){return 0===this.commands.length}},{key:"getCommands",value:function(){return this.commands}},{key:"selectObjects",value:function(){var e,t=!0,r=z(this.selectObjectIds);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(!this.rb.isSelectedObject(n)){t=!1;break}}}catch(e){r.e(e)}finally{r.f()}if(!t){var o,i=!0,a=z(this.selectObjectIds);try{for(a.s();!(o=a.n()).done;){var l=o.value;this.rb.selectObject(l,i),i=!1}}catch(e){a.e(e)}finally{a.f()}}}},{key:"allowReplace",value:function(e){if(e instanceof i){var t=e.getCommands();if(this.commands.length===t.length){for(var r=0;r<this.commands.length;r++)if(!this.commands[r].allowReplace(t[r]))return!1;return!0}}return!1}},{key:"replace",value:function(e){for(var t=e.getCommands(),r=0;r<this.commands.length;r++)this.commands[r].replace(t[r])}},{key:"getClassName",value:function(){return"CommandGroupCmd"}}]),i}();function U(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return W(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?W(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e(G,[{key:"getId",value:function(){return this.id}},{key:"getElement",value:function(){return this.element}},{key:"show",value:function(){this.element.classList.remove("rbroHidden")}},{key:"hide",value:function(){this.element.classList.add("rbroHidden")}},{key:"getPanelName",value:function(){return this.panelName}},{key:"getParent",value:function(){return this.parent}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(e){this.data=e,document.getElementById("rbro_menu_item_name".concat(this.id)).textContent=null!==e?e.getName():""}},{key:"setActive",value:function(){document.getElementById("rbro_menu_item".concat(this.id)).classList.add("rbroMenuItemActive")}},{key:"setInactive",value:function(){document.getElementById("rbro_menu_item".concat(this.id)).classList.remove("rbroMenuItemActive")}},{key:"getParentIds",value:function(){for(var e=[],t=this.getParent();null!==t;)e.push(t.id),t=t.getParent();return e}},{key:"openParentItems",value:function(){for(var e=this.getParent();null!==e;)e.open(),e=e.getParent()}},{key:"open",value:function(){var e=document.getElementById("rbro_menu_item_children".concat(this.getId()));e&&(document.getElementById("rbro_menu_item".concat(this.getId())).classList.add("rbroMenuItemOpen"),e.classList.remove("rbroHidden"))}},{key:"close",value:function(){var e=document.getElementById("rbro_menu_item_children".concat(this.getId()));e&&(document.getElementById("rbro_menu_item".concat(this.getId())).classList.remove("rbroMenuItemOpen"),e.classList.add("rbroHidden"))}},{key:"appendChild",value:function(e){0===this.children.length&&document.getElementById("rbro_menu_item".concat(this.getId())).classList.remove("rbroMenuItemNoChildren"),this.children.push(e),document.getElementById("rbro_menu_item_children".concat(this.getId())).append(e.getElement())}},{key:"insertChild",value:function(e,t){0===this.children.length&&document.getElementById("rbro_menu_item".concat(this.getId())).classList.remove("rbroMenuItemNoChildren"),-1!==e?this.children.splice(e,0,t):this.children.push(t);var r=document.querySelectorAll("#rbro_menu_item_children".concat(this.getId()," > li"));0<=e&&e<r.length?r[e].before(t.getElement()):document.getElementById("rbro_menu_item_children".concat(this.getId())).append(t.getElement())}},{key:"getChildren",value:function(){return this.children}},{key:"getChildByName",value:function(e){return this.getChildByNameExclude(e,null)}},{key:"getChildByNameExclude",value:function(e,t){var r,n=U(this.children);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(null!==o.getData()&&o.getData()!==t&&o.getData().getName()===e)return o}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"removeChild",value:function(e){this.removeChildInternal(e,!0)}},{key:"removeChildInternal",value:function(e,t){for(var r,n=0;n<this.children.length;n++)if(e.getId()===this.children[n].getId()){this.children.splice(n,1),t&&e.getElement().remove(),0===this.children.length&&null!==(r=document.getElementById("rbro_menu_item".concat(this.getId())))&&r.classList.add("rbroMenuItemNoChildren");break}}},{key:"getSiblingPosition",value:function(){if(null!==this.getParent())for(var e=this.getParent().getChildren(),t=0;t<e.length;t++)if(e[t]===this)return t;return 0}},{key:"moveTo",value:function(e){this.element.parentElement.removeChild(this.element),this.parent.removeChildInternal(this,!1),(this.parent=e).appendChild(this)}},{key:"moveToPosition",value:function(e,t){this.element.parentElement.removeChild(this.element),this.parent.removeChildInternal(this,!1),(this.parent=e).insertChild(t,this)}},{key:"clear",value:function(){0<this.children.length&&(m(document.getElementById("rbro_menu_item_children".concat(this.id))),this.children=[])}},{key:"getDropObjectInfo",value:function(){var e={allowDrop:!1,panel:null,position:-1,container:null},t=this.rb.getDataObject(this.rb.getBrowserDragId());if(null!==t){var r,n=!1;if(t instanceof Q){if(this.data instanceof Q&&this.data.isDroppingAllowed()?(e.container=this.data.getLinkedContainer(),null===e.container&&(e.container=this.data.getContainer(),n=!0)):"band"===this.panelName&&(e.container=this.data),null!==e.container&&e.container.isElementAllowed(t.getElementType())){e.allowDrop=!0;var o,i=U(t.getLinkedContainers());try{for(i.s();!(o=i.n()).done;){var a=o.value;if(a===e.container||e.container.isChildOf(a)){e.allowDrop=!1;break}}}catch(e){i.e(e)}finally{i.f()}}}else t instanceof we?this.data instanceof we?null!==(r=this.data.getParent())?r.getValue("type")===we.type.array?t.getValue("type")!==we.type.array&&t.getValue("type")!==we.type.map&&t.getValue("type")!==we.type.sum&&t.getValue("type")!==we.type.average&&(n=e.allowDrop=!0):r.getValue("type")===we.type.map&&t.getValue("type")!==we.type.array&&t.getValue("type")!==we.type.map&&(n=e.allowDrop=!0):n=e.allowDrop=!0:"parameter"===this.panelName&&(e.allowDrop=!0):t instanceof Y&&(this.data instanceof Y?n=e.allowDrop=!0:"style"===this.panelName&&(e.allowDrop=!0));e.allowDrop&&(n?(e.panel=this.getParent(),e.position=this.getSiblingPosition()+1):(e.panel=this,e.position=0),(null===e.panel||e.panel===t.getPanelItem().getParent()&&e.position===t.getPanelItem().getSiblingPosition())&&(e.allowDrop=!1))}return e}},{key:"isDocElementPanel",value:function(){return this.panelName===Q.type.text||this.panelName===Q.type.image||this.panelName===Q.type.line||this.panelName===Q.type.table||this.panelName===Q.type.pageBreak||this.panelName===Q.type.barCode||this.panelName===Q.type.frame||this.panelName===Q.type.section}}]);var v=G;function G(r,e,t,n,o){var i=this,a=(u(this,G),this.properties={hasChildren:!1,showAdd:!1,showDelete:!0,hasDetails:!0,visible:!0,draggable:!1},Object.assign(this.properties,n),this.panelName=r,null!==t?t.getName():""),l=(this.id=null!==t?t.getId():n.id,this.parent=e,this.data=t,this.rb=o,this.children=[],this.dragEnterCount=0,this.element=ge("li"),this.properties.visible||this.element.classList.add("rbroHidden"),ge("div",{id:"rbro_menu_item".concat(this.id),class:"rbroMenuItem"})),n=(this.properties.draggable&&(l.setAttribute("draggable","true"),l.addEventListener("dragstart",function(e){e.dataTransfer.setData("text/plain",""),e.dataTransfer.effectAllowed="move",i.rb.startBrowserDrag("panelItem",null,i.id),e.stopPropagation()})),l.addEventListener("dragover",function(e){i.rb.isBrowserDragActive("panelItem")&&i.rb.getBrowserDragId()!==i.id&&i.getDropObjectInfo().allowDrop&&(e.preventDefault(),e.stopPropagation())}),l.addEventListener("dragenter",function(e){i.rb.isBrowserDragActive("panelItem")&&i.rb.getBrowserDragId()!==i.id&&i.getDropObjectInfo().allowDrop&&(l.classList.add("rbroMenuItemDragOver"),i.dragEnterCount++,e.preventDefault())}),l.addEventListener("dragleave",function(e){i.rb.isBrowserDragActive("panelItem")&&i.rb.getBrowserDragId()!==i.id&&i.getDropObjectInfo().allowDrop&&(i.dragEnterCount--,0===i.dragEnterCount&&l.classList.remove("rbroMenuItemDragOver"))}),l.addEventListener("drop",function(e){if(i.rb.isBrowserDragActive("panelItem")&&i.rb.getBrowserDragId()!==i.id){var t,r,n,o=i.getDropObjectInfo();if(o.allowDrop)return i.dragEnterCount--,l.classList.remove("rbroMenuItemDragOver"),t=new _e("Move panel item",i.rb),(r=i.rb.getDataObject(i.rb.getBrowserDragId()))instanceof Q&&r.getValue("containerId")!==o.container.getId()&&(r.checkBounds(r.getValue("xVal"),r.getValue("yVal"),r.getValue("widthVal"),r.getValue("heightVal"),o.container.getSize(),t),n=new me(r.getId(),"containerId",o.container.getId(),me.type.internal,i.rb),t.addCommand(n)),n=new S(r.getPanelItem(),o.panel,o.position,i.rb),t.addCommand(n),i.rb.executeCommand(t),e.preventDefault(),!1}}),ge("div",{class:"rbroMenuItemText"}));n.append(ge("span",{id:"rbro_menu_item_name".concat(this.id)},a)),this.properties.showAdd&&((e=ge("div",{id:"rbro_menu_item_add".concat(this.id),class:"rbroButton rbroRoundButton rbroIcon-plus"})).addEventListener("click",function(e){"parameter"===r?(t=new oe(!0,{},i.rb.getUniqueId(),i.getId(),-1,i.rb),i.rb.executeCommand(t)):"style"===r&&(t=new ne(!0,{},i.rb.getUniqueId(),i.getId(),-1,i.rb),i.rb.executeCommand(t));var t=i.children[i.children.length-1];i.rb.selectObject(t.getId(),!0),e.stopPropagation()}),l.append(e)),this.properties.showDelete&&((t=ge("div",{class:"rbroButton rbroDeleteButton rbroIcon-cancel"})).addEventListener("click",function(e){var t=null;"parameter"===r?t=new oe(!1,i.getData().toJS(),i.getId(),i.parent.getId(),i.getSiblingPosition(),i.rb):("style"===r||i.isDocElementPanel()&&i.getData()instanceof Q)&&(t=new _e("Delete",i),i.getData().addCommandsForDelete(t)),null!==t&&i.rb.executeCommand(t),e.stopPropagation()}),l.append(t)),l.addEventListener("click",function(e){var t;i.properties.hasDetails&&!document.getElementById("rbro_menu_item".concat(i.id)).classList.contains("rbroMenuItemActive")||(t=document.getElementById("rbro_menu_item_children".concat(i.id)))&&(l.classList.toggle("rbroMenuItemOpen"),t.classList.toggle("rbroHidden")),i.properties.hasDetails&&(i.rb.isSelectedObject(i.id)?e.shiftKey&&i.rb.deselectObject(i.id):(t=!0,i.isDocElementPanel()&&(t=!e.shiftKey),i.rb.selectObject(i.id,t)))}),this.properties.hasChildren&&(l.classList.add("rbroMenuItemNoChildren"),n.append(ge("div",{id:"rbro_menu_item_children_toggle".concat(this.id),class:"rbroMenuArrow rbroIcon-arrow-right"})),this.element.append(ge("ul",{id:"rbro_menu_item_children".concat(this.id),class:"rbroHidden"}))),l.prepend(n),this.element.prepend(l)}var oe=function(){t(s,p);r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,l=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function s(e,t,r,n,o,i){var a;return u(this,s),(a=l.call(this)).add=e,a.initialData=t,a.parentId=n,a.position=o,a.rb=i,a.id=r,a.showDelete=!0,a}return e(s,[{key:"getName",value:function(){return this.add?"Add parameter":"Delete parameter"}},{key:"setShowDelete",value:function(e){this.showDelete=e}},{key:"do",value:function(){this.add?this.addParameter():this.deleteParameter()}},{key:"undo",value:function(){this.add?this.deleteParameter():this.addParameter()}},{key:"addParameter",value:function(){var e,t,r=this.rb.getDataObject(this.parentId);null!==r&&(e=new we(this.id,this.initialData,this.rb),this.rb.addParameter(e),(t=new v("parameter",r.getPanelItem(),e,{hasChildren:!0,showAdd:!0,showDelete:this.showDelete,draggable:!0},this.rb)).openParentItems(),e.setPanelItem(t),r.getPanelItem().insertChild(this.position,t),e.setup(),this.rb.notifyEvent(e,p.operation.add))}},{key:"deleteParameter",value:function(){var e=this.rb.getDataObject(this.id);null!==e&&(this.initialData=e.toJS(),this.rb.deleteParameter(e))}},{key:"getClassName",value:function(){return"AddDeleteParameterCmd"}}]),s}();function f(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return K(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?K(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e(_,[{key:"setInitialData",value:function(e){for(var t in e)e.hasOwnProperty(t)&&this.hasOwnProperty(t)&&(this[t]=e[t]);"showOnlyNameType"in e&&e.showOnlyNameType&&(this.editable=!1)}},{key:"setHighlightUnused",value:function(e){e?document.getElementById("rbro_menu_item".concat(this.panelItem.getId())).classList.add("rbroUnusedParameter"):document.getElementById("rbro_menu_item".concat(this.panelItem.getId())).classList.remove("rbroUnusedParameter")}},{key:"setup",value:function(){if(this.type===_.type.array||this.type===_.type.map){var e,t=this.rb.getProperty("adminMode"),r=f(this.children);try{for(r.s();!(e=r.n()).done;){var n=e.value,o=new _(n.id||this.rb.getUniqueId(),n,this.rb),i=(this.rb.addParameter(o),new v("parameter",this.panelItem,o,{hasChildren:!0,showAdd:t,showDelete:t,draggable:!0},this.rb));o.setPanelItem(i),this.panelItem.appendChild(i),o.setup(),this.rb.notifyEvent(o,p.operation.add)}}catch(e){r.e(e)}finally{r.f()}}this.updateMenuItemDisplay()}},{key:"getFields",value:function(){return["id","name","type","arrayItemType","eval","nullable","pattern","expression","showOnlyNameType","testData","testDataBoolean","testDataImage","testDataImageFilename"]}},{key:"getId",value:function(){return this.id}},{key:"getMaxId",value:function(){var e,t=this.id;if(this.type===_.type.array||this.type===_.type.map)for(var r=this.children.slice(),n=0;n<r.length;){var o=r[n];o.id>t&&(t=o.id),o.type!==_.type.array&&o.type!==_.type.map||r.push.apply(r,function(e){if(Array.isArray(e))return M(e)}(e=o.children)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){if(e){if("string"==typeof e)return M(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n++}return t}},{key:"getName",value:function(){return this.name}},{key:"getPanelItem",value:function(){return this.panelItem}},{key:"setPanelItem",value:function(e){this.panelItem=e}},{key:"getValue",value:function(e){return this[e]}},{key:"setValue",value:function(e,t){this[e]=t,"type"===e&&this.updateMenuItemDisplay()}},{key:"updateMenuItemDisplay",value:function(){this.rb.getProperty("adminMode")&&(this.type===_.type.array||this.type===_.type.map?(document.getElementById("rbro_menu_item_add".concat(this.getId())).removeAttribute("style"),document.getElementById("rbro_menu_item_children".concat(this.getId())).style.display="block",document.getElementById("rbro_menu_item_children_toggle".concat(this.getId())).removeAttribute("style")):(document.getElementById("rbro_menu_item_add".concat(this.getId())).style.display="none",document.getElementById("rbro_menu_item_children".concat(this.getId())).style.display="none",document.getElementById("rbro_menu_item_children_toggle".concat(this.getId())).style.display="none"))}},{key:"getParent",value:function(){return null!==this.panelItem&&this.panelItem.getParent().getData()instanceof _?this.panelItem.getParent().getData():null}},{key:"addError",value:function(e){this.errors.push(e)}},{key:"clearErrors",value:function(){this.errors=[]}},{key:"getErrors",value:function(){return this.errors}},{key:"remove",value:function(){}},{key:"select",value:function(){}},{key:"deselect",value:function(){}},{key:"addCommandsForChangedParameterName",value:function(e,t,r){this.addCommandForChangedParameterName(e,t,"expression",r);var n,o=f(this.getChildren());try{for(o.s();!(n=o.n()).done;)n.value.addCommandsForChangedParameterName(e,t,r)}catch(e){o.e(e)}finally{o.f()}}},{key:"addCommandForChangedParameterName",value:function(e,t,r,n){var o,i=e.getParent(),i=null!==i&&i.getValue("type")===_.type.map?(o="${"+i.getName()+"."+e.getName()+"}","${"+i.getName()+"."+t+"}"):e.getValue("type")===_.type.map?(o="${"+e.getName()+".","${"+t+"."):(o="${"+e.getName()+"}","${"+t+"}");-1!==this.getValue(r).indexOf(o)&&(e=new me(this.id,r,L(this.getValue(r),o,i),me.type.text,this.rb),n.addCommand(e))}},{key:"addUpdateTestDataCmdForChangedParameterName",value:function(e,t,r){var n=0<t.length?t[0]:null;if(null!==n&&(n.type===_.type.array||n.type===_.type.map))try{var o,i=n.getTestData(!0),a=(this.renameTestDataParameter(i,this.getName(),e,t,0),JSON.stringify(i));this.testData!==a&&(o=new me(n.getId(),"testData",a,me.type.text,this.rb),r.addCommand(o))}catch(e){}}},{key:"renameTestDataParameter",value:function(e,t,r,n,o){var i,a=o+1,l=a<n.length,s=l?n[a].getName():t,c=f(e);try{for(c.s();!(i=c.n()).done;){var u=i.value;s in u&&(l?this.renameTestDataParameter(u[s],t,r,n,a):(u[r]=u[s],delete u[s]))}}catch(e){c.e(e)}finally{c.f()}}},{key:"addCommandsForChangedParameterType",value:function(e,t){if(this.type!==_.type.array&&this.type!==_.type.simpleArray&&this.type!==_.type.map&&e!==_.type.array&&e!==_.type.simpleArray&&e!==_.type.map||(r=new me(this.getId(),"testData","",me.type.text,this.rb),t.addCommand(r)),this.type!==_.type.array&&e===_.type.array){var r={name:"row_number",type:_.type.number,eval:!1,editable:!1,showOnlyNameType:!0},r=new oe(!0,r,this.rb.getUniqueId(),this.getId(),0,this.rb);r.setShowDelete(!1),t.addCommand(r)}else if(this.type===_.type.array&&e!==_.type.array){var n,o=f(this.getChildren());try{for(o.s();!(n=o.n()).done;){var i=n.value;if("row_number"===i.getValue("name")&&!i.getValue("editable")){var a=new oe(!1,i.toJS(),i.getId(),this.getId(),i.getPanelItem().getSiblingPosition(),this.rb);t.addCommand(a);break}}}catch(e){o.e(e)}finally{o.f()}}}},{key:"toJS",value:function(){var e,t={},r=f(this.getFields());try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n]=this.getValue(n)}}catch(e){r.e(e)}finally{r.f()}if(this.type===_.type.array||this.type===_.type.map){var o,i=[],a=f(this.panelItem.getChildren());try{for(a.s();!(o=a.n()).done;){var l=o.value;i.push(l.getData().toJS())}}catch(e){a.e(e)}finally{a.f()}t.children=i}return t}},{key:"getChildren",value:function(){var e=[];if(this.type===_.type.array||this.type===_.type.map){var t,r=f(this.panelItem.getChildren());try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.getData())}}catch(e){r.e(e)}finally{r.f()}}return e}},{key:"appendParameterItems",value:function(e,t){this.appendParameterItemsWithPrefix(e,t,"")}},{key:"appendParameterItemsWithPrefix",value:function(e,t,r){if(this.type===_.type.map){var n,o=[],i=[],a=f(this.getChildren());try{for(a.s();!(n=a.n()).done;){var l=n.value;l.type===_.type.map?i.push(l):l.isAllowed(t)&&o.push(l)}}catch(e){a.e(e)}finally{a.f()}if(0<o.length){e.push({separator:!0,id:this.id,separatorClass:"rbroParameterGroup",name:r+this.name});var s,c=f(o);try{for(c.s();!(s=c.n()).done;){var u=s.value,d=r+this.name+"."+u.getName();e.push({name:d,nameLowerCase:d.toLowerCase(),id:u.getId(),description:""})}}catch(e){c.e(e)}finally{c.f()}}for(var p=0,h=i;p<h.length;p++)h[p].appendParameterItemsWithPrefix(e,t,r+this.name+".")}else this.isAllowed(t)&&e.push({name:r+this.name,nameLowerCase:this.name.toLowerCase(),id:this.id,description:""})}},{key:"isAllowed",value:function(e){return this.type!==_.type.array?!Array.isArray(e)||-1!==e.indexOf(this.type):Array.isArray(e)&&-1!==e.indexOf(this.type)}},{key:"appendFieldParameterItems",value:function(e,t,r){if(this.type===_.type.array){var n,o=!0,i=f(this.panelItem.getChildren());try{for(i.s();!(n=i.n()).done;){var a,l,s=n.value.getData();Array.isArray(t)&&-1===t.indexOf(s.getValue("type"))||(r?(o&&e.push({separator:!0,id:this.id,separatorClass:"rbroParameterRowGroup",name:this.rb.getLabel("parameterRowParams")}),a=s.getName(),e.push({name:a,nameLowerCase:a.toLowerCase(),id:s.getId(),description:""})):(l=this.name+"."+s.getName(),e.push({name:l,nameLowerCase:l.toLowerCase(),id:s.getId(),description:""})),o=!1)}}catch(e){i.e(e)}finally{i.f()}}var c;r&&null!==(c=this.getParent())&&c.appendFieldParameterItems(e,t,r)}},{key:"getParameterFields",value:function(){var e=[];if(this.type===_.type.array||this.type===_.type.simpleArray||this.type===_.type.map)if(this.type===_.type.simpleArray)e.push({name:"data",type:this.arrayItemType,parameter:this});else{var t,r=f(this.getChildren());try{for(r.s();!(t=r.n()).done;){var n=t.value;n.showOnlyNameType||e.push({name:n.getName(),type:n.getValue("type"),parameter:n})}}catch(e){r.e(e)}finally{r.f()}}return e}},{key:"getTestData",value:function(e){var t=null;try{t=JSON.parse(this.testData)}catch(e){}return this.type!==_.type.array&&this.type!==_.type.simpleArray&&this.type!==_.type.map||!t?null:_.getSanitizedTestData(this,t,e)}},{key:"getClassName",value:function(){return"Parameter"}}],[{key:"getSanitizedTestData",value:function(e,t,r){if(e.type===_.type.map)t&&Object.getPrototypeOf(t)===Object.prototype||(t={}),o=_.getSanitizedTestDataMap(e,t,r);else if(e.type===_.type.simpleArray)o=_.getSanitizedTestDataSimpleArray(e,t,r);else if(e.type===_.type.array){var n,o=[],i=f(t=Array.isArray(t)?t:[]);try{for(i.s();!(n=i.n()).done;){var a=n.value;a&&Object.getPrototypeOf(a)===Object.prototype||(a={}),o.push(_.getSanitizedTestDataMap(e,a,r))}}catch(e){i.e(e)}finally{i.f()}}return o}},{key:"getSanitizedTestDataMap",value:function(e,t,r){var n,o={},i=f(e.getChildren());try{for(i.s();!(n=i.n()).done;){var a,l=n.value;l.showOnlyNameType||(a=l.name in t?t[l.name]:null,l.type===_.type.array||l.type===_.type.map?o[l.name]=_.getSanitizedTestData(l,a,r):l.type===_.type.simpleArray?o[l.name]=_.getSanitizedTestDataSimpleArray(l,a,r):o[l.name]=_.getSanitizedTestDataValue(l.type,a,r))}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"getSanitizedTestDataSimpleArray",value:function(e,t,r){var n,o=[],i=f(t=Array.isArray(t)?t:[]);try{for(i.s();!(n=i.n()).done;){var a,l=n.value;Object.getPrototypeOf(l)===Object.prototype&&(a=_.getSanitizedTestDataValue(e.arrayItemType,l.data,r),r?o.push({data:a}):o.push(a))}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"getSanitizedTestDataValue",value:function(e,t,r){var n,o=null;return e===_.type.string?"string"==typeof t&&(o=t):e===_.type.number?"number"==typeof t?o=t:"string"==typeof t&&(n=Number(t.replaceAll(",",".")),isNaN(n)||(o=n)):e===_.type.boolean?o="boolean"==typeof t?t:Boolean(t):e===_.type.date?"string"==typeof t&&_.dateRegex.test(t)&&(o=t):e===_.type.image&&(o=t&&Object.getPrototypeOf(t)===Object.prototype&&"data"in t&&"filename"in t?r?t:t.data:r?{data:"",filename:""}:""),o}},{key:"removeIds",value:function(e){if(e.children){var t,r=f(e.children);try{for(r.s();!(t=r.n()).done;){var n=t.value;"id"in n&&delete n.id}}catch(e){r.e(e)}finally{r.f()}}}}]);var we=_;function _(e,t,r){u(this,_),this.rb=r,this.id=e,this.name=r.getLabel("parameter"),this.panelItem=null,this.errors=[],this.type=_.type.string,this.arrayItemType=_.type.string,this.eval=!r.getProperty("adminMode"),this.nullable=!1,this.pattern="",this.expression="",this.testData="",this.testDataBoolean=!1,this.testDataImage="",this.testDataImageFilename="",this.children=[],this.editable=r.getProperty("adminMode"),this.showOnlyNameType=!1,this.setInitialData(t)}function w(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return X(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?X(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}He=/^(\d{4})-(\d{1,2})-(\d{1,2})( (\d{1,2}):(\d{2})(:(\d{2}))?)?$/,"dateRegex"in($=we)?Object.defineProperty($,"dateRegex",{value:He,enumerable:!0,configurable:!0,writable:!0}):$.dateRegex=He,we.type={none:"none",string:"string",number:"number",boolean:"boolean",date:"date",image:"image",array:"array",simpleArray:"simple_array",map:"map",sum:"sum",average:"average"};e(E,[{key:"setInitialData",value:function(e){for(var t in e)e.hasOwnProperty(t)&&this.hasOwnProperty(t)&&(this[t]=e[t]);this.x=""+this.x,this.y=""+this.y,this.width=""+this.width,this.height=""+this.height,this.xVal=ve(this.x),this.yVal=ve(this.y),this.widthVal=ve(this.width),this.heightVal=ve(this.height)}},{key:"setup",value:function(e){var t=this.getContainer();null!==t&&(t=t.getContentSize(),this.xVal+this.widthVal>t.width&&(this.xVal=t.width-this.widthVal),this.xVal<0&&(this.xVal=0),this.yVal+this.heightVal>t.height&&(this.yVal=t.height-this.heightVal),this.yVal<0&&(this.yVal=0),this.x=""+this.xVal,this.y=""+this.yVal)}},{key:"registerContainerEventHandlers",value:function(){var r=this;this.el.addEventListener("dblclick",function(e){r.rb.isSelectedObject(r.id)||(r.rb.selectObject(r.id,!0),e.stopPropagation())}),this.el.addEventListener("mousedown",function(e){e.shiftKey?(r.rb.deselectObject(r.id),e.stopPropagation()):r.rb.isSelectedObject(r.id)?(r.rb.getDocument().startDrag(e.pageX,e.pageY,r.id,r.containerId,r.getElementType(),E.dragType.element),e.stopPropagation()):r.rb.deselectAll(!0)}),this.el.addEventListener("touchstart",function(e){var t;r.rb.isSelectedObject(r.id)&&(t=c(e),r.rb.getDocument().startDrag(t.x,t.y,r.id,r.containerId,r.getElementType(),E.dragType.element)),e.preventDefault()}),this.el.addEventListener("touchmove",function(e){r.rb.getDocument().processDrag(e)}),this.el.addEventListener("touchend",function(e){r.rb.getDocument().stopDrag()})}},{key:"registerEventHandlers",value:function(){var r=this;this.el.addEventListener("dblclick",function(e){r.handleDoubleClick(e)}),this.el.addEventListener("mousedown",function(e){r.handleClick(e,!1)}),this.el.addEventListener("touchstart",function(e){var t;r.rb.isSelectedObject(r.id)?(t=c(e),r.rb.getDocument().startDrag(t.x,t.y,r.id,r.containerId,r.getElementType(),E.dragType.element),e.preventDefault()):r.handleClick(e,!0)}),this.el.addEventListener("touchmove",function(e){r.rb.isSelectedObject(r.id)&&r.rb.getDocument().processDrag(e)}),this.el.addEventListener("touchend",function(e){r.rb.isSelectedObject(r.id)&&r.rb.getDocument().stopDrag()})}},{key:"handleDoubleClick",value:function(e){this.handleClick(e,!0)}},{key:"handleClick",value:function(e,t){if(this.rb.isSelectedObject(this.id))e.shiftKey?this.rb.deselectObject(this.id):t||this.rb.getDocument().startDrag(e.pageX,e.pageY,this.id,this.containerId,this.getElementType(),E.dragType.element),e.stopPropagation();else if(t||!this.isContainerSelected()){var r=!0;if(e.shiftKey){t=[];this.appendContainerChildren(t);for(var n=0,o=t;n<o.length;n++){var i=o[n];if(this.rb.isSelectedObject(i.getId())){r=!1;break}}}r&&this.rb.selectObject(this.id,!e.shiftKey),e.stopPropagation()}}},{key:"getId",value:function(){return this.id}},{key:"getMaxId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getPanelItem",value:function(){return this.panelItem}},{key:"setPanelItem",value:function(e){this.panelItem=e}},{key:"getContainerId",value:function(){return this.containerId}},{key:"getContainer",value:function(){return this.rb.getDataObject(this.getContainerId())}},{key:"getLinkedContainer",value:function(){return null!==this.linkedContainerId?this.rb.getDataObject(this.linkedContainerId):null}},{key:"getLinkedContainers",value:function(){var e=this.getLinkedContainer();return e?[e]:[]}},{key:"getContainerContentSize",value:function(){var e=this.getContainer();return null!==e?e.getContentSize():{width:0,height:0}}},{key:"appendToContainer",value:function(){var e=this.getContainer();null!==e&&e.appendElement(this.el)}},{key:"isContainerSelected",value:function(){var e=this.getContainer();return null!==e&&e.isSelected()}},{key:"appendContainerChildren",value:function(e){if(null!==this.linkedContainerId&&null!==this.panelItem){var t,r=w(this.panelItem.getChildren());try{for(r.s();!(t=r.n()).done;){var n=t.value;n.getData()instanceof E&&(e.push(n.getData()),n.getData().appendContainerChildren(e))}}catch(e){r.e(e)}finally{r.f()}}}},{key:"getAbsolutePosition",value:function(){var e={x:this.xVal,y:this.yVal},t=this.getContainer();return null!==t&&(t=t.getOffset(),e.x+=t.x,e.y+=t.y),e}},{key:"checkBounds",value:function(e,t,r,n,o,i){(e=(e=e+r>o.width?o.width-r:e)<0?0:e)+r>o.width&&(r=o.width-e),(t=(t=t+n>o.height?o.height-n:t)<0?0:t)+n>o.height&&(n=o.height-t),e!==this.xVal&&this.hasProperty("x")&&((o=new me(this.id,"x",""+e,me.type.text,this.rb)).disableSelect(),i.addCommand(o)),t!==this.yVal&&this.hasProperty("y")&&((o=new me(this.id,"y",""+t,me.type.text,this.rb)).disableSelect(),i.addCommand(o)),r!==this.getDisplayWidth()&&this.hasProperty("width")&&this.addCommandsForChangedWidth(r,!0,i),n!==this.getDisplayHeight()&&this.hasProperty("height")&&((t=new me(this.id,"height",""+n,me.type.text,this.rb)).disableSelect(),i.addCommand(t));o=this.getLinkedContainer();if(null!==o&&null!==o.getPanelItem()){var a,l={width:r,height:n},s=w(o.getPanelItem().getChildren());try{for(s.s();!(a=s.n()).done;){var c,u=a.value;u.getData()instanceof E&&(c=u.getData()).checkBounds(c.getValue("xVal"),c.getValue("yVal"),c.getDisplayWidth(),c.getDisplayHeight(),l,i)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"getValue",value:function(e){return this[e]}},{key:"setValue",value:function(e,t){if(this[e]=t,"x"===e||"y"===e||"width"===e||"height"===e)this[e+"Val"]=ve(t),this.updateDisplay();else if("containerId"===e){null!==this.el&&(this.el.parentElement.removeChild(this.el),this.appendToContainer());t=this.getLinkedContainers();if(0<t.length){var r,n=this.getContainer(),o=w(t);try{for(o.s();!(r=o.n()).done;)r.value.setParent(n)}catch(e){o.e(e)}finally{o.f()}}var i,a=w(this.rb.getContainers());try{for(a.s();!(i=a.n()).done;)i.value.initLevel()}catch(e){a.e(e)}finally{a.f()}this.updateDisplay()}else-1!==["styleId","bold","italic","underline","strikethrough","horizontalAlignment","verticalAlignment","textColor","backgroundColor","font","fontSize","lineSpacing","borderColor","borderWidth","borderAll","borderLeft","borderTop","borderRight","borderBottom","paddingLeft","paddingTop","paddingRight","paddingBottom"].indexOf(e)&&(this.updateStyle(),-1!==["borderWidth","borderAll","borderLeft","borderTop","borderRight","borderBottom","paddingLeft","paddingTop","paddingRight","paddingBottom"].indexOf(e)&&this.updateDisplay())}},{key:"getUpdateValue",value:function(e,t){return t}},{key:"getDisplayWidth",value:function(){return this.widthVal}},{key:"getDisplayHeight",value:function(){return this.heightVal}},{key:"getFields",value:function(){var e=this.getProperties();return e.splice(0,0,"id","containerId"),e}},{key:"getProperties",value:function(){return[]}},{key:"hasProperty",value:function(e){return-1!==this.getProperties().indexOf(e)}},{key:"getElementType",value:function(){return E.type.none}},{key:"updateDisplay",value:function(){this.updateDisplayInternal(this.xVal,this.yVal,this.widthVal,this.heightVal)}},{key:"updateDisplayInternal",value:function(e,t,r,n){null!==this.el&&(this.el.style.left=this.rb.toPixel(e),this.el.style.top=this.rb.toPixel(t),this.el.style.width=this.rb.toPixel(r),this.el.style.height=this.rb.toPixel(n))}},{key:"updateStyle",value:function(){}},{key:"updateChangedStyle",value:function(e){ve(this.styleId)===e&&this.updateStyle()}},{key:"getDragDiff",value:function(e,t,r,n){var o,i,a,l={x:0,y:0},s=this.xVal,c=this.yVal,u=s+this.getDisplayWidth(),d=c+this.getDisplayHeight(),p=this.getMinWidth(),h=this.getMaxWidth(),f=this.getMinHeight();return r===E.dragType.element?(o=s+e,0!==n&&(o=P(o,n)),i=c+t,0!==n&&(i=P(i,n)),l.x=o-s,l.y=i-c):(a=this.getContainerContentSize(),r!==E.dragType.sizerNW&&r!==E.dragType.sizerN&&r!==E.dragType.sizerNE||(i=c+t,d-f<(i=0!==n?P(i,n):i)?i=0!==n?A(d-f,n):d-f:i<0&&(i=0),l.y=i-c),r!==E.dragType.sizerNE&&r!==E.dragType.sizerE&&r!==E.dragType.sizerSE||(o=u+e,(o=0!==n?P(o,n):o)<s+p?o=0!==n?D(s+p,n):s+p:h<o&&(o=h),l.x=o-u),r!==E.dragType.sizerSE&&r!==E.dragType.sizerS&&r!==E.dragType.sizerSW||(i=d+t,(i=0!==n?P(i,n):i)<c+f?i=0!==n?D(c+f,n):c+f:i>a.height&&(i=a.height),l.y=i-d),r!==E.dragType.sizerSW&&r!==E.dragType.sizerW&&r!==E.dragType.sizerNW||(o=s+e,u-p<(o=0!==n?P(o,n):o)?o=0!==n?A(u-p,n):u-p:o<0&&(o=0),l.x=o-s)),l}},{key:"updateDrag",value:function(e,t,r,n,o){var i=this.xVal,a=this.yVal,l=i+this.getDisplayWidth(),s=a+this.getDisplayHeight(),c=this.getMaxWidth(),u=this.getContainerContentSize(),t=(r===E.dragType.element?(l=(i+=e)+this.getDisplayWidth(),s=(a+=t)+this.getDisplayHeight()):(r!==E.dragType.sizerNW&&r!==E.dragType.sizerN&&r!==E.dragType.sizerNE||(a+=t),r!==E.dragType.sizerNE&&r!==E.dragType.sizerE&&r!==E.dragType.sizerSE||(l+=e),r!==E.dragType.sizerSE&&r!==E.dragType.sizerS&&r!==E.dragType.sizerSW||(s+=t),r!==E.dragType.sizerSW&&r!==E.dragType.sizerW&&r!==E.dragType.sizerNW||(i+=e),c<(l=l<(i=i<0?0:i)?i:l)&&(l=c),(s=s<(a=a<0?0:a)?a:s)>u.height&&(s=u.height)),l-i),r=s-a;null!==o?(e=!1,c=this.getContainer(),u={width:0,height:0},null!==n&&n.getId()!==this.getContainerId()?(e=!0,u=n.getContentSize(),null!==c&&(i-=(l=n.getOffsetTo(c)).x,a-=l.y)):u=c.getContentSize(),!e||n.isElementAllowed(this.getElementType())?(s=o.getCommands().length,this.checkBounds(i,a,t,r,u,o),e&&(l=new me(this.id,"containerId",n.getId(),me.type.internal,this.rb),o.addCommand(l),l=new S(this.getPanelItem(),n.getPanelItem(),n.getPanelItem().getChildren().length,this.rb),o.addCommand(l)),o.getCommands().length===s&&this.updateDisplay()):this.updateDisplay()):this.updateDisplayInternal(i,a,t,r)}},{key:"select",value:function(){var n=this;if(null!==this.el){var t,o=this.getSizerContainerElement(),e=w(this.getSizers());try{for(e.s();!(t=e.n()).done;)!function(){var e=t.value,r=e,e=ge("div",{class:"rbroSizer rbroSizer".concat(e)});e.addEventListener("mousedown",function(e){n.rb.getDocument().startDrag(e.pageX,e.pageY,n.id,n.containerId,n.getElementType(),E.dragType["sizer"+r]),e.stopPropagation()}),e.addEventListener("touchstart",function(e){var t;n.rb.isSelectedObject(n.id)&&(t=c(e),n.rb.getDocument().startDrag(t.x,t.y,n.id,n.containerId,n.getElementType(),E.dragType["sizer"+r])),e.preventDefault(),e.stopPropagation()}),e.addEventListener("touchmove",function(e){n.rb.getDocument().processDrag(e)}),e.addEventListener("touchend",function(e){n.rb.getDocument().stopDrag()}),o.append(e)}()}catch(n){e.e(n)}finally{e.f()}this.el.classList.add("rbroSelected"),this.el.style.zIndex="10"}this.selected=!0}},{key:"deselect",value:function(){if(null!==this.el){var e,t=w(this.getSizerContainerElement().querySelectorAll(".rbroSizer"));try{for(t.s();!(e=t.n()).done;)e.value.remove()}catch(e){t.e(e)}finally{t.f()}this.el.style.zIndex="",this.el.classList.remove("rbroSelected")}this.selected=!1}},{key:"getSizers",value:function(){return["N","NE","E","SE","S","SW","W","NW"]}},{key:"hasBorderSettings",value:function(){return!1}},{key:"isAreaSelectionAllowed",value:function(){return!0}},{key:"isDraggingAllowed",value:function(){return!0}},{key:"isDroppingAllowed",value:function(){return!0}},{key:"getMinWidth",value:function(){return 20}},{key:"getMaxWidth",value:function(){return this.getContainerContentSize().width}},{key:"getMinHeight",value:function(){return 20}},{key:"createElement",value:function(){}},{key:"getElement",value:function(){return this.el}},{key:"getSizerContainerElement",value:function(){return this.el}},{key:"getContentElement",value:function(){return null}},{key:"hasDataSource",value:function(){return!1}},{key:"getDataSourceParameterName",value:function(){if(this.hasDataSource()){var e=this.getValue("dataSource").trim();if(3<=e.length&&"${"===e.substr(0,2)&&"}"===e.charAt(e.length-1))return e.substring(2,e.length-1)}return null}},{key:"getAllDataSources",value:function(){var e=[],t=[];this.getAllDataSourceParameterNames(t,null);for(var r=t.length-1;0<=r;r--){var n,o=t[r],i=null,a=w(e);try{for(a.s();!(n=a.n()).done;){var l,s=w(n.value.parameters);try{for(s.s();!(l=s.n()).done;){var c=l.value;if(c.getName()===o){i=c;break}}}catch(e){s.e(e)}finally{s.f()}}}catch(e){a.e(e)}finally{a.f()}null!==(i=null===i?this.rb.getParameterByName(o):i)&&i.getValue("type")===we.type.array&&e.unshift({name:o,parameters:i.getChildren()})}return e}},{key:"getAllDataSourceParameterNames",value:function(e,t){this.getElementType()!==E.type.table&&this.getElementType()!==E.type.section||!t||t.getValue("bandType")!==b.bandType.content||null!==(t=this.getDataSourceParameterName())&&e.push(t);var t=this.getPanelItem();null!==t&&null!==(t=t.getParent())&&t.getData()instanceof E&&t.getData().getAllDataSourceParameterNames(e,this)}},{key:"addCommandsForChangedParameterName",value:function(e,t,r){}},{key:"addCommandForChangedParameterName",value:function(e,t,r,n){var o=e.getParent(),i=this.getAllDataSources(),a=null,l=null;if(null!==o&&o.getValue("type")===we.type.array){var s,c=w(i);try{for(c.s();!(s=c.n()).done;)if(-1!==s.value.parameters.indexOf(e)){a="${"+e.getName()+"}",l="${"+t+"}";break}}catch(e){c.e(e)}finally{c.f()}}else if(null!==o&&o.getValue("type")===we.type.map)a="${"+o.getName()+"."+e.getName()+"}",l="${"+o.getName()+"."+t+"}";else if(e.getValue("type")===we.type.map)a="${"+e.getName()+".",l="${"+t+".";else{var u,d=!1,p=w(i);try{for(p.s();!(u=p.n()).done;){var h,f=w(u.value.parameters);try{for(f.s();!(h=f.n()).done;)if(h.value.getName()===e.getName()){d=!0;break}}catch(e){f.e(e)}finally{f.f()}}}catch(e){p.e(e)}finally{p.f()}d||(a="${"+e.getName()+"}",l="${"+t+"}")}null!==a&&null!==l&&(o=this.getValue(r),i=me.type.text,"object"===k(o)&&(o=JSON.stringify(o),i=me.type.richText),-1!==o.indexOf(a)&&(o=L(o,a,l),i===me.type.richText&&(o=JSON.parse(o)),r=new me(this.id,r,o,i,this.rb),n.addCommand(r)))}},{key:"addCommandsForDelete",value:function(e){var t=[];this.appendContainerChildren(t),t.push(this);for(var r=0,n=t;r<n.length;r++){var o=n[r],o=new te(!1,o.getPanelItem().getPanelName(),o.toJS(),o.getId(),o.getContainerId(),o.getPanelItem().getSiblingPosition(),this.rb);e.addCommand(o)}}},{key:"addCommandsForChangedWidth",value:function(e,t,r){e=new me(this.id,"width",""+e,me.type.text,this.rb);t&&e.disableSelect(),r.addCommand(e)}},{key:"addChildren",value:function(e){}},{key:"addError",value:function(e){this.errors.push(e)}},{key:"clearErrors",value:function(){this.errors=[]}},{key:"getErrors",value:function(){return this.errors}},{key:"remove",value:function(){null!==this.el&&(this.el.remove(),this.el=null),null!==this.panelItem&&(this.panelItem.getParent().removeChild(this.panelItem),this.panelItem=null)}},{key:"toJS",value:function(){var e,t={elementType:this.getElementType()},r=w(this.getFields());try{for(r.s();!(e=r.n()).done;){var n=e.value;-1===["x","y","width","height"].indexOf(n)?t[n]=this.getValue(n):t[n]=this.getValue(n+"Val")}}catch(e){r.e(e)}finally{r.f()}return t}}]);var Q=E;function E(e,t,r,n,o){u(this,E),this.rb=o,this.id=t,this.name=e,this.panelItem=null,this.x="0",this.y="0",this.width=""+r,this.height=""+n,this.containerId=null,this.linkedContainerId=null,this.printIf="",this.removeEmptyElement=!1,this.el=null,this.selected=!1,this.xVal=0,this.yVal=0,this.widthVal=0,this.heightVal=0,this.errors=[]}Q.type={none:"none",text:"text",image:"image",line:"line",table:"table",pageBreak:"page_break",tableText:"table_text",barCode:"bar_code",frame:"frame",section:"section"},Q.dragType={none:-1,element:0,sizerN:1,sizerNE:2,sizerE:3,sizerSE:4,sizerS:5,sizerSW:6,sizerW:7,sizerNW:8};var $=_t(5961),Z=_t.n($),J=_t(2592),ie=function(){t(i,Q);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t,r){return u(this,i),(e=o.call(this,r.getLabel("docElementImage"),e,80,80,r)).elBarCode=null,e.elContent=null,e.content="",e.format="CODE128",e.displayValue=!1,e.barWidth="2",e.guardBar=!1,e.errorCorrectionLevel="M",e.rotate=!1,e.spreadsheet_hide=!1,e.spreadsheet_column="",e.spreadsheet_colspan="",e.spreadsheet_addEmptyRow=!1,e.setInitialData(t),e.name=e.rb.getLabel("docElementBarCode"),e}return e(i,[{key:"setup",value:function(e){R(B(i.prototype),"setup",this).call(this,e),this.createElement(),""!==this.content&&this.updateBarCode(),this.updateDisplay(),this.updateStyle()}},{key:"setValue",value:function(e,t){R(B(i.prototype),"setValue",this).call(this,e,t),"content"!==e&&"format"!==e&&"displayValue"!==e&&"barWidth"!==e&&"guardBar"!==e&&"width"!==e&&"height"!==e&&"errorCorrectionLevel"!==e&&"rotate"!==e||(this.updateBarCode(),this.updateDisplay(),"rotate"===e&&this.rb.isSelectedObject(this.getId())&&(this.rb.deselectObject(this.getId()),this.rb.selectObject(this.getId())))}},{key:"getProperties",value:function(){return["x","y","width","height","content","format","displayValue","barWidth","guardBar","errorCorrectionLevel","printIf","removeEmptyElement","rotate","spreadsheet_hide","spreadsheet_column","spreadsheet_colspan","spreadsheet_addEmptyRow"]}},{key:"getElementType",value:function(){return Q.type.barCode}},{key:"updateDisplayInternal",value:function(e,t,r,n){null!==this.el&&(this.el.style.left=this.rb.toPixel(e),this.el.style.top=this.rb.toPixel(t),this.el.style.width=this.rb.toPixel(r),this.el.style.height=this.rb.toPixel(n))}},{key:"getSizers",value:function(){return"QRCode"!==this.format&&this.rotate?["N","NE","E","SE","S","SW","W","NW"]:["N","S"]}},{key:"createElement",value:function(){this.el=ge("div",{id:"rbro_el".concat(this.id),class:"rbroDocElement rbroBarCodeElement"}),this.elContent=ge("div",{id:"rbro_el_content".concat(this.id),style:"height: 100%"}),this.elBarCode=ge("canvas",{id:"rbro_el_barcode".concat(this.id)}),this.elContent.append(this.elBarCode),this.el.append(this.elContent),this.appendToContainer(),this.updateBarCode(),R(B(i.prototype),"registerEventHandlers",this).call(this)}},{key:"remove",value:function(){R(B(i.prototype),"remove",this).call(this)}},{key:"updateBarCode",value:function(){if("QRCode"===this.format){this.widthVal=this.heightVal,this.width=""+this.widthVal;var e=this.content,t=(""===e&&(e="https://www.reportbro.com"),{width:this.widthVal,margin:0,errorCorrectionLevel:this.errorCorrectionLevel});this.clearRotateStyle(),J.toCanvas(this.elBarCode,e,t)}else{var t=!1,r=this.rotate?this.widthVal:this.heightVal,r=(this.displayValue&&(r-=22),"EAN8"!==this.format&&"EAN13"!==this.format||!this.guardBar||(r-=12),{format:this.format,height:r,margin:0,displayValue:this.displayValue,width:2}),n=("EAN8"===this.format||"EAN13"===this.format?r.flat=!this.guardBar:"UPC"===this.format&&(r.flat=!0),ve(this.barWidth));if(n&&(r.width=n),this.elBarCode.style.width="",(this.elBarCode.style.height="")!==this.content&&-1===this.content.indexOf("${"))try{Z()("#"+this.elBarCode.id,this.content,r),t=!0}catch(e){}t||(n="","CODE39"===this.format||"CODE128"===this.format?n="12345678":"EAN13"===this.format?n="5901234123457":"EAN8"===this.format?n="96385074":"EAN5"===this.format?n="12345":"EAN2"===this.format?n="12":"ITF14"===this.format?n="12345678901231":"UPC"===this.format?n="036000291452":"MSI"!==this.format&&"MSI10"!==this.format&&"MSI11"!==this.format&&"MSI1010"!==this.format&&"MSI1110"!==this.format&&"pharmacode"!==this.format||(n="1234"),Z()("#"+this.elBarCode.id,n,r)),this.rotate?(n=-(t=-(this.elBarCode.clientWidth-this.widthVal)/2),this.elBarCode.style.transform="translate(".concat(t,"px, ").concat(n,"px) rotate(90deg)"),this.elContent.style.overflow="hidden"):(this.widthVal=this.elBarCode.clientWidth,this.width=""+this.widthVal,this.clearRotateStyle())}}},{key:"clearRotateStyle",value:function(){this.elBarCode.style.transform="",this.elContent.style.overflow=""}},{key:"addCommandsForChangedParameterName",value:function(e,t,r){this.addCommandForChangedParameterName(e,t,"content",r),this.addCommandForChangedParameterName(e,t,"printIf",r)}},{key:"getClassName",value:function(){return"BarCodeElement"}}]),i}(),ae=function(){t(i,s);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t,r){return u(this,i),o.call(this,e,t,r)}return e(i,[{key:"setup",value:function(){this.el=this.rb.getDocument().getElement(this.band)}},{key:"isElementAllowed",value:function(e){return e!==Q.type.pageBreak&&e!==Q.type.frame&&e!==Q.type.section}},{key:"getOffset",value:function(){var e,t=0,r=0;return null!==this.owner&&(t=this.owner.getValue("xVal"),r=this.owner.getValue("yVal")),null!==this.parent&&(t+=(e=this.parent.getOffset()).x,r+=e.y),{x:t,y:r}}},{key:"getSize",value:function(){var e=0,t=0;return null!==this.owner&&(e=this.owner.getValue("widthVal"),t=this.owner.getValue("heightVal")),{width:e,height:t}}},{key:"getContentSize",value:function(){var e,t=0,r=0;return null!==this.owner&&(t=this.owner.getValue("widthVal"),r=this.owner.getValue("heightVal"),e=this.owner.getValue("borderWidthVal"),this.owner.getValue("borderLeft")&&(t-=e),this.owner.getValue("borderRight")&&(t-=e),this.owner.getValue("borderTop")&&(r-=e),this.owner.getValue("borderBottom")&&(r-=e)),{width:t,height:r}}}]),i}(),le=function(){t(i,Q);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t,r){return u(this,i),(e=o.call(this,r.getLabel("docElementFrame"),e,100,100,r)).frame=null,e.setupComplete=!1,e.elContent=null,e.elContentFrame=null,e.label="",e.backgroundColor="",e.borderAll=!1,e.borderLeft=!1,e.borderTop=!1,e.borderRight=!1,e.borderBottom=!1,e.borderColor="#000000",e.borderWidth="1",e.shrinkToContentHeight=!1,e.spreadsheet_hide=!1,e.spreadsheet_column="",e.spreadsheet_addEmptyRow=!1,e.setInitialData(t),e.borderWidthVal=ve(e.borderWidth),e}return e(i,[{key:"setup",value:function(e){this.borderWidthVal=ve(this.borderWidth),R(B(i.prototype),"setup",this).call(this),this.createElement(),this.updateDisplay(),null===this.linkedContainerId&&(this.linkedContainerId=this.rb.getUniqueId()),this.frame=new ae(this.linkedContainerId,"frame_"+this.linkedContainerId,this.rb),this.frame.init(this),this.rb.addContainer(this.frame),this.setupComplete=!0,this.updateStyle(),this.updateName(),e&&this.panelItem.open()}},{key:"registerEventHandlers",value:function(){R(B(i.prototype),"registerContainerEventHandlers",this).call(this)}},{key:"getMaxId",value:function(){return this.linkedContainerId}},{key:"setValue",value:function(e,t){-1!==e.indexOf("border")&&(this[e]=t,"borderWidth"===e&&(this.borderWidthVal=ve(t)),Y.setBorderValue(this,e,"",t,this.rb)),R(B(i.prototype),"setValue",this).call(this,e,t),"label"===e&&this.updateName()}},{key:"updateDisplayInternal",value:function(e,t,r,n){null!==this.el&&(this.el.style.left=this.rb.toPixel(e),this.el.style.top=this.rb.toPixel(t),this.el.style.width=this.rb.toPixel(r),this.el.style.height=this.rb.toPixel(n)),this.borderLeft&&(r-=this.borderWidthVal),this.borderRight&&(r-=this.borderWidthVal),this.borderTop&&(n-=this.borderWidthVal),this.borderBottom&&(n-=this.borderWidthVal),this.elContentFrame.style.width=this.rb.toPixel(r),this.elContentFrame.style.height=this.rb.toPixel(n)}},{key:"updateStyle",value:function(){var e;this.getValue("borderLeft")||this.getValue("borderTop")||this.getValue("borderRight")||this.getValue("borderBottom")?(e=this.getValue("borderTop")?"solid":"none",e=(e=(e+=this.getValue("borderRight")?" solid":" none")+(this.getValue("borderBottom")?" solid":" none"))+(this.getValue("borderLeft")?" solid":" none"),this.elContent.style.borderWidth=this.getValue("borderWidthVal")+"px",this.elContent.style.borderColor=this.getValue("borderColor")):e="none",this.elContent.style.borderStyle=e,this.el.style.backgroundColor=this.getValue("backgroundColor")}},{key:"getFields",value:function(){var e=this.getProperties();return e.splice(0,0,"id","containerId","linkedContainerId"),e}},{key:"getProperties",value:function(){return["label","x","y","width","height","backgroundColor","borderAll","borderLeft","borderTop","borderRight","borderBottom","borderColor","borderWidth","printIf","removeEmptyElement","shrinkToContentHeight","alignToPageBottom","spreadsheet_hide","spreadsheet_column","spreadsheet_addEmptyRow"]}},{key:"getElementType",value:function(){return Q.type.frame}},{key:"isAreaSelectionAllowed",value:function(){return!1}},{key:"createElement",value:function(){this.el=ge("div",{id:"rbro_el".concat(this.id),class:"rbroDocElement rbroFrameElement rbroElementContainer"}),this.elContent=ge("div",{id:"rbro_el_content".concat(this.id),class:"rbroContentContainerHelper"}),this.elContentFrame=ge("div",{id:"rbro_el_content_frame".concat(this.id),class:"rbroDocElementContentFrame"}),this.elContent.append(this.elContentFrame),this.el.append(this.elContent),this.appendToContainer(),this.registerEventHandlers()}},{key:"getContentElement",value:function(){return this.elContentFrame}},{key:"remove",value:function(){R(B(i.prototype),"remove",this).call(this),this.rb.deleteContainer(this.frame)}},{key:"updateName",value:function(){""!==this.label.trim()?this.name=this.label:this.name=this.rb.getLabel("docElementFrame"),document.getElementById("rbro_menu_item_name".concat(this.id)).textContent=this.name}},{key:"addCommandsForChangedParameterName",value:function(e,t,r){this.addCommandForChangedParameterName(e,t,"printIf",r)}},{key:"getClassName",value:function(){return"FrameElement"}}]),i}(),se=function(){t(i,Q);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t,r){return u(this,i),(e=o.call(this,r.getLabel("docElementImage"),e,80,80,r)).source="",e.image="",e.imageWidth=0,e.imageHeight=0,e.imageRatio=0,e.imageFilename="",e.elImg=null,e.elContent=null,e.horizontalAlignment=Y.alignment.left,e.verticalAlignment=Y.alignment.top,e.backgroundColor="",e.link="",e.spreadsheet_hide=!1,e.spreadsheet_column="",e.spreadsheet_addEmptyRow=!1,e.setInitialData(t),e}return e(i,[{key:"setup",value:function(e){R(B(i.prototype),"setup",this).call(this,e),this.createElement(),this.setImage(),this.updateDisplay(),this.updateStyle(),this.updateName()}},{key:"setValue",value:function(e,t){R(B(i.prototype),"setValue",this).call(this,e,t),"source"!==e&&"imageFilename"!==e||this.updateName(),"source"!==e&&"image"!==e||this.setImage()}},{key:"getProperties",value:function(){return["x","y","width","height","source","image","imageFilename","horizontalAlignment","verticalAlignment","backgroundColor","printIf","removeEmptyElement","link","spreadsheet_hide","spreadsheet_column","spreadsheet_addEmptyRow"]}},{key:"getElementType",value:function(){return Q.type.image}},{key:"updateDisplayInternal",value:function(e,t,r,n){null!==this.el&&(this.el.style.left=this.rb.toPixel(e),this.el.style.top=this.rb.toPixel(t),this.el.style.width=this.rb.toPixel(r),this.el.style.height=this.rb.toPixel(n),(t=e=0)!==this.imageRatio&&(e=this.imageWidth<r?this.imageWidth:r,t=this.imageHeight<n?this.imageHeight:n,e!==this.imageWidth||t!==this.imageHeight)&&((n=Math.floor(t*this.imageRatio))<r?e=n:t=Math.floor(e/this.imageRatio)),this.elImg.style.width=this.rb.toPixel(e),this.elImg.style.height=this.rb.toPixel(t))}},{key:"updateStyle",value:function(){var e=this.getValue("horizontalAlignment"),t=this.getValue("verticalAlignment"),r="rbroDocElementAlign"+e.charAt(0).toUpperCase()+e.slice(1),n="rbroDocElementVAlign"+t.charAt(0).toUpperCase()+t.slice(1);this.elContent.style.textAlign=e,this.elContent.style.verticalAlign=t,this.elContent.style.backgroundColor=this.getValue("backgroundColor"),this.elContent.className="",this.elContent.classList.add("rbroContentContainerHelper"),this.elContent.classList.add(r),this.elContent.classList.add(n)}},{key:"createElement",value:function(){var t=this;this.el=ge("div",{id:"rbro_el".concat(this.id),class:"rbroDocElement rbroImageElement"}),this.elImg=ge("img",{src:""}),this.elImg.addEventListener("load",function(e){t.imageWidth=t.elImg.naturalWidth,t.imageHeight=t.elImg.naturalHeight,0!==t.imageHeight?t.imageRatio=t.imageWidth/t.imageHeight:t.imageRatio=0,t.updateDisplay()}),this.elContent=ge("div",{id:"rbro_el_content".concat(this.id),class:"rbroContentContainerHelper"}),this.elContent.append(this.elImg),this.el.append(this.elContent),this.appendToContainer(),R(B(i.prototype),"registerEventHandlers",this).call(this)}},{key:"remove",value:function(){this.elImg=null,R(B(i.prototype),"remove",this).call(this)}},{key:"setImage",value:function(){this.elImg.setAttribute("src",""),this.source.startsWith("https://")||this.source.startsWith("http://")?this.elImg.setAttribute("src",this.source):""!==this.image?this.elImg.setAttribute("src",this.image):(this.imageWidth=0,this.imageHeight=0,this.imageRatio=0,this.updateDisplay())}},{key:"updateName",value:function(){""!==this.getValue("imageFilename").trim()?this.name=this.getValue("imageFilename"):""!==this.getValue("source").trim()?this.name=this.getValue("source"):this.name=this.rb.getLabel("docElementImage");var e=document.getElementById("rbro_menu_item_name".concat(this.id));e.textContent=this.name,e.setAttribute("title",this.name)}},{key:"addCommandsForChangedParameterName",value:function(e,t,r){this.addCommandForChangedParameterName(e,t,"source",r),this.addCommandForChangedParameterName(e,t,"printIf",r)}},{key:"getClassName",value:function(){return"ImageElement"}}]),i}(),ce=function(){t(i,Q);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t,r){return u(this,i),(e=o.call(this,r.getLabel("docElementLine"),e,100,1,r)).color="#000000",e.setInitialData(t),e}return e(i,[{key:"setup",value:function(e){R(B(i.prototype),"setup",this).call(this,e),this.createElement(),this.updateDisplay(),this.updateStyle()}},{key:"setValue",value:function(e,t){R(B(i.prototype),"setValue",this).call(this,e,t),"color"===e&&this.updateStyle()}},{key:"getProperties",value:function(){return["x","y","width","height","color","printIf"]}},{key:"getElementType",value:function(){return Q.type.line}},{key:"updateStyle",value:function(){this.el.style.backgroundColor=this.getValue("color")}},{key:"getSizers",value:function(){return["E","W"]}},{key:"createElement",value:function(){this.el=ge("div",{id:"rbro_el".concat(this.id),class:"rbroDocElement rbroLineElement"}),this.appendToContainer(),R(B(i.prototype),"registerEventHandlers",this).call(this)}},{key:"addCommandsForChangedParameterName",value:function(e,t,r){this.addCommandForChangedParameterName(e,t,"printIf",r)}},{key:"getClassName",value:function(){return"LineElement"}}]),i}(),ue=function(){t(i,Q);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t,r){return u(this,i),(e=o.call(this,r.getLabel("docElementPageBreak"),e,-1,1,r)).setInitialData(t),e}return e(i,[{key:"setup",value:function(e){R(B(i.prototype),"setup",this).call(this,e),this.createElement(),this.updateDisplay(),this.updateStyle()}},{key:"setValue",value:function(e,t){R(B(i.prototype),"setValue",this).call(this,e,t)}},{key:"getProperties",value:function(){return["y","printIf"]}},{key:"getElementType",value:function(){return Q.type.pageBreak}},{key:"updateDisplayInternal",value:function(e,t,r,n){null!==this.el&&(this.el.style.left=this.rb.toPixel(0),this.el.style.top=this.rb.toPixel(t),this.el.style.width="100%",this.el.style.height=this.rb.toPixel(1))}},{key:"getSizers",value:function(){return[]}},{key:"createElement",value:function(){this.el=ge("div",{id:"rbro_el".concat(this.id),class:"rbroDocElement rbroPageBreakElement"}),this.appendToContainer(),R(B(i.prototype),"registerEventHandlers",this).call(this)}},{key:"getClassName",value:function(){return"PageBreakElement"}}]),i}(),de=function(){t(a,Q);r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,i=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function a(e,t,r,n){u(this,a);var o=r===b.bandType.header?n.getLabel("bandHeader"):r===b.bandType.footer?n.getLabel("bandFooter"):n.getLabel("bandContent");return(o=i.call(this,o,e,0,100,n)).setupComplete=!1,o.band=null,o.bandType=r,o.repeatHeader=!1,o.alwaysPrintOnSamePage=!0,o.shrinkToContentHeight=!1,o.parentId=t.parentId,o.heightVal=0,o.visible=r===b.bandType.content,o.setInitialData(t),o}return e(a,[{key:"setup",value:function(){this.createElement(),this.updateDisplay(),this.updateStyle(),null===this.linkedContainerId&&(this.linkedContainerId=this.rb.getUniqueId()),this.band=new b(this.bandType,!0,this.linkedContainerId,"section_"+this.bandType+"_"+this.linkedContainerId,this.rb),this.band.init(this),this.rb.addContainer(this.band),this.setupComplete=!0}},{key:"registerEventHandlers",value:function(){}},{key:"getMaxId",value:function(){return this.linkedContainerId}},{key:"getAbsolutePosition",value:function(){var e={x:0,y:0},t=this.getParent();return(e=null!==t?t.getAbsolutePosition():e).y+=this.yVal,e}},{key:"setValue",value:function(e,t){R(B(a.prototype),"setValue",this).call(this,e,t),"height"===e&&(this[e+"Val"]=ve(t),null!==(e=this.getParent())&&e.updateBands(this))}},{key:"getFields",value:function(){var e=this.getProperties();return e.splice(0,0,"id","containerId","linkedContainerId"),e}},{key:"getProperties",value:function(){return this.bandType===b.bandType.header?["height","repeatHeader","shrinkToContentHeight"]:["height","alwaysPrintOnSamePage","shrinkToContentHeight"]}},{key:"updateDisplayInternal",value:function(e,t,r,n){null!==this.el&&(this.el.style.top=this.rb.toPixel(t),this.el.style.width="100%",this.el.style.height=this.rb.toPixel(n),this.setupComplete)&&null!==(t=this.getParent())&&t.updateHeight(this,n)}},{key:"select",value:function(){R(B(a.prototype),"select",this).call(this),this.el.classList.add("rbroHighlightBandDescription")}},{key:"deselect",value:function(){R(B(a.prototype),"deselect",this).call(this),this.el.classList.remove("rbroHighlightBandDescription")}},{key:"getSizers",value:function(){return["S"]}},{key:"getHeight",value:function(){return this.heightVal}},{key:"isAreaSelectionAllowed",value:function(){return!1}},{key:"isDraggingAllowed",value:function(){return!1}},{key:"createElement",value:function(){this.el=ge("div",{id:"rbro_el".concat(this.id),class:"rbroSectionBandElement rbroElementContainer"}),this.el.append(ge("div",{id:"rbro_el_band_description".concat(this.id),class:"rbroDocumentBandDescription"})),document.getElementById("rbro_el".concat(this.parentId)).append(this.el)}},{key:"getContentElement",value:function(){return this.el}},{key:"getParent",value:function(){return this.rb.getDataObject(this.parentId)}},{key:"show",value:function(e){(this.visible=e)?this.el.classList.remove("rbroHidden"):this.el.classList.add("rbroHidden")}},{key:"isVisible",value:function(){return this.visible}},{key:"getClassName",value:function(){return"SectionBandElement"}}]),a}();function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var he=function(){t(i,Q);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t,r){return u(this,i),(e=o.call(this,r.getLabel("docElementSection"),e,-1,60,r)).setupComplete=!1,e.elDividerHeader=null,e.elDividerFooter=null,e.elDividerBottom=null,e.dataSource="",e.label="",e.header=!1,e.footer=!1,e.headerData=null,e.contentData=null,e.footerData=null,e.setInitialData(t),e}return e(i,[{key:"setup",value:function(e){R(B(i.prototype),"setup",this).call(this,e),this.createElement(),this.updateDisplay(),this.headerData=this.createBand(b.bandType.header,null),this.contentData=this.createBand(b.bandType.content,null),this.footerData=this.createBand(b.bandType.footer,null),this.updateHeight(null,-1),this.setWidth(this.getContainerContentSize().width),this.setupComplete=!0,this.updateName(),e&&this.panelItem.open()}},{key:"createBand",value:function(e,t){var r,n,o=e+"Data",i={hasChildren:!0,showDelete:!1},t=(t?r=t:this[o]?n=(r=this[o]).id:r={},r.parentId=this.id,r.containerId=this.containerId,n=n||this.rb.getUniqueId(),0),o=(e===b.bandType.header?r.y=""+t:e===b.bandType.content?(this.header&&null!==this.headerData&&(t+=this.headerData.getValue("heightVal")),r.y=""+t):e===b.bandType.footer&&(this.header&&null!==this.headerData&&(t+=this.headerData.getValue("heightVal")),null!==this.contentData&&(t+=this.contentData.getValue("heightVal")),r.y=""+t),(e===b.bandType.header&&!this.header||e===b.bandType.footer&&!this.footer)&&(i.visible=!1),new de(n,r,e,this.rb)),t=(this.rb.addDataObject(o),new v("section_band",this.panelItem,o,i,this.rb));return o.setPanelItem(t),this.panelItem.appendChild(t),o.setup(),e===b.bandType.header?o.show(this.header):e===b.bandType.footer&&o.show(this.footer),o}},{key:"registerEventHandlers",value:function(){R(B(i.prototype),"registerContainerEventHandlers",this).call(this)}},{key:"getMaxId",value:function(){var e=this.id;return e=null!==this.footerData?this.footerData.getMaxId():e}},{key:"appendContainerChildren",value:function(e){null!==this.headerData&&this.headerData.appendContainerChildren(e),null!==this.contentData&&this.contentData.appendContainerChildren(e),null!==this.footerData&&this.footerData.appendContainerChildren(e)}},{key:"setValue",value:function(e,t){R(B(i.prototype),"setValue",this).call(this,e,t),"label"===e||"dataSource"===e?this.updateName():"header"===e?(this.headerData.show(t),t?this.headerData.getPanelItem().show():this.headerData.getPanelItem().hide()):"footer"===e?(this.footerData.show(t),t?this.footerData.getPanelItem().show():this.footerData.getPanelItem().hide()):"containerId"===e&&(this.headerData.containerId=t,this.contentData.containerId=t,this.footerData.containerId=t),"header"!==e&&"footer"!==e||this.updateBands(null)}},{key:"updateDisplayInternal",value:function(e,t,r,n){null!==this.el&&(this.el.style.top=this.rb.toPixel(t),this.el.style.width="100%",this.el.style.height=this.rb.toPixel(n))}},{key:"getProperties",value:function(){return["y","label","dataSource","header","footer","printIf"]}},{key:"getElementType",value:function(){return Q.type.section}},{key:"select",value:function(){R(B(i.prototype),"select",this).call(this);for(var e=this.getSizerContainerElement(),t=0,r=["N","S"];t<r.length;t++)e.append(ge("div",{class:"rbroSizer rbroSizer".concat(r[t]," rbroSizerMove")}));null!==this.headerData&&document.getElementById("rbro_el".concat(this.headerData.getId())).classList.add("rbroHighlightBandDescription"),null!==this.contentData&&document.getElementById("rbro_el".concat(this.contentData.getId())).classList.add("rbroHighlightBandDescription"),null!==this.footerData&&document.getElementById("rbro_el".concat(this.footerData.getId())).classList.add("rbroHighlightBandDescription")}},{key:"deselect",value:function(){R(B(i.prototype),"deselect",this).call(this);var e,t=function(e){var t,r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return pe(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?pe(e,void 0):void 0}}(e)))return n&&(e=n),t=0,{s:r=function(){},n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}(this.el.querySelectorAll(".rbroSectionBandElement"));try{for(t.s();!(e=t.n()).done;)e.value.classList.remove("rbroHighlightBandDescription")}catch(e){t.e(e)}finally{t.f()}}},{key:"getSizers",value:function(){return[]}},{key:"isAreaSelectionAllowed",value:function(){return!1}},{key:"isDroppingAllowed",value:function(){return!1}},{key:"createElement",value:function(){this.el=ge("div",{id:"rbro_el".concat(this.id),class:"rbroDocElement rbroSectionElement"}),this.el.append(ge("div",{id:"rbro_divider_section_top".concat(this.id),class:"rbroDivider rbroDividerSection",style:"top: 0px"})),this.elDividerHeader=ge("div",{id:"rbro_divider_section_header".concat(this.id),class:"rbroDivider rbroDividerSectionBand rbroHidden"}),this.el.append(this.elDividerHeader),this.elDividerFooter=ge("div",{id:"rbro_divider_section_footer".concat(this.id),class:"rbroDivider rbroDividerSectionBand rbroHidden"}),this.el.append(this.elDividerFooter),this.elDividerBottom=ge("div",{id:"rbro_divider_section_bottom".concat(this.id),class:"rbroDivider rbroDividerSection"}),this.el.append(this.elDividerBottom),this.appendToContainer(),this.registerEventHandlers()}},{key:"remove",value:function(){R(B(i.prototype),"remove",this).call(this),null!==this.headerData&&this.rb.deleteContainer(this.headerData.getLinkedContainer()),null!==this.contentData&&this.rb.deleteContainer(this.contentData.getLinkedContainer()),null!==this.footerData&&this.rb.deleteContainer(this.footerData.getLinkedContainer())}},{key:"updateName",value:function(){""!==this.label.trim()?this.name=this.label:(this.name=this.rb.getLabel("docElementSection"),""!==this.dataSource.trim()&&(this.name+=" "+this.dataSource)),null!==this.headerData&&(document.getElementById("rbro_el_band_description".concat(this.headerData.getId())).textContent=this.name+" "+this.headerData.getName()),null!==this.contentData&&(document.getElementById("rbro_el_band_description".concat(this.contentData.getId())).textContent=this.name+" "+this.contentData.getName()),null!==this.footerData&&(document.getElementById("rbro_el_band_description".concat(this.footerData.getId())).textContent=this.name+" "+this.footerData.getName()),document.getElementById("rbro_menu_item_name".concat(this.id)).textContent=this.name}},{key:"setWidth",value:function(e){this.widthVal=e,this.width=""+e,null!==this.headerData&&(this.headerData.widthVal=e,this.headerData.width=""+e),null!==this.contentData&&(this.contentData.widthVal=e,this.contentData.width=""+e),null!==this.footerData&&(this.footerData.widthVal=e,this.footerData.width=""+e)}},{key:"updateHeight",value:function(e,t){var r=0;this.header&&null!==this.headerData?(e===this.headerData?r+=t:r+=this.headerData.getValue("heightVal"),this.elDividerHeader.style.top=this.rb.toPixel(r),this.elDividerHeader.classList.remove("rbroHidden")):this.elDividerHeader.classList.add("rbroHidden"),null!==this.contentData&&(e===this.contentData?r+=t:r+=this.contentData.getValue("heightVal")),this.footer&&null!==this.footerData?(this.elDividerFooter.style.top=this.rb.toPixel(r),this.elDividerFooter.classList.remove("rbroHidden"),e===this.footerData?r+=t:r+=this.footerData.getValue("heightVal")):document.getElementById("rbro_divider_section_footer".concat(this.id)).classList.add("rbroHidden"),this.elDividerBottom.style.top=this.rb.toPixel(r),this.height=""+r,this.heightVal=r,this.updateDisplay()}},{key:"updateBands",value:function(e){var t;this.setupComplete&&(t=0,this.header&&(this.headerData!==e&&this.headerData.setValue("y",""+t),t+=this.headerData.getValue("heightVal")),this.contentData!==e&&this.contentData.setValue("y",""+t),t+=this.contentData.getValue("heightVal"),this.footer&&this.footerData!==e&&this.footerData.setValue("y",""+t)),this.updateHeight(null,-1)}},{key:"getLinkedContainers",value:function(){for(var e=[],t=0,r=["headerData","contentData","footerData"];t<r.length;t++){var n=r[t];null!==this[n]&&null!==(n=this[n].getLinkedContainer())&&e.push(n)}return e}},{key:"hasDataSource",value:function(){return!0}},{key:"addCommandsForChangedParameterName",value:function(e,t,r){this.addCommandForChangedParameterName(e,t,"dataSource",r),this.addCommandForChangedParameterName(e,t,"printIf",r)}},{key:"toJS",value:function(){var e=R(B(i.prototype),"toJS",this).call(this);return e.headerData=this.headerData.toJS(),e.contentData=this.contentData.toJS(),e.footerData=this.footerData.toJS(),e}},{key:"getClassName",value:function(){return"SectionElement"}}]),i}();function fe(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return ye(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ye(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oe=function(){t(i,Q);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t,r){return u(this,i),(e=o.call(this,r.getLabel("docElementText"),e,100,20,r)).elContent=null,e.elContentText=null,e.elContentTextData=null,e.content="",e.richText=!1,e.richTextContent=null,e.richTextHtml="",e.eval=!1,e.styleId="",e.bold=!1,e.italic=!1,e.underline=!1,e.strikethrough=!1,e.horizontalAlignment=Y.alignment.left,e.verticalAlignment=Y.alignment.top,e.textColor="#000000",e.backgroundColor="",e.font=r.getProperty("defaultFont"),e.fontSize=12,e.lineSpacing=1,e.borderColor="#000000",e.borderWidth="1",e.borderAll=!1,e.borderLeft=!1,e.borderTop=!1,e.borderRight=!1,e.borderBottom=!1,e.paddingLeft="2",e.paddingTop="2",e.paddingRight="2",e.paddingBottom="2",e.cs_condition="",e.cs_styleId="",e.cs_bold=!1,e.cs_italic=!1,e.cs_underline=!1,e.cs_strikethrough=!1,e.cs_horizontalAlignment=Y.alignment.left,e.cs_verticalAlignment=Y.alignment.top,e.cs_textColor="#000000",e.cs_backgroundColor="",e.cs_font=Y.font.helvetica,e.cs_fontSize=12,e.cs_lineSpacing=1,e.cs_borderColor="#000000",e.cs_borderWidth="1",e.cs_borderAll=!1,e.cs_borderLeft=!1,e.cs_borderTop=!1,e.cs_borderRight=!1,e.cs_borderBottom=!1,e.cs_paddingLeft="2",e.cs_paddingTop="2",e.cs_paddingRight="2",e.cs_paddingBottom="2",e.alwaysPrintOnSamePage=!0,e.pattern="",e.link="",e.spreadsheet_hide=!1,e.spreadsheet_column="",e.spreadsheet_colspan="",e.spreadsheet_addEmptyRow=!1,e.spreadsheet_textWrap=!1,e.setInitialData(t),e.borderWidthVal=ve(e.borderWidth),e}return e(i,[{key:"setup",value:function(e){R(B(i.prototype),"setup",this).call(this,e),this.createElement(),this.updateDisplay(),this.updateStyle(),this.richText?this.setupRichText():this.updateContent(this.content)}},{key:"handleDoubleClick",value:function(e){R(B(i.prototype),"handleDoubleClick",this).call(this,e);e=document.getElementById("rbro_doc_element_content");e.focus(),"number"==typeof e.selectionStart&&(e.selectionStart=e.selectionEnd=e.value.length)}},{key:"setValue",value:function(e,t){-1!==e.indexOf("border")&&(this[e]=t,"cs_"===e.substr(0,3)?("cs_borderWidth"===e&&(this.borderWidthVal=ve(t)),Y.setBorderValue(this,e,"cs_",t,this.rb)):("borderWidth"===e&&(this.borderWidthVal=ve(t)),Y.setBorderValue(this,e,"",t,this.rb))),R(B(i.prototype),"setValue",this).call(this,e,t),"content"===e?this.updateContent(t):"width"===e||"height"===e?this.updateDisplay():"richText"===e?(t?this.setupRichText():this.updateContent(this.content),this.updateStyle()):"richTextContent"===e?this.updateRichTextContent(t):"richTextHtml"===e&&(document.getElementById("rbro_el_content_text_data".concat(this.id)).innerHTML=t)}},{key:"getProperties",value:function(){return["x","y","width","height","content","richText","richTextContent","richTextHtml","eval","styleId","bold","italic","underline","strikethrough","horizontalAlignment","verticalAlignment","textColor","backgroundColor","font","fontSize","lineSpacing","borderColor","borderWidth","borderAll","borderLeft","borderTop","borderRight","borderBottom","paddingLeft","paddingTop","paddingRight","paddingBottom","printIf","removeEmptyElement","alwaysPrintOnSamePage","pattern","link","cs_condition","cs_styleId","cs_bold","cs_italic","cs_underline","cs_strikethrough","cs_horizontalAlignment","cs_verticalAlignment","cs_textColor","cs_backgroundColor","cs_font","cs_fontSize","cs_lineSpacing","cs_borderColor","cs_borderWidth","cs_borderAll","cs_borderLeft","cs_borderTop","cs_borderRight","cs_borderBottom","cs_paddingLeft","cs_paddingTop","cs_paddingRight","cs_paddingBottom","spreadsheet_hide","spreadsheet_column","spreadsheet_colspan","spreadsheet_addEmptyRow","spreadsheet_textWrap"]}},{key:"getElementType",value:function(){return Q.type.text}},{key:"updateDisplayInternal",value:function(e,t,r,n){null!==this.el&&(this.el.style.left=this.rb.toPixel(e),this.el.style.top=this.rb.toPixel(t),this.el.style.width=this.rb.toPixel(r),this.el.style.height=this.rb.toPixel(n));e=this.getContentSize(r,n,this.getStyle());this.elContentText.style.width=this.rb.toPixel(e.width),this.elContentText.style.height=this.rb.toPixel(e.height)}},{key:"getStyle",value:function(){var e,t=this;return t=""!==this.styleId&&null!==(e=this.rb.getDataObject(this.styleId))?e:t}},{key:"addCommandsForChangedStyle",value:function(e,t,r,n){if(""!==e){var o=this.rb.getStyleById(e);if(null!==o){var i,a=fe(o.getFields().slice(2));try{for(a.s();!(i=a.n()).done;){var l,s,c=i.value,u=t+c,d=o.getValue(c);d!==this.getValue(u)&&(l=r[u],(s=new me(this.getId(),u,d,l.type,this.rb)).disableSelect(),n.addCommand(s))}}catch(e){a.e(e)}finally{a.f()}}}n.addCommand(new me(this.getId(),t+"styleId",e,me.type.select,this.rb))}},{key:"getContentSize",value:function(e,t,r){var n=r.getValue("borderWidthVal");return e-=ve(r.getValue("paddingLeft"))+ve(r.getValue("paddingRight")),r.getValue("borderLeft")&&(e-=n),r.getValue("borderRight")&&(e-=n),t-=ve(r.getValue("paddingTop"))+ve(r.getValue("paddingBottom")),r.getValue("borderTop")&&(t-=n),r.getValue("borderBottom")&&(t-=n),{width:e,height:t}}},{key:"updateStyle",value:function(){var e,t,r={},n=this.getStyle(),o="",i="",a=this.getContentSize(this.getDisplayWidth(),this.getDisplayHeight(),n),a=(r.width=this.rb.toPixel(a.width),r.height=this.rb.toPixel(a.height),n.getValue("horizontalAlignment")),l=n.getValue("verticalAlignment"),s="rbroDocElementAlign"+a.charAt(0).toUpperCase()+a.slice(1),c="rbroDocElementVAlign"+l.charAt(0).toUpperCase()+l.slice(1),u=(r["vertical-align"]=l,r["background-color"]=n.getValue("backgroundColor"),this.richText?(r["font-weight"]="unset",r["font-style"]="normal",r["text-decoration"]="none",r["text-align"]="unset",r.color="#000000",r["font-family"]=this.rb.getProperty("defaultFont"),r["font-size"]="12px"):(r["font-weight"]=n.getValue("bold")?"bold":"",r["font-style"]=n.getValue("italic")?"italic":"normal",n.getValue("underline")&&n.getValue("strikethrough")?r["text-decoration"]="underline line-through":n.getValue("underline")?r["text-decoration"]="underline":n.getValue("strikethrough")?r["text-decoration"]="line-through":r["text-decoration"]="none",r["text-align"]=a,r.color=n.getValue("textColor"),r["font-family"]=n.getValue("font"),r["font-size"]=n.getValue("fontSize")+"px"),r["line-height"]=n.getValue("lineSpacing"),n.getValue("borderLeft")||n.getValue("borderTop")||n.getValue("borderRight")||n.getValue("borderBottom")?(e=n.getValue("borderTop")?"solid":"none",e=(e=(e+=n.getValue("borderRight")?" solid":" none")+(n.getValue("borderBottom")?" solid":" none"))+(n.getValue("borderLeft")?" solid":" none"),o=n.getValue("borderWidthVal")+"px",i=n.getValue("borderColor")):e="none",""!==n.getValue("paddingLeft")||""!==n.getValue("paddingTop")||""!==n.getValue("paddingRight")||""!==n.getValue("paddingBottom")?(r.padding=this.rb.toPixel(n.getValue("paddingTop")),r.padding+=" "+this.rb.toPixel(n.getValue("paddingRight")),r.padding+=" "+this.rb.toPixel(n.getValue("paddingBottom")),r.padding+=" "+this.rb.toPixel(n.getValue("paddingLeft"))):r.padding="",this.elContent.style.borderStyle=e,this.elContent.style.borderWidth=o,this.elContent.style.borderColor=i,this.elContent.className="",this.elContent.classList.add("rbroContentContainerHelper"),this.elContent.classList.add(s),this.elContent.classList.add(c),"");for(t in r)u+=t+": "+r[t]+";";this.elContentText.style.cssText=u}},{key:"hasBorderSettings",value:function(){return!0}},{key:"createElement",value:function(){this.el=ge("div",{id:"rbro_el".concat(this.id),class:"rbroDocElement rbroTextElement"}),this.elContent=ge("div",{id:"rbro_el_content".concat(this.id),class:"rbroContentContainerHelper"}),this.elContentText=ge("div",{id:"rbro_el_content_text".concat(this.id),class:"rbroDocElementContentText"}),this.elContentTextData=ge("span",{id:"rbro_el_content_text_data".concat(this.id)}),this.elContentText.append(this.elContentTextData),this.elContent.append(this.elContentText),this.el.append(this.elContent),this.appendToContainer(),this.elContentTextData.textContent=this.content,R(B(i.prototype),"registerEventHandlers",this).call(this)}},{key:"updateContent",value:function(e){""===e.trim()?this.name=this.rb.getLabel("docElementText"):this.name=e;var t=document.getElementById("rbro_menu_item_name".concat(this.id));t.textContent=this.name,t.setAttribute("title",this.name),this.elContentTextData.textContent=e}},{key:"updateRichTextContent",value:function(e){var t="";if(e&&e.ops){var r,n=fe(e.ops);try{for(n.s();!(r=n.n()).done;){var o=r.value;"insert"in o&&(t+=o.insert)}}catch(e){n.e(e)}finally{n.f()}t=(t=80<(t=t.replace(/(?:\r\n|\r|\n)/g," ")).length?t.substr(0,80):t).trim()}this.name=""===t?this.rb.getLabel("docElementText"):t;var i=document.getElementById("rbro_menu_item_name".concat(this.id));i.textContent=this.name,i.setAttribute("title",this.name)}},{key:"setupRichText",value:function(){this.updateRichTextContent(this.richTextContent),this.elContentTextData.innerHTML=this.richTextHtml}},{key:"addCommandsForChangedParameterName",value:function(e,t,r){this.addCommandForChangedParameterName(e,t,"content",r),this.addCommandForChangedParameterName(e,t,"richTextContent",r),this.addCommandForChangedParameterName(e,t,"richTextHtml",r),this.addCommandForChangedParameterName(e,t,"printIf",r),this.addCommandForChangedParameterName(e,t,"cs_condition",r)}},{key:"toJS",value:function(){for(var e=R(B(i.prototype),"toJS",this).call(this),t=0,r=["borderWidth","paddingLeft","paddingTop","paddingRight","paddingBottom","cs_paddingLeft","cs_paddingTop","cs_paddingRight","cs_paddingBottom"];t<r.length;t++){var n=r[t];e[n]=ve(this.getValue(n))}return e}},{key:"getClassName",value:function(){return"TextElement"}}]),i}(),ee=function(){t(i,Oe);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t,r){return u(this,i),(e=o.call(this,e,t,r)).elContent=null,e.elContentText=null,e.elContentTextData=null,e.colspan=t.colspan||"",e.colspanVal=1,e.columnIndex=t.columnIndex,e.parentId=t.parentId,e.tableId=t.tableId,e.displayWidth=e.widthVal,e.lastTouchStartTime=0,e.updateColspanVal(),e}return e(i,[{key:"setInitialData",value:function(e){this.growWeight=0,R(B(i.prototype),"setInitialData",this).call(this,e)}},{key:"registerEventHandlers",value:function(){var t=this;this.el.addEventListener("dblclick",function(e){t.rb.isSelectedObject(t.id)||t.rb.isSelectedObject(t.tableId)&&(t.rb.selectObject(t.id,!e.shiftKey),e.stopPropagation())}),this.el.addEventListener("mousedown",function(e){t.rb.isSelectedObject(t.id)?(e.shiftKey&&t.rb.deselectObject(t.id),e.stopPropagation()):t.rb.isTableElementSelected(t.tableId)&&(t.rb.selectObject(t.id,!e.shiftKey),e.stopPropagation())}),this.el.addEventListener("touchstart",function(e){t.rb.isSelectedObject(t.id)||((new Date).getTime()-t.lastTouchStartTime<1e3?t.rb.isSelectedObject(t.tableId)&&(t.rb.selectObject(t.id,!0),e.stopPropagation()):t.rb.isTableElementSelected(t.tableId)&&(t.rb.selectObject(t.id,!0),e.stopPropagation())),t.lastTouchStartTime=(new Date).getTime()})}},{key:"getContainerId",value:function(){var e=this.getTable();return null!==e?e.getContainerId():null}},{key:"getValue",value:function(e){return"xReadOnly"===e?this.getOffsetX():R(B(i.prototype),"getValue",this).call(this,e)}},{key:"setValue",value:function(e,t){var r;R(B(i.prototype),"setValue",this).call(this,e,t),"width"===e?null!==(r=this.getTable())&&(r.updateColumnWidth(this.columnIndex,t),r.updateColumnDisplay()):"height"===e?this.updateDisplayInternalNotify(0,0,this.displayWidth,this.heightVal,!1):"colspan"===e&&(this.updateColspanVal(),null!==(t=this.rb.getDataObject(this.tableId))&&t.updateColumnDisplay())}},{key:"getUpdateValue",value:function(e,t){if("width"!==e)return t;var r=ve(t);if(1<this.colspanVal){e=this.rb.getDataObject(this.parentId);if(null!==e){var n=this.getNextCellIndex(),o=e.getSingleCellWidths();n>o.length&&(n=o.length);for(var i=this.columnIndex+1;i<n;i++)r+=o[i]}}return""===t&&0===r?"":""+r}},{key:"setWidth",value:function(e){this.width=e,this.widthVal=ve(e)}},{key:"getDisplayWidth",value:function(){return this.displayWidth}},{key:"setDisplayWidth",value:function(e){this.displayWidth=e}},{key:"getDisplayWidthSplit",value:function(e){if(1===this.colspanVal)return[e];var t=[20],r=20,n=this.rb.getDataObject(this.parentId);if(null!==n){var o=this.getNextCellIndex(),i=n.getSingleCellWidths();o>i.length&&(o=i.length);for(var a=this.columnIndex+1;a<o;a++)t.push(i[a]),r+=i[a];if(0<(s=e-r))t[0]+=s;else if(s<0)for(var l=1,s=-s;l<t.length;){if(t[l]-20>s){t[l]-=s;break}s-=t[l]-20,t[l]=20,l++}}return t}},{key:"updateColspanVal",value:function(){this.colspanVal=ve(this.colspan),this.colspanVal<=0&&(this.colspanVal=1),null!==this.el&&this.el.setAttribute("colspan",this.colspanVal)}},{key:"getFields",value:function(){var e=this.getProperties();return e.splice(0,1,"id"),e}},{key:"getProperties",value:function(){var e=["xReadOnly","width","content","eval","colspan","styleId","bold","italic","underline","strikethrough","horizontalAlignment","verticalAlignment","textColor","backgroundColor","font","fontSize","lineSpacing","paddingLeft","paddingTop","paddingRight","paddingBottom","pattern","link","cs_condition","cs_styleId","cs_bold","cs_italic","cs_underline","cs_strikethrough","cs_horizontalAlignment","cs_verticalAlignment","cs_textColor","cs_backgroundColor","cs_font","cs_fontSize","cs_lineSpacing","cs_paddingLeft","cs_paddingTop","cs_paddingRight","cs_paddingBottom","spreadsheet_textWrap"],t=this.rb.getDataObject(this.parentId);return null!==t&&t.getValue("bandType")===b.bandType.header&&(e.push("printIf"),e.push("growWeight")),e}},{key:"getElementType",value:function(){return Q.type.tableText}},{key:"updateDisplay",value:function(){this.updateDisplayInternal(this.xVal,this.yVal,this.displayWidth,this.heightVal)}},{key:"updateDisplayInternal",value:function(e,t,r,n){this.updateDisplayInternalNotify(e,t,r,n,!0)}},{key:"updateDisplayInternalNotify",value:function(e,t,r,n,o){null!==this.el&&(this.el.style.width=this.rb.toPixel(r-1));n=this.getContentSize(r,n,this.getStyle());if(this.elContentText.style.width=this.rb.toPixel(n.width),this.elContentText.style.height=this.rb.toPixel(n.height),o){var i=this.rb.getDataObject(this.tableId);if(null!==i){for(var a=this.rb.getDataObject(this.parentId),l=r,s=a.getSingleCellWidths(),c=0;c<s.length;c++)(c<this.columnIndex||c>=this.columnIndex+this.colspanVal)&&(l+=s[c]);for(var u=this.getDisplayWidthSplit(r),d=0;d<u.length;d++)i.notifyColumnWidthResized(a,this.columnIndex+d,u[d],l)}}}},{key:"getSizers",value:function(){return["E"]}},{key:"hasBorderSettings",value:function(){return!1}},{key:"isAreaSelectionAllowed",value:function(){return!1}},{key:"isDraggingAllowed",value:function(){return!1}},{key:"isDroppingAllowed",value:function(){return!1}},{key:"getMinWidth",value:function(){return 20*this.colspanVal}},{key:"getMaxWidth",value:function(){var e=this.rb.getDataObject(this.tableId),t=this.rb.getDataObject(this.parentId);if(null===e||null===t)return 0;for(var r=this.rb.getDocumentProperties().getContentSize().width,n=t.getSingleCellWidths(),o=0,i=0;i<n.length;i++)(i<this.columnIndex||i>=this.columnIndex+this.colspanVal)&&(o+=n[i]);return r-o-e.xVal}},{key:"getOffsetX",value:function(){var e=this.rb.getDataObject(this.parentId);if(null===e)return 0;for(var t=e.getSingleCellWidths(),r=0,n=0;n<this.columnIndex;n++)r+=t[n];return r}},{key:"getCellIndex",value:function(){return this.columnIndex}},{key:"getNextCellIndex",value:function(){return this.columnIndex+this.colspanVal}},{key:"createElement",value:function(){this.el=ge("td",{id:"rbro_el".concat(this.id),class:"rbroTableTextElement"}),this.elContent=ge("div",{id:"rbro_el_content".concat(this.id),class:"rbroContentContainerHelper"}),this.elContentText=ge("div",{id:"rbro_el_content_text".concat(this.id),class:"rbroDocElementContentText"}),this.elContentTextData=ge("span",{id:"rbro_el_content_text_data".concat(this.id)}),this.elContentText.append(this.elContentTextData),this.elContent.append(this.elContentText),this.el.append(this.elContent),1<this.colspanVal&&this.el.setAttribute("colspan",this.colspanVal),document.getElementById("rbro_el_table_band".concat(this.parentId)).append(this.el),document.getElementById("rbro_el_content_text_data".concat(this.id)).textContent=this.content,this.registerEventHandlers()}},{key:"getParent",value:function(){return this.rb.getDataObject(this.parentId)}},{key:"getTable",value:function(){return this.rb.getDataObject(this.tableId)}},{key:"addCommandsForChangedWidth",value:function(e,t,r){var n=this.getDisplayWidthSplit(e),o=this.getParent();if(null!==o)for(var i=n.length-1;0<=i;i--){var a=new me(o.getColumn(this.columnIndex+i).getId(),"width",""+n[i],me.type.text,this.rb);(t||0<i)&&a.disableSelect(),r.addCommand(a)}}},{key:"insertColumn",value:function(e){var t=this.getParent(),r=this.getTable();if(null!==t&&null!==r){var n=t.getColumnIndex(this);if(-1!==n){var t=new _e("Insert column"),o=new te(!1,r.getPanelItem().getPanelName(),r.toJS(),r.getId(),r.getContainerId(),-1,this.rb),i=(t.addCommand(o),ve(r.getValue("columns"))+1);r.setValue("columns",i),r.getValue("headerData").createColumns(i,!0,n,e);for(var a=0;a<r.getValue("contentDataRows").length;a++)r.getValue("contentDataRows")[a].createColumns(i,!0,n,e);r.getValue("footerData").createColumns(i,!0,n,e),o=new te(!0,r.getPanelItem().getPanelName(),r.toJS(),r.getId(),r.getContainerId(),-1,this.rb),t.addCommand(o),this.rb.executeCommand(t),this.rb.selectObject(this.getParent().getValue("columnData")[e?n:n+1].getId(),!0)}}}},{key:"deleteColumn",value:function(){var e=this.getParent(),t=this.getTable();if(null!==e&&null!==t){var r=e.getColumnIndex(this);if(-1!==r){var e=new _e("Delete column"),n=new te(!1,t.getPanelItem().getPanelName(),t.toJS(),t.getId(),t.getContainerId(),-1,this.rb),o=(e.addCommand(n),ve(t.getValue("columns"))-1),o=(t.setValue("columns",o),t.getValue("widthVal"));t.setValue("width",o-this.widthVal),t.getValue("headerData").deleteColumn(r);for(var i=0;i<t.getValue("contentDataRows").length;i++)t.getValue("contentDataRows")[i].deleteColumn(r);t.getValue("footerData").deleteColumn(r),n=new te(!0,t.getPanelItem().getPanelName(),t.toJS(),t.getId(),t.getContainerId(),-1,this.rb),e.addCommand(n),this.rb.executeCommand(e)}}}},{key:"toJS",value:function(){var e=R(B(i.prototype),"toJS",this).call(this);return e.growWeight=ve(e.growWeight),e}},{key:"getClassName",value:function(){return"TableTextElement"}}]),i}();function Pe(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return Ae(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ae(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var De=function(){t(a,Q);r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,i=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function a(e,t,r,n){u(this,a);var o="header"===r?n.getLabel("bandHeader"):"footer"===r?n.getLabel("bandFooter"):n.getLabel("bandContent");return(o=i.call(this,o,e,0,20,n)).bandType=r,o.repeatHeader=!1,o.alwaysPrintOnSamePage=!0,o.pageBreak=!1,o.backgroundColor="",o.alternateBackgroundColor="",o.groupExpression="",o.repeatGroupHeader=!1,o.parentId=t.parentId,o.columnData=[],o.heightVal=0,o.setInitialData(t),o}return e(a,[{key:"setInitialData",value:function(e){for(var t in e)e.hasOwnProperty(t)&&this.hasOwnProperty(t)&&(this[t]=e[t]);this.heightVal=ve(this.height)}},{key:"setup",value:function(){this.createElement(),this.updateStyle()}},{key:"registerEventHandlers",value:function(){}},{key:"getMaxId",value:function(){var e,t=this.id,r=Pe(this.columnData);try{for(r.s();!(e=r.n()).done;){var n=e.value;n.getId()>t&&(t=n.getId())}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"getContainerId",value:function(){var e=this.getParent();return null!==e?e.getContainerId():null}},{key:"setValue",value:function(e,t){if(this[e]=t,"height"===e){var r=ve(t);this[e+"Val"]=r;var n,o=Pe(this.getElement().querySelectorAll("td"));try{for(o.s();!(n=o.n()).done;)n.value.style.height=this.rb.toPixel(r)}catch(e){o.e(e)}finally{o.f()}var i,a=Pe(this.columnData);try{for(a.s();!(i=a.n()).done;)i.value.setValue(e,t)}catch(e){a.e(e)}finally{a.f()}var l=this.getParent();null!==l&&l.updateHeight()}else"backgroundColor"===e&&this.updateStyle()}},{key:"getFields",value:function(){var e=this.getProperties();return e.splice(0,0,"id"),e}},{key:"getProperties",value:function(){var e=["height","backgroundColor"];return this.bandType===b.bandType.header?e.push("repeatHeader"):this.bandType===b.bandType.content&&(e.push("alternateBackgroundColor"),e.push("groupExpression"),e.push("printIf"),e.push("alwaysPrintOnSamePage"),e.push("pageBreak"),e.push("repeatGroupHeader")),e}},{key:"updateDisplayInternal",value:function(e,t,r,n){}},{key:"updateStyle",value:function(){this.el.style.backgroundColor=this.backgroundColor}},{key:"getSizers",value:function(){return[]}},{key:"getHeight",value:function(){return this.heightVal}},{key:"isAreaSelectionAllowed",value:function(){return!1}},{key:"isDraggingAllowed",value:function(){return!1}},{key:"isDroppingAllowed",value:function(){return!1}},{key:"createElement",value:function(){this.el=ge("tr",{id:"rbro_el_table_band".concat(this.id),class:"rbroTableBandElement"}),document.getElementById("rbro_el_table_".concat(this.bandType).concat(this.parentId)).append(this.el)}},{key:"remove",value:function(){for(var e=0;e<this.columnData.length;e++)this.rb.deleteDataObject(this.columnData[e]);R(B(a.prototype),"remove",this).call(this)}},{key:"getParent",value:function(){return this.rb.getDataObject(this.parentId)}},{key:"createColumns",value:function(e,t,r,n){if(null!==this.panelItem){if(t)for(var o=0;o<this.columnData.length;o++)this.columnData[o].remove(),e<=o&&this.rb.deleteDataObject(this.columnData[o]);for(var i=[],a=0;a<e;a++){var l=void 0,s=void 0,c=t?20:100,u=a,u=(-1!==r&&(n?a===r?(c=this.columnData[r].getValue("widthVal"),u=-1):r<=a&&u--:a===r+1?(c=this.columnData[r].getValue("widthVal"),u=-1):r<a&&u--),-1!==u&&u<this.columnData.length?((l=this.columnData[u]).columnIndex=a,s=l.id,t||(l.band=this.band,l.parentId=this.id,l.tableId=this.parentId,l.height=this.height)):l={band:this.band,columnIndex:a,parentId:this.id,tableId:this.parentId,width:c,height:this.height},s=s||this.rb.getUniqueId(),new ee(s,l,this.rb)),c=(i.push(u),this.rb.addDataObject(u),new v(Q.type.text,this.panelItem,u,{showDelete:!1},this.rb));u.setPanelItem(c),this.panelItem.appendChild(c)}for(var d=0,p=this.columnData=i;d<p.length;d++)p[d].setup(!0);this.updateColumnDisplay();var h,f=Pe(this.getElement().querySelectorAll("td"));try{for(f.s();!(h=f.n()).done;)h.value.style.height=this.rb.toPixel(this.heightVal)}catch(e){f.e(e)}finally{f.f()}}}},{key:"deleteColumn",value:function(e){e<this.columnData.length&&(this.columnData[e].remove(),this.rb.deleteDataObject(this.columnData[e]),this.columnData.splice(e,1))}},{key:"show",value:function(e){e?this.el.classList.remove("rbroHidden"):this.el.classList.add("rbroHidden")}},{key:"updateColumnWidth",value:function(e,t){e<this.columnData.length&&this.columnData[e].setWidth(t)}},{key:"updateColumnDisplay",value:function(){for(var e=0;e<this.columnData.length;){var t=this.columnData[e],r=t.getValue("widthVal"),n=t.getValue("colspanVal");if(t.getElement().style.display="",1<n){var o=e+n<this.columnData.length?e+n:this.columnData.length;for(e++;e<o;)r+=this.columnData[e].getValue("widthVal"),this.columnData[e].getElement().style.display="none",e++}else e++;t.setDisplayWidth(r),t.updateDisplay()}}},{key:"getColumn",value:function(e){return 0<=e&&e<this.columnData.length?this.columnData[e]:null}},{key:"getColumns",value:function(){return this.columnData}},{key:"notifyColumnWidthResized",value:function(e,t){for(var r=0;r<this.columnData.length;){var n=this.columnData[r],o=n.getNextCellIndex();if(e<o){if(r+1<o)for(var i=r;i<o&&i<this.columnData.length;i++)i!==e&&(t+=this.columnData[i].getValue("widthVal"));n.updateDisplayInternalNotify(0,0,t,n.getValue("heightVal"),!1);break}r=o}}},{key:"getColumnIndex",value:function(e){for(var t=0;t<this.columnData.length;t++)if(e===this.columnData[t])return t;return-1}},{key:"getWidth",value:function(){for(var e=0,t=0;t<this.columnData.length;){var r=this.columnData[t],r=(e+=r.getDisplayWidth(),r.getValue("colspanVal"));1<r?t+=r:t++}return e}},{key:"getSingleCellWidths",value:function(){var e,t=[],r=Pe(this.columnData);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n.getValue("widthVal"))}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"insertRow",value:function(e){var t=this.getParent();if(null!==t){var r=t.getContentRowIndex(this);if(-1!==r){var n=new _e("Insert row"),o=new te(!1,t.getPanelItem().getPanelName(),t.toJS(),t.getId(),t.getContainerId(),-1,this.rb),i=(n.addCommand(o),ve(t.getValue("contentRows"))+1);t.setValue("contentRows",i);var a,i=t.getValue("contentDataRows")[r],l={height:i.height,columnData:[]},s=Pe(i.columnData);try{for(s.s();!(a=s.n()).done;){var c=a.value;l.columnData.push({width:c.width})}}catch(e){s.e(e)}finally{s.f()}i=t.createBand("content",-1,l);t.getValue("contentDataRows").splice(e?r:r+1,0,i),o=new te(!0,t.getPanelItem().getPanelName(),t.toJS(),t.getId(),t.getContainerId(),-1,this.rb),n.addCommand(o),this.rb.executeCommand(n),this.rb.selectObject(i.getValue("columnData")[0].getId(),!0)}}}},{key:"deleteRow",value:function(){var e,t,r,n,o=this.getParent();null!==o&&(e=o.getContentRowIndex(this),t=ve(o.getValue("contentRows")),-1!==e&&1<t&&(r=new _e("Delete row"),n=new te(!1,o.getPanelItem().getPanelName(),o.toJS(),o.getId(),o.getContainerId(),-1,this.rb),r.addCommand(n),o.setValue("contentRows",t-1),o.getValue("contentDataRows").splice(e,1),n=new te(!0,o.getPanelItem().getPanelName(),o.toJS(),o.getId(),o.getContainerId(),-1,this.rb),r.addCommand(n),this.rb.executeCommand(r)))}},{key:"addChildren",value:function(e){var t,r=Pe(this.columnData);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n)}}catch(e){r.e(e)}finally{r.f()}}},{key:"toJS",value:function(){var e=R(B(a.prototype),"toJS",this).call(this);e.columnData=[];var t,r=Pe(this.columnData);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.columnData.push(n.toJS())}}catch(e){r.e(e)}finally{r.f()}return e}},{key:"getClassName",value:function(){return"TableBandElement"}}]),a}();function Le(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return Te(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Te(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var je=function(){t(g,Q);r=g,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function g(e,t,r){return u(this,g),(e=o.call(this,r.getLabel("docElementTable"),e,200,40,r)).setupComplete=!1,e.dataSource="",e.borderColor="#000000",e.borderWidth="1",e.border=g.border.grid,e.header=!0,e.footer=!1,e.contentRows="1",e.columns="2",e.headerData=null,e.contentDataRows=[],e.footerData=null,e.spreadsheet_hide=!1,e.spreadsheet_column="",e.spreadsheet_addEmptyRow=!1,e.setInitialData(t),e.borderWidthVal=ve(e.borderWidth),e}return e(g,[{key:"setup",value:function(e){R(B(g.prototype),"setup",this).call(this,e),this.createElement(),this.updateDisplay(),this.headerData=this.createBand("header",-1,null);var t=ve(this.contentRows);t<1&&(t=1);for(var r=[],n=0;n<t;n++)r.push(this.createBand("content",n,null));this.contentDataRows=r,this.footerData=this.createBand("footer",-1,null),this.setupComplete=!0,this.updateHeight(),this.updateStyle(),this.updateName(),e&&this.panelItem.open()}},{key:"createBand",value:function(e,t,r){var n,o,i=e+("content"===e?"DataRows":"Data"),a={hasChildren:!0,showDelete:!1},r=(r?n=r:this[i]&&("content"!==e||-1!==t&&t<this[i].length)?o=(n="content"===e?this[i][t]:this[i]).id:n={},n.parentId=this.id,o=o||this.rb.getUniqueId(),("header"===e&&!this.header||"footer"===e&&!this.footer)&&(a.visible=!1),new De(o,n,e,this.rb)),t=(this.rb.addDataObject(r),new v("table_band",this.panelItem,r,a,this.rb)),i=(r.setPanelItem(t),this.panelItem.appendChild(t),r.setup(),ve(this.columns));return r.createColumns(i,!1,-1,!1),t.open(),"header"===e?r.show(this.header):"footer"===e&&r.show(this.footer),r}},{key:"getMaxId",value:function(){var e,t=this.id;(e=this.headerData.getMaxId())>t&&(t=e);for(var r=0;r<this.contentDataRows.length;r++)(e=this.contentDataRows[r].getMaxId())>t&&(t=e);return t=(e=this.footerData.getMaxId())>t?e:t}},{key:"setValue",value:function(e,t){R(B(g.prototype),"setValue",this).call(this,e,t),"dataSource"===e?this.updateName():"header"===e?(this.headerData.show(t),t?this.headerData.getPanelItem().show():this.headerData.getPanelItem().hide()):"footer"===e?(this.footerData.show(t),t?this.footerData.getPanelItem().show():this.footerData.getPanelItem().hide()):-1!==e.indexOf("border")&&("borderWidth"===e&&(this.borderWidthVal=ve(t)),this.updateStyle()),"header"!==e&&"footer"!==e&&"contentRows"!==e||this.updateHeight()}},{key:"updateDisplayInternal",value:function(e,t,r,n){null!==this.el&&(this.el.style.left=this.rb.toPixel(e),this.el.style.top=this.rb.toPixel(t))}},{key:"updateStyle",value:function(){var e,t=this.el.querySelector("table"),r=(this.border===g.border.grid||this.border===g.border.frameRow||this.border===g.border.frame?(t.style.borderStyle="solid",t.style.borderWidth=this.borderWidthVal+"px",t.style.borderColor=this.borderColor):t.style.borderStyle="none",""),n="",o="",t=(this.border===g.border.grid||this.border===g.border.frameRow||this.border===g.border.row?(r="solid none solid none",n=this.borderWidthVal+"px",o=this.borderColor):r="none",this.headerData.getElement());for(t.style.borderStyle=r,t.style.borderWidth=n,t.style.borderColor=o,e=0;e<this.contentDataRows.length;e++){var i=this.contentDataRows[e].getElement();i.style.borderStyle=r,i.style.borderWidth=n,i.style.borderColor=o}t=this.footerData.getElement();t.style.borderStyle=r,t.style.borderWidth=n,t.style.borderColor=o,this.border===g.border.grid?(r="none solid none solid",n=this.borderWidthVal+"px",o=this.borderColor):r="none";var a,l=Le(this.headerData.getElement().querySelectorAll("td"));try{for(l.s();!(a=l.n()).done;){var s=a.value;s.style.borderStyle=r,s.style.borderWidth=n,s.style.borderColor=o}}catch(e){l.e(e)}finally{l.f()}for(e=0;e<this.contentDataRows.length;e++){var c,u=Le(this.contentDataRows[e].getElement().querySelectorAll("td"));try{for(u.s();!(c=u.n()).done;){var d=c.value;d.style.borderStyle=r,d.style.borderWidth=n,d.style.borderColor=o}}catch(e){u.e(e)}finally{u.f()}}var p,h=Le(this.footerData.getElement().querySelectorAll("td"));try{for(h.s();!(p=h.n()).done;){var f=p.value;f.style.borderStyle=r,f.style.borderWidth=n,f.style.borderColor=o}}catch(e){h.e(e)}finally{h.f()}for(var y=0,m=["rbroBorderTableGrid","rbroBorderTableFrameRow","rbroBorderTableFrame","rbroBorderTableRow","rbroBorderTableNone"];y<m.length;y++)this.el.classList.remove(m[y]);this.el.classList.add("rbroBorderTable"+this.border.charAt(0).toUpperCase()+this.border.slice(1))}},{key:"getFields",value:function(){var e=this.getProperties();return e.splice(0,0,"id","containerId","width"),e}},{key:"getProperties",value:function(){return["x","y","dataSource","columns","header","contentRows","footer","border","borderColor","borderWidth","printIf","removeEmptyElement","spreadsheet_hide","spreadsheet_column","spreadsheet_addEmptyRow"]}},{key:"getElementType",value:function(){return Q.type.table}},{key:"select",value:function(){R(B(g.prototype),"select",this).call(this);for(var e=this.getSizerContainerElement(),t=0,r=["NE","SE","SW","NW"];t<r.length;t++)e.append(ge("div",{class:"rbroSizer rbroSizer".concat(r[t]," rbroSizerMove")}))}},{key:"getSizers",value:function(){return[]}},{key:"isDroppingAllowed",value:function(){return!1}},{key:"createElement",value:function(){this.el=ge("div",{class:"rbroDocElement rbroTableElement"});var e=ge("table",{id:"rbro_el_table".concat(this.id)});e.append(ge("thead",{id:"rbro_el_table_header".concat(this.id)})),e.append(ge("tbody",{id:"rbro_el_table_content".concat(this.id)})),e.append(ge("tfoot",{id:"rbro_el_table_footer".concat(this.id)})),this.el.append(e),this.appendToContainer(),this.registerEventHandlers(),e.style.width=this.widthVal+1+"px"}},{key:"remove",value:function(){this.rb.deleteDataObject(this.headerData),this.headerData.remove(),this.headerData=null;for(var e=0;e<this.contentDataRows.length;e++)this.rb.deleteDataObject(this.contentDataRows[e]),this.contentDataRows[e].remove();this.contentDataRows=[],this.rb.deleteDataObject(this.footerData),this.footerData.remove(),this.footerData=null,R(B(g.prototype),"remove",this).call(this)}},{key:"updateColumnWidth",value:function(e,t){if(this.setupComplete){this.headerData.updateColumnWidth(e,t);for(var r=0;r<this.contentDataRows.length;r++)this.contentDataRows[r].updateColumnWidth(e,t);this.footerData.updateColumnWidth(e,t)}}},{key:"updateColumnDisplay",value:function(){if(this.setupComplete){this.headerData.updateColumnDisplay();for(var e=0;e<this.contentDataRows.length;e++)this.contentDataRows[e].updateColumnDisplay();this.footerData.updateColumnDisplay()}}},{key:"updateHeight",value:function(){if(this.setupComplete){var e=0;this.header&&(e+=this.headerData.getHeight());for(var t=0;t<this.contentDataRows.length;t++)e+=this.contentDataRows[t].getHeight();this.footer&&(e+=this.footerData.getHeight()),this.height=""+e,this.heightVal=e}}},{key:"notifyColumnWidthResized",value:function(e,t,r,n){if(this.setupComplete){e!==this.headerData&&this.headerData.notifyColumnWidthResized(t,r);for(var o=0;o<this.contentDataRows.length;o++)e!==this.contentDataRows[o]&&this.contentDataRows[o].notifyColumnWidthResized(t,r);e!==this.footerData&&this.footerData.notifyColumnWidthResized(t,r),this.width=""+n,this.widthVal=n,document.getElementById("rbro_el_table".concat(this.id)).style.width=n+1+"px"}}},{key:"updateName",value:function(){this.name=this.rb.getLabel("docElementTable"),""!==this.dataSource.trim()&&(this.name+=" "+this.dataSource),document.getElementById("rbro_menu_item_name".concat(this.id)).textContent=this.name}},{key:"hasDataSource",value:function(){return!0}},{key:"getContentRowIndex",value:function(e){for(var t=0;t<this.contentDataRows.length;t++)if(e===this.contentDataRows[t])return t;return-1}},{key:"addChildren",value:function(e){var t;for(e.push(this.headerData),t=0;t<this.contentDataRows.length;t++)e.push(this.contentDataRows[t]);for(e.push(this.footerData),this.headerData.addChildren(e),t=0;t<this.contentDataRows.length;t++)this.contentDataRows[t].addChildren(e);this.footerData.addChildren(e)}},{key:"addCommandsForChangedParameterName",value:function(e,t,r){this.addCommandForChangedParameterName(e,t,"dataSource",r)}},{key:"createSpaceForNewColumns",value:function(e,t){for(var r=g.getColumnMinWidth(),n=e*r,o=t-1;0<=o;){var i=this.headerData.getColumn(o),a=i.getValue("widthVal")-r,l=r;if(n<a&&(l=i.getValue("widthVal")-n),this.updateColumnWidth(o,l),(n-=a)<=0)break;o--}}},{key:"hasEnoughAvailableSpace",value:function(e){var t=ve(this.columns),r=Math.floor(this.widthVal/g.getColumnMinWidth());return!(t<e&&r<e)}},{key:"addCommandsForChangedColumns",value:function(e,t){if(this.hasEnoughAvailableSpace(e)){var r=ve(this.columns),n=new te(!1,this.getPanelItem().getPanelName(),this.toJS(),this.id,this.getContainerId(),-1,this.rb);if(t.addCommand(n),r<e)this.createSpaceForNewColumns(e-r,r);else if(e<r){for(var o=0,i=0;i<e;i++)o+=this.headerData.getColumn(i).getValue("widthVal");r=this.headerData.getColumn(e-1);0<this.widthVal-o&&this.updateColumnWidth(e-1,r.getValue("widthVal")+(this.widthVal-o))}this.columns=e,this.headerData.createColumns(e,!0,-1,!1);for(var a=0;a<this.contentDataRows.length;a++)this.contentDataRows[a].createColumns(e,!0,-1,!1);this.footerData.createColumns(e,!0,-1,!1),n=new te(!0,this.getPanelItem().getPanelName(),this.toJS(),this.id,this.getContainerId(),-1,this.rb),t.addCommand(n)}}},{key:"addCommandsForChangedContentRows",value:function(e,t){if(e!==ve(this.contentRows)){var r,n=new te(!1,this.getPanelItem().getPanelName(),this.toJS(),this.id,this.getContainerId(),-1,this.rb);if(t.addCommand(n),e<this.contentDataRows.length){for(r=e;r<this.contentDataRows.length;r++)this.rb.deleteDataObject(this.contentDataRows[r]),this.contentDataRows[r].remove();this.contentDataRows.splice(e,this.contentDataRows.length-e)}else{if(0<this.contentDataRows.length){var o,i={height:this.contentDataRows[this.contentDataRows.length-1].height,columnData:[]},a=Le(this.contentDataRows[0].columnData);try{for(a.s();!(o=a.n()).done;){var l=o.value;i.columnData.push({width:l.width})}}catch(e){a.e(e)}finally{a.f()}}for(r=this.contentDataRows.length;r<e;r++)this.contentDataRows.push(this.createBand("content",r,i))}this.contentRows=""+e,n=new te(!0,this.getPanelItem().getPanelName(),this.toJS(),this.id,this.getContainerId(),-1,this.rb),t.addCommand(n)}}},{key:"toJS",value:function(){var e=R(B(g.prototype),"toJS",this).call(this);e.headerData=this.headerData.toJS();for(var t=[],r=0;r<this.contentDataRows.length;r++)t.push(this.contentDataRows[r].toJS());return e.contentDataRows=t,e.footerData=this.footerData.toJS(),e}},{key:"getClassName",value:function(){return"TableElement"}}],[{key:"removeIds",value:function(e){for(var t=0,r=["headerData","footerData"];t<r.length;t++)g.removeBandIds(e[r[t]]);for(var n=0;n<e.contentDataRows.length;n++)g.removeBandIds(e.contentDataRows[n])}},{key:"removeBandIds",value:function(e){delete e.id;var t,r=Le(e.columnData);try{for(r.s();!(t=r.n()).done;)delete t.value.id}catch(e){r.e(e)}finally{r.f()}}},{key:"getColumnMinWidth",value:function(){return 20}}]),g}(),te=(je.border={grid:"grid",frameRow:"frame_row",frame:"frame",row:"row",none:"none"},function(){t(c,p);r=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,s=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function c(e,t,r,n,o,i,a){var l;return u(this,c),(l=s.call(this)).add=e,l.elementType=t,l.initialData=r,l.parentId=o,l.position=i,l.rb=a,l.id=n,l.firstExecution=!0,l}return e(c,[{key:"getName",value:function(){return this.add?"Add element":"Delete element"}},{key:"do",value:function(){this.add?this.addElement():this.deleteElement(),this.firstExecution=!1}},{key:"undo",value:function(){this.add?this.deleteElement():this.addElement()}},{key:"addElement",value:function(){var e;null!==this.rb.getDataObject(this.parentId)&&(e=c.createElement(this.id,this.initialData,this.elementType,this.position,!0,this.rb),this.rb.notifyEvent(e,p.operation.add),this.rb.selectObject(this.id,!0),this.add&&this.firstExecution&&(this.initialData=e.toJS()))}},{key:"deleteElement",value:function(){var e=this.rb.getDataObject(this.id);null!==e&&this.rb.deleteDocElement(e)}},{key:"getClassName",value:function(){return"AddDeleteDocElementCmd"}}],[{key:"createElement",value:function(e,t,r,n,o,i){var a,l={draggable:!0},e=(r===Q.type.text?a=new Oe(e,t,i):r===Q.type.line?a=new ce(e,t,i):r===Q.type.image?a=new se(e,t,i):r===Q.type.pageBreak?a=new ue(e,t,i):r===Q.type.table?(a=new je(e,t,i),l.hasChildren=!0):r===Q.type.frame?(a=new le(e,t,i),l.hasChildren=!0):r===Q.type.section?(a=new he(e,t,i),l.hasChildren=!0):r===Q.type.barCode&&(a=new ie(e,t,i)),i.addDocElement(a),a.getContainer().getPanelItem()),t=new v(r,e,a,l,i);return a.setPanelItem(t),e.insertChild(n,t),a.setup(o),a}}]),c}());function I(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return Be(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Be(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e(C,[{key:"render",value:function(){var r=this,e=(this.elPanel=document.getElementById("rbro_document_panel"),this.elPanel.addEventListener("mousedown",function(e){r.rb.isDocElementSelected()&&!e.shiftKey&&r.rb.deselectAll(!0);var t=g(r.elDocContent);r.startSelectionArea(r.getCoordWithoutZoom(e.pageX-t.left),r.getCoordWithoutZoom(e.pageY-t.top))}),ge("div",{id:"rbro_document_tabs",class:"rbroDocumentTabs"})),t=(e.addEventListener("mousedown",function(e){e.stopPropagation()}),this.elTabPdfLayout=ge("div",{id:"rbro_document_tab_pdf_layout",class:"rbroDocumentTab rbroButton rbroTabButton"},this.rb.getLabel("documentTabPdfLayout")),this.elTabPdfLayout.addEventListener("click",function(e){r.setDocumentTab(C.tab.pdfLayout)}),e.append(this.elTabPdfLayout),this.elTabPdfPreview=ge("div",{id:"rbro_document_tab_pdf_preview",class:"rbroDocumentTab rbroButton rbroTabButton rbroHidden rbroPdfPreview"+(this.rb.getProperty("enableSpreadsheet")?" rbroXlsxDownload":"")},this.rb.getLabel("documentTabPdfPreview")),this.elTabPdfPreview.addEventListener("click",function(e){r.setDocumentTab(C.tab.pdfPreview)}),this.rb.getProperty("enableSpreadsheet")&&((t=ge("span",{class:"rbroIcon-xlsx rbroXlsxDownloadButton",title:this.rb.getLabel("documentTabXlsxDownload")})).addEventListener("click",function(e){r.rb.downloadSpreadsheet()}),this.elTabPdfPreview.append(t)),ge("span",{class:"rbroIcon-cancel",title:this.rb.getLabel("documentTabClose")})),t=(t.addEventListener("click",function(e){r.closePdfPreviewTab()}),this.elTabPdfPreview.append(t),e.append(this.elTabPdfPreview),this.elPanel.append(e),this.rb.getDocumentProperties()),e=(this.elDoc=ge("div",{id:"rbro_document_pdf",class:"rbroDocument rbroDragTarget rbroHidden"}),this.elDocContent=ge("div",{id:"rbro_document_content",class:"rbroDocumentContent"+(this.gridVisible?" rbroDocumentGrid":"")}),this.elHeader=ge("div",{id:"rbro_header",class:"rbroDocumentBand rbroElementContainer",style:"top: 0px; left: 0px;"}),this.elHeader.append(ge("div",{class:"rbroDocumentBandDescription"},this.rb.getLabel("bandHeader"))),this.elDocContent.append(this.elHeader),this.elContent=ge("div",{id:"rbro_content",class:"rbroDocumentBand rbroElementContainer"}),this.elContent.append(ge("div",{class:"rbroDocumentBandDescription"},this.rb.getLabel("bandContent"))),this.elDocContent.append(this.elContent),this.elFooter=ge("div",{id:"rbro_footer",class:"rbroDocumentBand rbroElementContainer",style:"bottom: 0px; left 0px;"}),this.elFooter.append(ge("div",{class:"rbroDocumentBandDescription"},this.rb.getLabel("bandFooter"))),this.elDocContent.append(this.elFooter),this.elDoc.append(this.elDocContent),this.elSelectionArea=ge("div",{id:"rbro_selection_area",class:"rbroHidden rbroSelectionArea"}),this.elDocContent.append(this.elSelectionArea),this.initializeEventHandlers(),this.elDividerMarginLeft=ge("div",{id:"rbro_divider_margin_left",class:"rbroDivider rbroDividerMarginLeft"}),this.elDoc.append(this.elDividerMarginLeft),this.elDividerMarginTop=ge("div",{id:"rbro_divider_margin_top",class:"rbroDivider rbroDividerMarginTop"}),this.elDoc.append(this.elDividerMarginTop),this.elDividerMarginRight=ge("div",{id:"rbro_divider_margin_right",class:"rbroDivider rbroDividerMarginRight"}),this.elDoc.append(this.elDividerMarginRight),this.elDividerMarginBottom=ge("div",{id:"rbro_divider_margin_bottom",class:"rbroDivider rbroDividerMarginBottom"}),this.elDoc.append(this.elDividerMarginBottom),this.elDividerHeader=ge("div",{id:"rbro_divider_header",class:"rbroDivider rbroDividerHeader"}),this.elDoc.append(this.elDividerHeader),this.elDividerFooter=ge("div",{id:"rbro_divider_footer",class:"rbroDivider rbroDividerFooter"}),this.elDoc.append(this.elDividerFooter),this.elPanel.append(this.elDoc),this.elPdfPreview=ge("div",{id:"rbro_document_pdf_preview",class:"rbroDocumentPreview"}),this.elPanel.append(this.elPdfPreview),t.getPageSize());this.updatePageSize(e.width,e.height),this.updateHeader(),this.updateFooter(),this.updatePageMargins(),this.updateDocumentTabs(),this.setDocumentTab(C.tab.pdfLayout)}},{key:"initializeEventHandlers",value:function(){var n=this;this.elDocContent.addEventListener("dragover",function(e){n.processDragover(e)}),this.elDocContent.addEventListener("dragenter",function(e){n.rb.isBrowserDragActive("docElement")&&(n.dragEnterCount++,e.preventDefault())}),this.elDocContent.addEventListener("dragleave",function(e){if(n.rb.isBrowserDragActive("docElement")&&(n.dragEnterCount--,0===n.dragEnterCount)){var t,r=I(document.querySelectorAll(".rbroElementContainer"));try{for(r.s();!(t=r.n()).done;)t.value.classList.remove("rbroElementDragOver")}catch(e){r.e(e)}finally{r.f()}n.dragContainerId=null}}),this.elDocContent.addEventListener("drop",function(e){return n.processDrop(e),!1})}},{key:"processMouseMove",value:function(e){var t;this.dragging?this.processDrag(e):this.selectionAreaStarted&&(t=g(this.elDocContent),e=this.getSelectionArea(this.getCoordWithoutZoom(e.pageX-t.left),this.getCoordWithoutZoom(e.pageY-t.top)),this.elSelectionArea.style.left=this.rb.toPixel(e.left),this.elSelectionArea.style.top=this.rb.toPixel(e.top),this.elSelectionArea.style.width=this.rb.toPixel(e.width),this.elSelectionArea.style.height=this.rb.toPixel(e.height),this.elSelectionArea.classList.contains("rbroHidden")&&this.elSelectionArea.classList.remove("rbroHidden"))}},{key:"processDragover",value:function(e){if(this.rb.isBrowserDragActive("docElement")){var t=c(e),r=null,t=(null!==t&&(r=this.getContainer(t.x,t.y,this.dragElementType,[]),this.dragCurrentX=t.x,this.dragCurrentY=t.y),null!==r?r.getId():null);if(t!==this.dragContainerId){var n,o=I(document.querySelectorAll(".rbroElementContainer"));try{for(o.s();!(n=o.n()).done;)n.value.classList.remove("rbroElementDragOver")}catch(e){o.e(e)}finally{o.f()}null!==r&&r.dragOver(),this.dragContainerId=t}e.preventDefault(),e.stopPropagation()}}},{key:"processDrop",value:function(e){if(this.rb.isBrowserDragActive("docElement")){var t=c(e);null!==t&&(this.dragCurrentX=t.x,this.dragCurrentY=t.y);var r,n=I(document.querySelectorAll(".rbroElementContainer"));try{for(n.s();!(r=n.n()).done;)r.value.classList.remove("rbroElementDragOver")}catch(e){n.e(e)}finally{n.f()}for(var o,i,a=this.getContainer(this.dragCurrentX,this.dragCurrentY,this.dragElementType,[]);null!==a&&!a.isElementAllowed(this.dragElementType);)a=a.getParent();null!==a&&a.isElementAllowed(this.dragElementType)&&(t=g(this.elDocContent),i=this.getCoordWithoutZoom(this.dragCurrentX-t.left),t=this.getCoordWithoutZoom(this.dragCurrentY-t.top),i-=(o=a.getOffset()).x,t-=o.y,!e.ctrlKey&&this.rb.getDocument().isGridVisible()&&(i=P(i,o=this.rb.getDocument().getGridSize()),t=P(t,o)),o={x:""+i,y:""+t,containerId:a.getId()},i=new te(!0,this.dragElementType,o,this.rb.getUniqueId(),a.getId(),-1,this.rb),this.rb.executeCommand(i)),e.preventDefault()}}},{key:"processDrag",value:function(e){var t=c(e);if(this.dragType===Q.dragType.element){var r=this.getContainer(t.x,t.y,this.dragElementType,this.dragLinkedContainers),n=null!==r?r.getId():null;if(n!==this.dragCurrentContainerId){var o,i=I(document.querySelectorAll(".rbroElementContainer"));try{for(i.s();!(o=i.n()).done;)o.value.classList.remove("rbroElementDragOver")}catch(e){i.e(e)}finally{i.f()}null!==r&&n!==this.dragContainerId&&r.dragOver()}this.dragCurrentContainerId=n}this.dragCurrentX=t.x,this.dragCurrentY=t.y,this.dragSnapToGrid=!e.ctrlKey;r=this.rb.getDataObject(this.dragObjectId);null!==r&&(n=r.getDragDiff(this.getCoordWithoutZoom(t.x-this.dragStartX),this.getCoordWithoutZoom(t.y-this.dragStartY),this.dragType,this.dragSnapToGrid&&this.isGridVisible()?this.getGridSize():0),this.rb.updateSelectionDrag(n.x,n.y,this.dragType,null,!1))}},{key:"updatePageSize",value:function(e,t){this.elDoc.style.width=this.rb.toPixel(e),this.elDoc.style.height=this.rb.toPixel(t)}},{key:"updatePageMargins",value:function(){var e=this.rb.getDocumentProperties(),t=ve(e.getValue("marginLeft")),r=ve(e.getValue("marginTop")),n=ve(e.getValue("marginRight")),e=ve(e.getValue("marginBottom")),o=this.rb.toPixel(t),i=this.rb.toPixel(r-1),a=this.rb.toPixel(n),l=this.rb.toPixel(e);this.elDividerMarginLeft.style.left=o,this.elDividerMarginTop.style.top=i,0!==t?(this.elDividerMarginLeft.style.left=o,this.elDividerMarginLeft.style.display="block"):this.elDividerMarginLeft.style.display="none",0!==r?(this.elDividerMarginTop.style.top=i,this.elDividerMarginTop.style.display="block"):this.elDividerMarginTop.style.display="none",0!==n?(this.elDividerMarginRight.style.right=a,this.elDividerMarginRight.style.display="block"):this.elDividerMarginRight.style.display="none",0!==e?(this.elDividerMarginBottom.style.bottom=l,this.elDividerMarginBottom.style.display="block"):this.elDividerMarginBottom.style.display="none",this.elDocContent.style.left=o,this.elDocContent.style.top=i,this.elDocContent.style.right=a,this.elDocContent.style.bottom=l}},{key:"updateHeader",value:function(){var e,t=this.rb.getDocumentProperties();t.getValue("header")?(e=this.rb.toPixel(t.getValue("headerSize")),this.elHeader.style.height=e,this.elHeader.style.display="block",this.elDividerHeader.style.top=this.rb.toPixel(ve(t.getValue("marginTop"))+ve(t.getValue("headerSize"))-1),this.elDividerHeader.style.display="block",this.elContent.style.top=e):(this.elHeader.style.display="none",this.elDividerHeader.style.display="none",this.elContent.style.top=this.rb.toPixel(0))}},{key:"updateFooter",value:function(){var e,t=this.rb.getDocumentProperties();t.getValue("footer")?(e=this.rb.toPixel(t.getValue("footerSize")),this.elFooter.style.height=e,this.elFooter.style.display="block",this.elDividerFooter.style.bottom=this.rb.toPixel(ve(t.getValue("marginBottom"))+ve(t.getValue("footerSize"))),this.elDividerFooter.style.display="block",this.elContent.style.bottom=e):(this.elFooter.style.display="none",this.elDividerFooter.style.display="none",this.elContent.style.bottom=this.rb.toPixel(0))}},{key:"setDocumentTab",value:function(e){var t,r=document.querySelectorAll("#rbro_document_tabs .rbroDocumentTab"),n=document.querySelectorAll(".rbroElementButtons .rbroMenuButton"),o=document.querySelectorAll(".rbroActionButtons .rbroActionButton"),i=I(r);try{for(i.s();!(t=i.n()).done;)t.value.classList.remove("rbroActive")}catch(e){i.e(e)}finally{i.f()}if(e===C.tab.pdfLayout){this.elTabPdfLayout.classList.add("rbroActive"),this.elDoc.classList.remove("rbroHidden"),this.elPdfPreview.style.zIndex="",this.elPdfPreview.style.height="0";var a,l=I(n);try{for(l.s();!(a=l.n()).done;){var s=a.value;s.classList.remove("rbroDisabled"),s.draggable=!0}}catch(e){l.e(e)}finally{l.f()}var c,u=I(o);try{for(u.s();!(c=u.n()).done;)c.value.disabled=!1}catch(e){u.e(e)}finally{u.f()}}else if(this.pdfPreviewExists&&e===C.tab.pdfPreview){this.elTabPdfPreview.classList.add("rbroActive"),this.elDoc.classList.add("rbroHidden"),this.elPdfPreview.style.zIndex="1",this.elPdfPreview.style.height="";var d,p=I(n);try{for(p.s();!(d=p.n()).done;){var h=d.value;h.classList.add("rbroDisabled"),h.draggable=!1}}catch(e){p.e(e)}finally{p.f()}var f,y=I(o);try{for(y.s();!(f=y.n()).done;)f.value.disabled=!0}catch(e){y.e(e)}finally{y.f()}}}},{key:"openPdfPreviewTab",value:function(e,t){if(m(this.elPdfPreview),this.pdfPreviewObjectURL&&(URL.revokeObjectURL(this.pdfPreviewObjectURL),this.pdfPreviewObjectURL=null),t&&0<Object.keys(t).length){var r,n=this,o=new XMLHttpRequest;for(r in o.responseType="blob",o.onreadystatechange=function(){var e;o.readyState===XMLHttpRequest.DONE&&(200===o.status?((e=document.createElement("object")).type="application/pdf",e.width="100%",e.height="100%",n.pdfPreviewObjectURL=URL.createObjectURL(o.response),e.data=n.pdfPreviewObjectURL,n.elPdfPreview.append(e)):alert("preview failed"))},o.open("GET",e,!0),t)t.hasOwnProperty(r)&&o.setRequestHeader(r,t[r]);o.send()}else{e=ge("object",{data:e,type:"application/pdf",width:"100%",height:"100%"});this.elPdfPreview.append(e)}this.pdfPreviewExists=!0,this.setDocumentTab(C.tab.pdfPreview),this.updateDocumentTabs()}},{key:"closePdfPreviewTab",value:function(){this.pdfPreviewExists=!1,m(this.elPdfPreview),this.setDocumentTab(C.tab.pdfLayout),this.updateDocumentTabs()}},{key:"updateDocumentTabs",value:function(){var e=1;this.pdfPreviewExists?(this.elTabPdfPreview.classList.remove("rbroHidden"),e++):this.elTabPdfPreview.classList.add("rbroHidden"),1<e?(document.getElementById("rbro_document_tabs").style.display="block",this.elPanel.classList.add("rbroHasTabs")):(document.getElementById("rbro_document_tabs").style.display="none",this.elPanel.classList.remove("rbroHasTabs"))}},{key:"getContainer",value:function(e,t,r,n){var o=g(this.elDocContent);return this.rb.getContainer(this.getCoordWithoutZoom(e-o.left),this.getCoordWithoutZoom(t-o.top),r,n)}},{key:"getContentScrollPosY",value:function(){var e=g(this.elDocContent);return g(this.elPanel).top-e.top}},{key:"isGridVisible",value:function(){return this.gridVisible}},{key:"toggleGrid",value:function(){this.gridVisible=!this.gridVisible,this.gridVisible?this.elDocContent.classList.add("rbroDocumentGrid"):this.elDocContent.classList.remove("rbroDocumentGrid")}},{key:"zoomIn",value:function(){for(var e=0;e<this.zoomLevels.length-1;e++)if(this.zoom===this.zoomLevels[e]){this.updateZoomLevel(this.zoomLevels[e+1]);break}}},{key:"zoomOut",value:function(){for(var e=1;e<this.zoomLevels.length;e++)if(this.zoom===this.zoomLevels[e]){this.updateZoomLevel(this.zoomLevels[e-1]);break}}},{key:"isZoomInPossible",value:function(){return this.zoom<this.zoomLevels[this.zoomLevels.length-1]}},{key:"isZoomOutPossible",value:function(){return this.zoom>this.zoomLevels[0]}},{key:"pageSizeChanged",value:function(){this.updateZoomLevel(this.zoom)}},{key:"updateZoomLevel",value:function(e){this.zoom=e;var t=this.rb.getDocumentProperties().getPageSize(),r=t.width*(e/100),n=t.height*(e/100),o=this.rb.getWidth()-this.rb.getMainPanel().getTotalPanelWidth(),i=getComputedStyle(this.elPanel),a=parseInt(i.paddingTop)||0,i=parseInt(i.paddingBottom)||0,a=this.elPanel.clientHeight-a-i,i=0;100!==e?(t.width>o?(this.elDoc.style.transformOrigin="",e<100&&r<o&&(i=Math.round((o-r)/2))):o<r?(this.elDoc.style.margin="0",this.elDoc.style.transformOrigin=""):(this.elDoc.style.margin="",this.elDoc.style.transformOrigin="top center"),this.elDoc.style.transform="translateX(".concat(i,"px) scale(").concat(this.zoom/100,")")):(this.elDoc.style.margin="",this.elDoc.style.transform="",this.elDoc.style.transformOrigin=""),document.getElementById("rbro_menu_zoom_level").textContent=e+" %",this.rb.getMenuPanel().updateZoomButtons(this.isZoomInPossible(),this.isZoomOutPossible()),this.elPanel.style.overflowX=r<o?"hidden":"",this.elPanel.style.overflowY=n<a?"hidden":""}},{key:"getCoordWithoutZoom",value:function(e){return Math.round(e*(100/this.zoom))}},{key:"getGridSize",value:function(){return this.gridSize}},{key:"getHeight",value:function(){return this.elDocContent.clientHeight}},{key:"getElement",value:function(e){return e===b.bandType.header?this.elHeader:e===b.bandType.content?this.elContent:e===b.bandType.footer?this.elFooter:null}},{key:"isDragging",value:function(){return this.dragging}},{key:"isDragged",value:function(){return this.dragging&&(this.dragStartX!==this.dragCurrentX||this.dragStartY!==this.dragCurrentY)}},{key:"startDrag",value:function(e,t,r,n,o,i){this.dragging=!0,this.dragStartX=this.dragCurrentX=e,this.dragStartY=this.dragCurrentY=t,this.dragElementType=o,this.dragType=i,this.dragObjectId=r,this.dragContainerId=n,this.dragLinkedContainers=[],this.dragCurrentContainerId=null,this.dragSnapToGrid=!1;e=this.rb.getDataObject(this.dragObjectId);e&&(this.dragLinkedContainers=e.getLinkedContainers())}},{key:"stopDrag",value:function(){var e=this.getCoordWithoutZoom(this.dragCurrentX-this.dragStartX),t=this.getCoordWithoutZoom(this.dragCurrentY-this.dragStartY),r=this.rb.getDataObject(this.dragObjectId);if(null===r||0===e&&0===t)this.rb.updateSelectionDrag(0,0,this.dragType,null,!1);else{var n=null,o=(this.dragType===Q.dragType.element&&(n=this.rb.getDataObject(this.dragCurrentContainerId)),this.rb.getSelectedObjects());if(1<o.length&&null!==n)for(var i=o[0].getContainerId(),a=1;a<o.length;a++)if(o[a].getContainerId()!==i){n=null;break}r=r.getDragDiff(e,t,this.dragType,this.dragSnapToGrid&&this.isGridVisible()?this.getGridSize():0);this.rb.updateSelectionDrag(r.x,r.y,this.dragType,n,!0)}this.dragging=!1,this.dragType=Q.dragType.none,this.dragObjectId=null,this.dragContainerId=null,this.dragCurrentContainerId=null;var l,s=I(document.querySelectorAll(".rbroElementContainer"));try{for(s.s();!(l=s.n()).done;)l.value.classList.remove("rbroElementDragOver")}catch(e){s.e(e)}finally{s.f()}}},{key:"startBrowserDrag",value:function(e){this.dragEnterCount=0,this.dragObjectId=null,this.dragContainerId=null,this.dragLinkedContainers=[],this.dragElementType=e,this.dragStartX=0,this.dragStartY=0,this.dragCurrentX=0,this.dragCurrentY=0}},{key:"startSelectionArea",value:function(e,t){this.selectionAreaStarted=!0,this.selectionAreaStartX=e,this.selectionAreaStartY=t}},{key:"stopSelectionArea",value:function(e,t,r){var n=this.getSelectionArea(e,t);if(10<n.width&&10<n.height){var o,i=I(this.rb.getDocElements(!0));try{for(i.s();!(o=i.n()).done;){var a,l,s,c=o.value;c.isAreaSelectionAllowed()&&(a=c.getAbsolutePosition(),n.left<a.x+c.getValue("widthVal")&&n.left+n.width>=a.x&&n.top<a.y+c.getValue("heightVal")&&n.top+n.height>=a.y&&(l=!0,(l=c.getContainerId()&&null!==(s=c.getContainer())&&s.isSelected()?!1:l)&&(this.rb.selectObject(c.getId(),r),r=!1)))}}catch(e){i.e(e)}finally{i.f()}}this.selectionAreaStarted=!1,this.selectionAreaStartX=0,this.selectionAreaStartY=0,this.elSelectionArea.classList.add("rbroHidden")}},{key:"getSelectionArea",value:function(e,t){var r={};return e>this.selectionAreaStartX?(r.left=this.selectionAreaStartX,r.width=e-this.selectionAreaStartX):(r.left=e,r.width=this.selectionAreaStartX-e),t>this.selectionAreaStartY?(r.top=this.selectionAreaStartY,r.height=t-this.selectionAreaStartY):(r.top=t,r.height=this.selectionAreaStartY-t),r}},{key:"mouseUp",value:function(e){var t;this.isDragging()&&this.stopDrag(),this.selectionAreaStarted&&(t=g(this.elDocContent),this.stopSelectionArea(this.getCoordWithoutZoom(e.pageX-t.left),this.getCoordWithoutZoom(e.pageY-t.top),!e.shiftKey))}},{key:"windowResized",value:function(){this.updateZoomLevel(this.zoom)}}]);var Re=C;function C(e,t,r){u(this,C),this.rootElement=e,this.rb=r,this.elPanel=null,this.elTabPdfLayout=null,this.elTabPdfPreview=null,this.elDoc=null,this.elDocContent=null,this.elHeader=null,this.elContent=null,this.elFooter=null,this.elSelectionArea=null,this.elDividerMarginLeft=null,this.elDividerMarginTop=null,this.elDividerMarginRight=null,this.elDividerMarginBottom=null,this.elDividerHeader=null,this.elDividerFooter=null,this.elPdfPreview=null,this.gridVisible=t,this.gridSize=10,this.zoom=100,this.zoomLevels=[25,50,75,100,150,200,400],this.pdfPreviewExists=!1,this.pdfPreviewObjectURL=null,this.dragging=!1,this.dragElementType=null,this.dragType=Q.dragType.none,this.dragObjectId=null,this.dragContainerId=null,this.dragLinkedContainers=[],this.dragCurrentContainerId=null,this.dragStartX=0,this.dragStartY=0,this.dragCurrentX=0,this.dragCurrentY=0,this.dragSnapToGrid=!1,this.dragEnterCount=0,this.selectionAreaStarted=!1,this.selectionAreaStartX=0,this.selectionAreaStartY=0}Re.tab={pdfLayout:"pdfLayout",pdfPreview:"pdfPreview"};var Ne,Me,Fe="function"==typeof Map?new Map:(Ne=[],Me=[],{has:function(e){return-1<Ne.indexOf(e)},get:function(e){return Me[Ne.indexOf(e)]},set:function(e,t){-1===Ne.indexOf(e)&&(Ne.push(e),Me.push(t))},delete:function(e){e=Ne.indexOf(e);-1<e&&(Ne.splice(e,1),Me.splice(e,1))}}),Ve=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(Ne){Ve=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function qe(e){e=Fe.get(e);e&&e.destroy()}function ze(e){e=Fe.get(e);e&&e.update()}var He=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((He=function(e){return e}).destroy=function(e){return e},He.update=function(e){return e}):((He=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){function n(e){var t=i.style.width;i.style.width="0px",i.style.width=t,i.style.overflowY=e}function o(){var e,t;0!==i.scrollHeight&&(e=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(i),t=document.documentElement&&document.documentElement.scrollTop,i.style.height="",i.style.height=i.scrollHeight+a+"px",l=i.clientWidth,e.forEach(function(e){e.node.scrollTop=e.scrollTop}),t&&(document.documentElement.scrollTop=t))}function r(){o();var e=Math.round(parseFloat(i.style.height)),t=window.getComputedStyle(i,null),r="content-box"===t.boxSizing?Math.round(parseFloat(t.height)):i.offsetHeight;if(r<e?"hidden"===t.overflowY&&(n("scroll"),o(),r="content-box"===t.boxSizing?Math.round(parseFloat(window.getComputedStyle(i,null).height)):i.offsetHeight):"hidden"!==t.overflowY&&(n("hidden"),o(),r="content-box"===t.boxSizing?Math.round(parseFloat(window.getComputedStyle(i,null).height)):i.offsetHeight),s!==r){s=r;e=Ve("autosize:resized");try{i.dispatchEvent(e)}catch(e){}}}var i,a,l,s,c,u;(i=e)&&i.nodeName&&"TEXTAREA"===i.nodeName&&!Fe.has(i)&&(s=l=a=null,c=function(){i.clientWidth!==l&&r()},u=function(t){window.removeEventListener("resize",c,!1),i.removeEventListener("input",r,!1),i.removeEventListener("keyup",r,!1),i.removeEventListener("autosize:destroy",u,!1),i.removeEventListener("autosize:update",r,!1),Object.keys(t).forEach(function(e){i.style[e]=t[e]}),Fe.delete(i)}.bind(i,{height:i.style.height,resize:i.style.resize,overflowY:i.style.overflowY,overflowX:i.style.overflowX,wordWrap:i.style.wordWrap}),i.addEventListener("autosize:destroy",u,!1),"onpropertychange"in i&&"oninput"in i&&i.addEventListener("keyup",r,!1),window.addEventListener("resize",c,!1),i.addEventListener("input",r,!1),i.addEventListener("autosize:update",r,!1),i.style.overflowX="hidden",i.style.wordWrap="break-word",Fe.set(i,{destroy:u,update:r}),"vertical"===(e=window.getComputedStyle(i,null)).resize?i.style.resize="none":"both"===e.resize&&(i.style.resize="horizontal"),a="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(a)&&(a=0),r())}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],qe),e},He.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],ze),e});const Ee=He;function Ue(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return We(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?We(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e(x,[{key:"render",value:function(){var t=this,e=(this.elWindow=ge("div",{class:"rbroPopupWindow rbroHidden"}),this.elContent=ge("div",{class:"rbroPopupWindowContent"}),this.elContent.addEventListener("mouseup",function(e){e.stopPropagation()}),this.elWindow.append(this.elContent),ge("div",{class:"rbroButton rbroRoundButton rbroPopupWindowCancel rbroIcon-cancel"}));e.addEventListener("click",function(e){t.hide()}),this.elWindow.append(e),document.body.append(this.elWindow)}},{key:"destroy",value:function(){this.elWindow.remove()}},{key:"show",value:function(e,t,r,n,l,s,o){var c=this,i=window.innerWidth,a=window.innerHeight,u=null,d=null;if(this.input=""!==r?document.getElementById(r):null,this.objId=t,this.type=l,this.items=e,m(this.elContent),this.rootParameter=o,this.nextRowId=1,this.rowMap={},s&&(d=s.getSelection()),l===x.type.testData){r=o.getTestData(!0),t=(this.createTestDataTable(this.elContent,o,r),Math.round(.8*i)),o=Math.round(.8*a),r=document.querySelector("html").scrollTop;this.elWindow.style.left=Math.round((i-t)/2)+"px",this.elWindow.style.top=Math.round((a-o)/2)+r+"px",this.elWindow.style.width=t+"px",this.elWindow.style.height=o+"px",document.body.append(ge("div",{id:"rbro_background_overlay",class:"rbroBackgroundOverlay"})),document.body.classList.add("rbroFixedBackground")}else{l!==x.type.parameterSet&&l!==x.type.parameterAppend||((u=ge("input",{class:"rbroPopupSearch",placeholder:this.rb.getLabel("parameterSearchPlaceholder")})).addEventListener("input",function(e){c.filterParameters(u.value)}),this.elContent.append(u));var p=ge("ul");p.addEventListener("mousedown",function(e){e.preventDefault()});var h,f=Ue(e);try{var y=function(){var e,a=h.value,t=ge("li");a.separator?(l!==x.type.parameterSet&&l!==x.type.parameterAppend||!a.id||t.setAttribute("id","parameter_group_"+a.id),e="rbroPopupItemSeparator",a.separatorClass&&(e+=" "+a.separatorClass),t.setAttribute("class",e)):(l!==x.type.parameterSet&&l!==x.type.parameterAppend||!a.id||t.setAttribute("id","parameter_"+a.id),t.addEventListener("mousedown",function(e){var t,r,n,o,i;l===x.type.pattern?(c.input.value=a.name,c.input.dispatchEvent(new Event("input")),c.hide()):l===x.type.parameterSet?(c.input.value="${"+a.name+"}",c.input.dispatchEvent(new Event("input")),Ee.update(c.input),c.hide()):l===x.type.parameterAppend&&(r="${"+a.name+"}",s?d&&s.insertText(d.index,r):(t=c.input,r=r,document.selection?(t.focus(),document.selection.createRange().text=r,t.focus()):t.selectionStart||0===t.selectionStart?(n=t.selectionStart,o=t.selectionEnd,i=t.scrollTop,t.value=t.value.substring(0,n)+r+t.value.substring(o,t.value.length),t.focus(),t.selectionStart=n+r.length,t.selectionEnd=n+r.length,t.scrollTop=i):(t.value+=r,t.focus()),Ee.update(c.input),c.input.dispatchEvent(new Event("input"))),c.hide()),e.preventDefault()})),t.append(ge("div",{class:"rbroPopupItemHeader"},a.name)),a.description&&""!==a.description&&t.append(ge("div",{class:"rbroPopupItemDescription"},a.description)),p.append(t)};for(f.s();!(h=f.n()).done;)y()}catch(e){f.e(e)}finally{f.f()}this.elContent.append(p);i=g(this.input),r=i.top;r<a/2||r<300?r+this.input.clientHeight+300<a&&(r+=this.input.clientHeight):r-=300,this.elWindow.style.left=i.left+"px",this.elWindow.style.top=r+"px",this.elWindow.style.width="400px",this.elWindow.style.height="300px"}this.elWindow.classList.remove("rbroHidden"),this.visible=!0,null!==u&&u.focus()}},{key:"hide",value:function(){var e,t;this.visible&&(null!==this.input&&this.input.focus(),this.type===x.type.testData&&(e=this.getTestData(this.elContent,this.rootParameter),t=this.rb.getDataObject(this.objId),e=JSON.stringify(e),null!==t&&t.getValue("testData")!==e&&(t=new me(this.objId,"testData",e,me.type.text,this.rb),this.rb.executeCommand(t)),document.getElementById("rbro_background_overlay").remove()),this.elWindow.classList.add("rbroHidden"),m(this.elContent),document.body.classList.remove("rbroFixedBackground"),this.visible=!1,this.items=null)}},{key:"createTestDataTable",value:function(e,t,r){var n,o=this,i=t.getParameterFields(),a=ge("div"),l=ge("table"),s=ge("tr"),c=ge("tbody"),u=(t.type===we.type.array||t.type===we.type.simpleArray?Array.isArray(r)||(r=[]):t.type!==we.type.map||r&&Object.getPrototypeOf(r)===Object.prototype||(r={}),ge("th"));t.type===we.type.map&&(u.style.display="none"),s.append(u);var d,p=Ue(i);try{for(p.s();!(d=p.n()).done;){var h=d.value,f=ge("th",{},h.name);h.type===we.type.image&&f.append(ge("span",{title:this.rb.getLabel("parameterTestDataImageInfo"),class:"rbroIcon-info"})),s.append(f)}}catch(e){p.e(e)}finally{p.f()}var u=ge("thead");if(u.append(s),l.append(u),t.type===we.type.map)this.addTestDataRow(c,t,i,[r],0);else{var y=Array.isArray(r)?r:[];if(0===y.length)this.addEmptyTestDataRow(c,t,i);else for(n=0;n<y.length;n++)this.addTestDataRow(c,t,i,y,n)}l.append(c),a.append(l),t.type!==we.type.map&&((u=ge("div",{class:"rbroButton rbroFullWidthButton"})).append(ge("div",{class:"rbroButton rbroPopupWindowButton"},this.rb.getLabel("parameterAddTestData"))),u.addEventListener("click",function(e){o.addEmptyTestDataRow(c,t,i)}),a.append(u)),m(e),e.append(a)}},{key:"addEmptyTestDataRow",value:function(e,t,r){var n,o={},i=Ue(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.type===we.type.array||a.type===we.type.simpleArray?o[a.name]=[]:a.type===we.type.map?o[a.name]={}:o[a.name]=""}}catch(e){i.e(e)}finally{i.f()}this.addTestDataRow(e,t,r,[o],0)}},{key:"addTestDataRow",value:function(e,t,r,n,o){var i=this,a=n[o],l=ge("tr"),o=(l.dataset.rowId=String(this.nextRowId),this.rowMap[String(this.nextRowId)]={type:"row",data:a},this.nextRowId++,ge("td"));t.type!==we.type.map?((t=ge("div",{class:"rbroButton rbroDeleteButton rbroIcon-cancel"})).addEventListener("click",function(e){var e=e.target.parentElement.parentElement,t=e.dataset.rowId,e=(e.remove(),i.rowMap[t]);n.splice(n.indexOf(e.data),1),delete i.rowMap[t]}),o.append(t)):o.style.display="none",l.append(o);var s,c=r.length,u=Ue(r);try{for(u.s();!(s=u.n()).done;){var d=s.value,p=d.type===we.type.array||d.type===we.type.simpleArray?[]:"";null!==a&&d.name in a&&(p=a[d.name]),this.appendColumn(l,d,p,a,c)}}catch(e){u.e(e)}finally{u.f()}e.append(l)}},{key:"appendColumn",value:function(h,f,e,y,m){var g,b,v,t,r,o,i,n,l,_=this,a=ge("td");f.type===we.type.array||f.type===we.type.simpleArray||f.type===we.type.map?(g=ge("div",{class:"expandableCell"}),b=ge("span",{class:"rbroIcon-plus"}),g.append(b),v=ge("span"),g.append(v),g.addEventListener("click",function(e){var t,r,n=!g.classList.contains("rbroExpandedCell"),o=h.nextElementSibling;if(o&&"TR"===o.tagName){var i=o.querySelector("td table");if(i){var a,l=Ue(h.querySelectorAll(".expandableCell"));try{for(l.s();!(a=l.n()).done;){var s=a.value;if(s.classList.contains("rbroExpandedCell")){s.classList.remove("rbroExpandedCell");var c,u=s.children[0],d=s.children[1],p=(u.classList.remove("rbroIcon-minus"),u.classList.add("rbroIcon-plus"),_.rowMap[o.dataset.rowId]);"table"===p.type&&(p.parentData[p.field.name]=_.getTestData(i,p.field.parameter),p.field.type===we.type.array||p.field.type===we.type.simpleArray)&&(c=p.field.name in y&&Array.isArray(y[p.field.name])?y[p.field.name].length:0,_.setTableRowCount(d,c));break}}}catch(e){l.e(e)}finally{l.f()}o.remove()}}n&&((n=ge("tr")).dataset.rowId=String(_.nextRowId),_.rowMap[String(_.nextRowId)]={type:"table",field:f,parentData:y},_.nextRowId++,t=ge("td",{colspan:String(m+1)}),r=y[f.name],_.createTestDataTable(t,f.parameter,r),n.append(t),h.insertAdjacentElement("afterend",n),g.classList.add("rbroExpandedCell"),b.classList.remove("rbroIcon-plus"),b.classList.add("rbroIcon-minus"),v.textContent="")}),f.type!==we.type.array&&f.type!==we.type.simpleArray||(t=f.name in y&&Array.isArray(y[f.name])?y[f.name].length:0,this.setTableRowCount(v,t)),a.append(g)):f.type===we.type.image?(t=ge("div",{class:"rbroImageFileContainer"}),(r=ge("input",{type:"file"})).addEventListener("change",function(e){var t,r,n,e=e.target.files;e&&e[0]&&(t=new FileReader,r=_.rb,n=e[0].name,t.onload=function(e){y[f.name]={data:e.target.result,filename:n},o.classList.remove("rbroHidden"),i.textContent=n},t.onerror=function(e){alert(r.getLabel("docElementLoadImageErrorMsg"))},t.readAsDataURL(e[0]))}),t.append(r),o=ge("div",{class:"rbroImageFile rbroHidden"}),i=ge("div"),o.append(i),(n=ge("div",{class:"rbroIcon-cancel rbroButton rbroDeleteButton rbroRoundButton"})).addEventListener("click",function(e){r.value="",y[f.name]={data:"",filename:""},o.classList.add("rbroHidden"),i.textContent=""}),o.append(n),t.append(o),e.filename&&(i.textContent=e.filename,o.classList.remove("rbroHidden")),a.append(t)):(l=ge("input"),f.type===we.type.boolean?(l.setAttribute("type","checkbox"),e&&(l.checked=!0),a.classList.add("rbroTestDataCheckbox")):(l.setAttribute("type","text"),e&&l.setAttribute("value",e)),l.addEventListener("focus",function(e){l.parentElement.classList.add("rbroHasFocus")}),l.addEventListener("blur",function(e){l.parentElement.classList.remove("rbroHasFocus")}),f.type===we.type.number?function(){var a=this;l.addEventListener("keyup",function(e){var t,r=e.target.value,n=r.reverse().replace(/[^0-9\-\.,]|[\-](?=.)|[\.,](?=[0-9]*[\.,])/g,"").reverse(),o=a.className,i=o?o.indexOf("decimalPlaces"):-1;-1!==i&&(t=-1!==(t=o.indexOf(" ",i+=13))?parseInt(o.substring(i,t),10):parseInt(o.substr(i),10),isNaN(t)||-1!==(i=-1===(i=n.indexOf("."))?n.indexOf(","):i)&&n.length-1-i>t&&(n=n.substring(0,i+t+1))),r!==n&&(e.target.value=n)})}():f.type===we.type.date&&l.setAttribute("placeholder",this.rb.getLabel("parameterTestDataDatePattern")),a.append(l)),h.append(a)}},{key:"getTestData",value:function(e,t){var r=t.getParameterFields(),n=null;t.type===we.type.array||t.type===we.type.simpleArray?n=[]:t.type===we.type.map&&(n={});var o,i=Ue(e.querySelector("tbody").children);try{for(i.s();!(o=i.n()).done;){var a=o.value,l=this.rowMap[a.dataset.rowId];if("table"===l.type)l.parentData[l.field.name]=this.getTestData(a,l.field.parameter);else{var s,c=l.data,u=a.querySelectorAll("input"),d=0,p=Ue(r);try{for(p.s();!(s=p.n()).done;){var h,f=s.value;f.type!==we.type.array&&f.type!==we.type.simpleArray&&f.type!==we.type.map&&(h=u[d],f.type===we.type.boolean?c[f.name]=h.checked:f.type!==we.type.image&&(c[f.name]=h.value.trim()),d++)}}catch(e){p.e(e)}finally{p.f()}t.type===we.type.array||t.type===we.type.simpleArray?n.push(c):t.type===we.type.map&&(n=c)}}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"setTableRowCount",value:function(e,t){e.textContent=0===t?this.rb.getLabel("parameterTestDataRowCountEmpty"):1===t?this.rb.getLabel("parameterTestDataRowCountOne"):this.rb.getLabel("parameterTestDataRowCount").replace("${count}",String(t))}},{key:"filterParameters",value:function(e){var t=null,r=0;if(null!==this.items){e=e.toLowerCase();var n,o=Ue(this.items);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.separator?(null!==t&&(document.getElementById("parameter_group_"+t).style.display=0<r?"block":"none"),t=i.id||null,r=0):-1!==i.nameLowerCase.indexOf(e)?(document.getElementById("parameter_"+i.id).style.display="block",-1!==t&&r++):document.getElementById("parameter_"+i.id).style.display="none"}}catch(e){o.e(e)}finally{o.f()}null!==t&&(document.getElementById("parameter_group_"+t).style.display=0<r?"block":"none")}}}]);var Ie=x;function x(e,t){u(this,x),this.rootElement=e,this.rb=t,this.elWindow=null,this.elContent=null,this.input=null,this.objId=null,this.type=null,this.visible=!1,this.items=null,this.rootParameter=null,this.nextRowId=-1,this.rowMap=null}function Ge(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return Ke(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ke(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ie.type={parameterSet:0,parameterAppend:1,pattern:2,testData:3};e(n,[{key:"setInitialData",value:function(e){for(var t in e)e.hasOwnProperty(t)&&this.hasOwnProperty(t)&&(this[t]=e[t]);this.headerSizeVal=this.header?ve(this.headerSize):0,this.footerSizeVal=this.footer?ve(this.footerSize):0,this.marginLeftVal=ve(this.marginLeft),this.marginTopVal=ve(this.marginTop),this.marginRightVal=ve(this.marginRight),this.marginBottomVal=ve(this.marginBottom)}},{key:"setup",value:function(){var e=this.getPageSize();this.updatePageSize(e),this.rb.getDocument().updatePageMargins(),this.rb.getDocument().updateHeader(),this.rb.getDocument().updateFooter(),this.updateHeader(),this.updateFooter()}},{key:"getFields",value:function(){return["pageFormat","pageWidth","pageHeight","unit","orientation","contentHeight","marginLeft","marginTop","marginRight","marginBottom","header","headerSize","headerDisplay","footer","footerSize","footerDisplay","patternLocale","patternCurrencySymbol","patternNumberGroupSymbol"]}},{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.rb.getLabel("documentProperties")}},{key:"getPanelItem",value:function(){return this.panelItem}},{key:"setPanelItem",value:function(e){this.panelItem=e}},{key:"getValue",value:function(e){return this[e]}},{key:"setValue",value:function(e,t){this[e]=t,"marginLeft"===e||"marginTop"===e||"marginRight"===e||"marginBottom"===e?(this[e+"Val"]=ve(t),this.rb.getDocument().updatePageMargins(),this.rb.getDocument().updateHeader(),this.rb.getDocument().updateFooter()):"header"===e?this.updateHeader():"footer"===e&&this.updateFooter(),"header"!==e&&"headerSize"!==e||(this.rb.getDocument().updateHeader(),this.headerSizeVal=this.header?ve(this.headerSize):0),"footer"!==e&&"footerSize"!==e||(this.rb.getDocument().updateFooter(),this.footerSizeVal=this.footer?ve(this.footerSize):0),"pageFormat"!==e&&"pageWidth"!==e&&"pageHeight"!==e&&"unit"!==e&&"orientation"!==e&&"contentHeight"!==e&&"marginTop"!==e&&"marginBottom"!==e||(t=this.getPageSize(),this.updatePageSize(t))}},{key:"updatePageSize",value:function(e){this.width=e.width,this.height=e.height,this.rb.getDocument().updatePageSize(e.width,e.height);var t,r=Ge(this.rb.getDocElements(!0));try{for(r.s();!(t=r.n()).done;){var n=t.value;n instanceof he&&n.setWidth(e.width)}}catch(e){r.e(e)}finally{r.f()}this.rb.getDocument().pageSizeChanged()}},{key:"updateHeader",value:function(){this.header?this.rb.getMainPanel().showHeader():this.rb.getMainPanel().hideHeader()}},{key:"updateFooter",value:function(){this.footer?this.rb.getMainPanel().showFooter():this.rb.getMainPanel().hideFooter()}},{key:"getPageSize",value:function(){var e,t=this.pageFormat===n.pageFormat.A4?(r=this.orientation===n.orientation.portrait?(e=210,297):(e=297,210),n.unit.mm):this.pageFormat===n.pageFormat.A5?(r=this.orientation===n.orientation.portrait?(e=148,210):(e=210,148),n.unit.mm):this.pageFormat===n.pageFormat.letter?(r=this.orientation===n.orientation.portrait?(e=8.5,11):(e=11,8.5),n.unit.inch):(e=ve(this.pageWidth),r=ve(this.pageHeight),this.unit),r=t===n.unit.mm?(e=Math.round(72*e/25.4),Math.round(72*r/25.4)):(e=Math.round(72*e),Math.round(72*r));return{width:e,height:r=""!==this.contentHeight.trim()?ve(this.contentHeight)+this.marginTopVal+this.marginBottomVal+this.headerSizeVal+this.footerSizeVal:r}}},{key:"getContentSize",value:function(){var e=this.getPageSize(),t=""!==this.contentHeight.trim()?ve(this.contentHeight):e.height-this.marginTopVal-this.marginBottomVal-this.headerSizeVal-this.footerSizeVal;return{width:e.width-this.marginLeftVal-this.marginRightVal,height:t}}},{key:"addError",value:function(e){this.errors.push(e)}},{key:"clearErrors",value:function(){this.errors=[]}},{key:"getErrors",value:function(){return this.errors}},{key:"remove",value:function(){}},{key:"select",value:function(){}},{key:"deselect",value:function(){}},{key:"toJS",value:function(){var e,t={},r=Ge(this.getFields());try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n]=this.getValue(n)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"getClassName",value:function(){return"DocumentProperties"}}]);var l=n;function n(e){u(this,n),this.rb=e,this.id="0_document_properties",this.panelItem=null,this.errors=[],this.pageFormat=n.pageFormat.A4,this.pageWidth="",this.pageHeight="",this.unit=n.unit.mm,this.orientation=n.orientation.portrait,this.contentHeight="",this.marginLeft="",this.marginLeftVal=0,this.marginTop="",this.marginTopVal=0,this.marginRight="",this.marginRightVal=0,this.marginBottom="",this.marginBottomVal=0,this.header=!0,this.headerSize="80",this.headerDisplay=n.display.always,this.footer=!0,this.footerSize="80",this.footerDisplay=n.display.always,this.headerSizeVal=this.header?ve(this.headerSize):0,this.footerSizeVal=this.footer?ve(this.footerSize):0,this.patternLocale=e.getProperty("patternLocale"),this.patternCurrencySymbol=e.getProperty("patternCurrencySymbol"),this.patternNumberGroupSymbol=e.getProperty("patternNumberGroupSymbol"),this.width=0,this.height=0}l.outputFormat={pdf:"pdf",xlsx:"xlsx"},l.pageFormat={A4:"A4",A5:"A5",letter:"letter",userDefined:"user_defined"},l.unit={mm:"mm",inch:"inch"},l.orientation={portrait:"portrait",landscape:"landscape"},l.display={always:"always",notOnFirstPage:"not_on_first_page"};const Xe={de_de:{bandContent:"Inhalt",bandFooter:"Fußzeile",bandHeader:"Kopfzeile",clear:"Löschen",contentHeight:"Inhaltshöhe",contentHeightInfo:"Höhe des Inhaltsbereichs, um Elemente zu platzieren (betrifft nicht die tatsächliche Seitengröße)",differentFiles:"versch. Dateien...",differentValues:"versch. Werte...",docElementAlignToPageBottom:"Am unteren Seitenrand ausrichten",docElementAlternateBackgroundColor:"Abwechselnde Hintergrundfarbe",docElementAlwaysPrintOnSamePage:"Immer zusammen auf einer Seite",docElementBarCode:"Barcode",docElementBarWidth:"Balkenbreite",docElementBorderFrame:"außen",docElementBorderFrameRow:"Rahmen und Zeile",docElementBorderGrid:"Alle Rahmenlinien",docElementBorderNone:"Keiner",docElementBorderRow:"Zeilen",docElementColor:"Farbe",docElementColspan:"Anz. verbundene Zellen",docElementColumns:"Spalten",docElementConditionalStyle:"Bedingte Formatierung",docElementConditionalStyleCondition:"Bedingung",docElementContent:"Text",docElementContentRows:"Inhaltszeilen",docElementDataSource:"Datenquelle",docElementDisplayValue:"Wert anzeigen",docElementErrorCorrectionLevel:"Fehlerkorrektur",docElementErrorCorrectionLevelHigh:"Hoch",docElementErrorCorrectionLevelLow:"Niedrig",docElementErrorCorrectionLevelMedium:"Mittel",docElementErrorCorrectionLevelQuartile:"Quartil",docElementEval:"Auswerten",docElementFormat:"Format",docElementFrame:"Rahmen",docElementGroupExpression:"Gruppen Ausdruck",docElementGrowWeight:"Wachstums-Gewicht",docElementGrowWeightInfo:"Wachstumsfaktor zur Verwendung des Platzes von ausgeblendeten Spalten",docElementGrowWeightHigh:"hoch",docElementGrowWeightLow:"niedrig",docElementGuardBar:"Rand-/Trennzeichen",docElementHeight:"Höhe",docElementImage:"Bild",docElementImageFile:"Bilddatei",docElementLabel:"Bezeichnung",docElementLine:"Linie",docElementLink:"Link",docElementLoadImageErrorMsg:"Bild laden fehlgeschlagen",docElementPageBreak:"Seitenumbruch",docElementPattern:"Pattern",docElementPosition:"Position (x, y)",docElementPositionX:"Position (x)",docElementPositionY:"Position (y)",docElementPrintIf:"Anzeigen wenn",docElementPrintSettings:"Anzeige",docElementRemoveEmptyElement:"Entfernen wenn nicht vorhanden",docElementRepeatGroupHeader:"Gruppe auf jeder Seite wiederholen",docElementRepeatHeader:"Auf jeder Seite wiederholen",docElementRichText:"Rich Text",docElementRoot:"Dokument",docElementRotate:"Drehen",docElementSection:"Sektion",docElementShrinkToContentHeight:"Auf Inhaltshöhe reduzieren",docElementSize:"Größe (Breite, Höhe)",docElementSource:"Bildquelle",docElementSpreadsheet:"Tabellenkalkulation",docElementSpreadsheetAddEmptyRow:"Leere Zeile unterhalb einfügen",docElementSpreadsheetColspan:"Anz. verbundene Zellen",docElementSpreadsheetColumn:"Fixe Spalte",docElementSpreadsheetHide:"Ausblenden",docElementSpreadsheetTextWrap:"Zeilenumbruch",docElementStyle:"Formatvorlage",docElementTable:"Tabelle",docElementTableBandPageBreak:"Seitenumbruch mit jeder neuen Gruppe",docElementText:"Text",docElementWidth:"Breite",documentProperties:"Dokumenteinstellungen",documentTabClose:"Schließen",documentTabPdfLayout:"PDF Layout",documentTabPdfPreview:"PDF Vorschau",documentTabXlsxDownload:"XLSX Download",emptyPanel:"Leer",errorMsgDuplicateParameter:"Parameter existiert bereits",errorMsgDuplicateParameterField:"Feld existiert bereits",errorMsgFontNotAvailable:"Schrift ist am Server nicht vorhanden",errorMsgLoadingImageFailed:"Bild laden fehlgeschlagen: ${info}",errorMsgInvalidArray:"Ungültige Liste",errorMsgInvalidAvgSumExpression:"Ausdruck muss ein Zahl-Feld einer Liste enthalten",errorMsgInvalidBarCode:"Ungültiger Barcode Inhalt",errorMsgInvalidDataSource:"Ungültige Datenquelle",errorMsgInvalidDataSourceParameter:"Parameter muss eine Liste sein",errorMsgInvalidDate:"Ungültiges Datum, erwartetes Format ist JJJJ-MM-TT (bzw. JJJJ-MM-TT hh:mm für Datum mit Uhrzeit)",errorMsgInvalidStringData:"Ungültiger Inhalt für Text Parameter ${info}",errorMsgInvalidExpression:"Ungültiger Ausdruck: ${info}",errorMsgInvalidExpressionFuncNotDefined:"Funktion ${info} ist nicht definiert",errorMsgInvalidExpressionNameNotDefined:"Name ${info} ist nicht definiert",errorMsgInvalidExpressionType:"Ausdruck liefert ungültigen Typ",errorMsgInvalidLink:"Link muss mit http:// oder https:// beginnen",errorMsgInvalidImage:"Ungültige Bilddaten, Bild muss base64 kodiert sein",errorMsgInvalidImageSource:"Ungültige Bildquelle, Url beginnend mit http:// bzw. https:// erwartet",errorMsgInvalidImageSourceParameter:"Parameter vom Typ Bild oder String (mit einer Url) notwendig",errorMsgInvalidMap:"Ungültige Auflistung",errorMsgInvalidNumber:"Ungültige Zahl",errorMsgInvalidPageSize:"Ungültige Seitengröße",errorMsgInvalidParameterData:"Daten stimmen nicht mit Parameter überein",errorMsgInvalidParameterName:"Name muss mit einem Zeichen oder Unterstrich beginnen und darf nur Zeichen, Ziffern und Unterstriche enthalten",errorMsgInvalidPattern:"Ungültiges Pattern",errorMsgInvalidPosition:"Die Position ist außerhalb des Bereichs",errorMsgInvalidSize:"Das Element ist außerhalb des Bereichs",errorMsgInvalidTestData:"Ungültige Testdaten",errorMsgMissingData:"Fehlende Daten",errorMsgMissingDataSourceParameter:"Datenquelle Parameter nicht gefunden",errorMsgMissingExpression:"Ausdruck muss gesetzt sein",errorMsgMissingImage:"Fehlendes Bild: Keine Bildquelle oder -datei angegeben",errorMsgMissingParameter:"Parameter nicht gefunden",errorMsgMissingParameterData:"Daten für Parameter {info} nicht gefunden",errorMsgRepeatGroupHeaderAfterContent:"Nicht erlaubt für Gruppe nach Inhaltszeile",errorMsgPlusVersionRequired:"Benötigt kommerzielle PLUS Version",errorMsgSectionBandNotOnSamePage:"Abschnittsbereich passt nicht auf eine Seite",errorMsgSectionBandPageBreakNotAllowed:"Manueller Seitenumbruch ist nicht erlaubt",errorMsgUnicodeEncodeError:"Text enthält nicht druckbare Zeichen",errorMsgUnsupportedImageType:"Bildtyp wird nicht unterstützt (nur .jpg und .png erlaubt)",footer:"Fußzeile",footerDisplay:"Anzeige",footerSize:"Höhe Fußzeile",header:"Kopfzeile",headerDisplay:"Anzeige",headerFooterDisplayAlways:"Immer",headerFooterDisplayNotOnFirstPage:"Nicht auf erster Seite",headerSize:"Höhe Kopfzeile",menuColumnAddLeft:"Spalte links hinzufügen",menuColumnAddRight:"Spalte rechts hinzufügen",menuColumnDelete:"Spalte löschen",menuAlignBottom:"Unten ausrichten",menuAlignCenter:"Zentriert ausrichten",menuAlignLeft:"Links ausrichten",menuAlignMiddle:"Mittig ausrichten",menuAlignRight:"Rechts ausrichten",menuAlignTop:"Oben ausrichten",menuInsertReport:"EINF.",menuInsertReportTip:"Report-Vorlage einfügen",menuLogReport:"LOG",menuLogReportTip:"Report-Vorlage in Konsole ausgeben",menuPreview:"VORSCHAU",menuPreviewTip:"Report-Vorschau",menuRedo:"WIEDERH.",menuRedoTip:"Letzten rückgängig gemachten Befehl wiederholen",menuRowAddAbove:"Zeile oberhalb hinzufügen",menuRowAddBelow:"Zeile unterhalb hinzufügen",menuRowDelete:"Zeile löschen",menuSave:"SPEICHERN",menuSaveTip:"Report speichern",menuToggleGrid:"Raster ein-/ausblenden",menuUndo:"RÜCKG.",menuUndoTip:"Letzten Befehl rückgängig machen",menuZoomIn:"Vergrößern",menuZoomOut:"Verkleinern",nameCopySuffix:"Kopie",orientation:"Ausrichtung",orientationBottom:"unten",orientationLandscape:"Querformat",orientationLeft:"links",orientationPortrait:"Hochformat",orientationRight:"rechts",orientationTop:"oben",pageFormat:"Seitenformat",pageFormatA4:"DIN A4 (210 x 297 mm)",pageFormatA5:"DIN A5 (148 x 210 mm)",pageFormatLetter:"Brief (216 x 279 mm)",pageFormatUserDefined:"Eigene Einstellung",pageHeight:"Höhe",pageMargins:"Seitenränder",pageWidth:"Breite",parameter:"Parameter",parameterAddTestData:"Zeile hinzufügen",parameterArrayItemType:"Listenelement-Typ",parameterEditTestData:"Bearbeiten",parameterEditTestDataNoFields:"Keine Felder für diese Liste definiert",parameterEval:"Text auswerten",parameterExpression:"Ausdruck",parameterListType:"Listen-Typ",parameterName:"Name",parameterNullable:"NULL-Wert erlaubt",parameterPattern:"Pattern",parameterRowParams:"Parameter in Zeile",parameterSearchPlaceholder:"Parameter durchsuchen...",parameterTestData:"Testdaten",parameterTestDataDatePattern:"JJJJ-MM-TT",parameterTestDataImageInfo:"Bilder werden in der Berichtsvorlage gespeichert und können die Größe der Berichtsvorlage erheblich erhöhen",parameterTestDataRowCount:"${count} Zeilen",parameterTestDataRowCountEmpty:"leer",parameterTestDataRowCountOne:"1 Zeile",parameterType:"Typ",parameterTypeArray:"Liste",parameterTypeAverage:"Durchschnitt",parameterTypeBoolean:"Boolean",parameterTypeDate:"Datum",parameterTypeImage:"Bild",parameterTypeMap:"Gruppierung",parameterTypeNumber:"Zahl",parameterTypeSimpleArray:"Einfache Liste",parameterTypeString:"String",parameterTypeSum:"Summe",parameters:"Parameter",parametersDataSource:"Datenquelle Parameter",patternCurrencySymbol:"Währungssymbol",patternDate1:"Tag.Monat.Jahr, z.B. 1.6.1980",patternDate2:"Tag.Monat.Jahr (2-stellig), Stunde(24h):Minute, z.B. 1.6.80, 14:30",patternDate3:"Tag/Monat/Jahr (Monat abgekürzt), z.B. 1/Jun/1980",patternDate4:"Monat/Tag/Jahr (Tag und Monat mit führender Null, falls einstellig), z.B. 06/01/1980",patternLocale:"Pattern Locale",patternNumber1:"Tausender-Trennzeichen",patternNumber2:"Dezimalpunkt gefolgt von 3 Dezimalstellen",patternNumber3:"Dezimalpunkt gefolgt von mind. 2 und max. 4 Dezimalstellen",patternNumber4:"Tausender-Trennzeichen und Dezimalpunkt gefolgt von 2 Dezimalstellen",patternNumber5:"Währungssymbol vor Zahl",patternNumberGroupSymbol:"Tausender-Trennzeichen",patternNumberGroupSymbolInfo:"leer lassen für Standardzeichen",patternSeparatorDates:"--- Datum Pattern ---",patternSeparatorNumbers:"--- Zahlen Pattern ---",plusFeatureInfo:'Benötigt kommerzielle <a href="https://www.reportbro.com/license/index" target="_blank" rel="noreferrer">PLUS Version</a>',plusFeatureInfoNestedParameter:'Verschachtelter Parameter benötigt kommerzielle <a href="https://www.reportbro.com/license/index" target="_blank" rel="noreferrer">PLUS Version</a>',select:"auswählen...",style:"Formatvorlage",styleAlignment:"Ausrichtung",styleBackgroundColor:"Hintergrundfarbe",styleBold:"Fett",styleBorder:"Rahmen",styleBorderAll:"vollständig",styleBorderColor:"Rahmenfarbe",styleBorderWidth:"Rahmenbreite",styleFont:"Schrift",styleFontSizeUnit:"pt",styleHAlignmentCenter:"Zentriert",styleHAlignmentLeft:"Links",styleHAlignmentJustify:"Blocksatz",styleHAlignmentRight:"Rechts",styleItalic:"Kursiv",styleLineSpacing:"Linienabstand",styleName:"Name",styleNone:"Keine",stylePadding:"Innenabstand",styleStrikethrough:"Durchgestrichen",styleTextColor:"Textfarbe",styleTextStyle:"Formatierung",styleUnderline:"Unterstreichen",styleVAlignmentBottom:"Unten",styleVAlignmentMiddle:"Mittig",styleVAlignmentTop:"Oben",styles:"Formatvorlagen"},en_us:{bandContent:"Content",bandFooter:"Footer",bandHeader:"Header",clear:"Clear",contentHeight:"Content height",contentHeightInfo:"affects only GUI size to place elements and not the real page size",differentFiles:"different files...",differentValues:"different values...",docElementAlignToPageBottom:"Align to bottom of page",docElementAlternateBackgroundColor:"Alternate background color",docElementAlwaysPrintOnSamePage:"Always on same page",docElementBarCode:"Bar code",docElementBarWidth:"Bar width",docElementBorderFrame:"Frame",docElementBorderFrameRow:"Frame and row",docElementBorderGrid:"Grid",docElementBorderNone:"None",docElementBorderRow:"Row",docElementColor:"Color",docElementColspan:"Colspan",docElementColumns:"Columns",docElementConditionalStyle:"Conditional style",docElementConditionalStyleCondition:"Condition",docElementContent:"Text",docElementContentRows:"Content rows",docElementDataSource:"Data source",docElementDisplayValue:"Display value",docElementErrorCorrectionLevel:"Error correction",docElementErrorCorrectionLevelHigh:"High",docElementErrorCorrectionLevelLow:"Low",docElementErrorCorrectionLevelMedium:"Medium",docElementErrorCorrectionLevelQuartile:"Quartile",docElementEval:"Evaluate",docElementFormat:"Format",docElementFrame:"Frame",docElementGroupExpression:"Group expression",docElementGrowWeight:"Grow weight",docElementGrowWeightInfo:"Grow factor to take space of hidden columns",docElementGrowWeightHigh:"high",docElementGrowWeightLow:"low",docElementGuardBar:"Guard bars",docElementHeight:"Height",docElementImage:"Image",docElementImageFile:"Image file",docElementLabel:"Label",docElementLine:"Line",docElementLink:"Link",docElementLoadImageErrorMsg:"Loading image failed",docElementPageBreak:"Page break",docElementPattern:"Pattern",docElementPosition:"Position (x, y)",docElementPositionX:"Position (x)",docElementPositionY:"Position (y)",docElementPrintIf:"Print if",docElementPrintSettings:"Print settings",docElementRemoveEmptyElement:"Remove when empty",docElementRepeatGroupHeader:"Repeat group on each page",docElementRepeatHeader:"Repeat header",docElementRichText:"Rich text",docElementRoot:"Document",docElementRotate:"Rotate",docElementSection:"Section",docElementShrinkToContentHeight:"Shrink to content height",docElementSize:"Size (width, height)",docElementSource:"Source",docElementSpreadsheet:"Spreadsheet",docElementSpreadsheetAddEmptyRow:"Add empty row below",docElementSpreadsheetColspan:"Colspan",docElementSpreadsheetColumn:"Fixed column",docElementSpreadsheetHide:"Hide",docElementSpreadsheetTextWrap:"Text wrap",docElementStyle:"Style",docElementTable:"Table",docElementTableBandPageBreak:"Page break with each new group",docElementText:"Text",docElementWidth:"Width",documentProperties:"Document properties",documentTabClose:"Close",documentTabPdfLayout:"PDF Layout",documentTabPdfPreview:"PDF Preview",documentTabXlsxDownload:"XLSX Download",emptyPanel:"Empty panel",errorMsgDuplicateParameter:"Parameter already exists",errorMsgDuplicateParameterField:"Field already exists",errorMsgFontNotAvailable:"Font not available on server",errorMsgLoadingImageFailed:"Loading image failed: ${info}",errorMsgInvalidArray:"Invalid list",errorMsgInvalidAvgSumExpression:"Expression must contain number field of a list parameter",errorMsgInvalidBarCode:"Invalid bar code content",errorMsgInvalidDataSource:"Invalid data source",errorMsgInvalidDataSourceParameter:"Parameter must be a list",errorMsgInvalidDate:"Invalid date, expected format is YYYY-MM-DD (or YYYY-MM-DD hh:mm for date with time)",errorMsgInvalidStringData:"Invalid data for text parameter ${info}",errorMsgInvalidExpression:"Invalid expression: ${info}",errorMsgInvalidExpressionFuncNotDefined:"Function ${info} not defined",errorMsgInvalidExpressionNameNotDefined:"Name ${info} not defined",errorMsgInvalidExpressionType:"Expression returns invalid type",errorMsgInvalidLink:"Link must start with http:// or https://",errorMsgInvalidImage:"Invalid image data, image must be base64 encoded",errorMsgInvalidImageSource:"Invalid source, expected url starting with http:// or https:// respectively",errorMsgInvalidImageSourceParameter:"Parameter must be an image or string (containing a url)",errorMsgInvalidMap:"Invalid collection",errorMsgInvalidNumber:"Invalid number",errorMsgInvalidPageSize:"Invalid page size",errorMsgInvalidParameterData:"Data does not match parameter",errorMsgInvalidParameterName:"Name must start with a character or underscore, and must only contain characters, digits and underscores (_)",errorMsgInvalidPattern:"Invalid pattern",errorMsgInvalidPosition:"The position is outside the area",errorMsgInvalidSize:"The element is outside the area",errorMsgInvalidTestData:"Invalid test data",errorMsgMissingData:"Missing data",errorMsgMissingDataSourceParameter:"Data source parameter not found",errorMsgMissingExpression:"Expression must be set",errorMsgMissingImage:"Missing image, no source or image file specified",errorMsgMissingParameter:"Parameter not found",errorMsgMissingParameterData:"Data for parameter {info} not found",errorMsgRepeatGroupHeaderAfterContent:"Not allowed for group after content row",errorMsgPlusVersionRequired:"Requires commerical PLUS version",errorMsgSectionBandNotOnSamePage:"Section band does not fit on same page",errorMsgSectionBandPageBreakNotAllowed:"Manual page break not allowed",errorMsgUnicodeEncodeError:"Text contains non printable character",errorMsgUnsupportedImageType:"Image does not have supported image type (.jpg, .png)",footer:"Footer",footerDisplay:"Display",footerSize:"Footer size",header:"Header",headerDisplay:"Display",headerFooterDisplayAlways:"Always",headerFooterDisplayNotOnFirstPage:"Do not show on first page",headerSize:"Header size",menuColumnAddLeft:"Add column to the left",menuColumnAddRight:"Add column to the right",menuColumnDelete:"Delete column",menuAlignBottom:"Align bottom",menuAlignCenter:"Align center",menuAlignLeft:"Align left",menuAlignMiddle:"Align middle",menuAlignRight:"Align right",menuAlignTop:"Align top",menuInsertReport:"INSERT",menuInsertReportTip:"Insert report template",menuLogReport:"LOG",menuLogReportTip:"Log report template to console",menuPreview:"PREVIEW",menuPreviewTip:"Preview report",menuRedo:"REDO",menuRedoTip:"Repeat last undone command",menuRowAddAbove:"Add row above",menuRowAddBelow:"Add row below",menuRowDelete:"Delete row",menuSave:"SAVE",menuSaveTip:"Save report",menuToggleGrid:"Show/Hide grid",menuUndo:"UNDO",menuUndoTip:"Undo last command",menuZoomIn:"Zoom in",menuZoomOut:"Zoom out",nameCopySuffix:"copy",orientation:"Orientation",orientationBottom:"bottom",orientationLandscape:"Landscape",orientationLeft:"left",orientationPortrait:"Portrait",orientationRight:"right",orientationTop:"top",pageFormat:"Page format",pageFormatA4:"DIN A4 (210 x 297 mm)",pageFormatA5:"DIN A5 (148 x 210 mm)",pageFormatLetter:"Letter (8.5 x 11.0 inches)",pageFormatUserDefined:"Own dimensions",pageHeight:"height",pageMargins:"Page margins",pageWidth:"width",parameter:"Parameter",parameterAddTestData:"Add row",parameterArrayItemType:"List item type",parameterEditTestData:"Edit",parameterEditTestDataNoFields:"No fields defined for this list",parameterEval:"Evaluate text",parameterExpression:"Expression",parameterListType:"List type",parameterName:"Name",parameterNullable:"Nullable",parameterPattern:"Pattern",parameterRowParams:"Row parameters",parameterSearchPlaceholder:"Search parameters...",parameterTestData:"Test data",parameterTestDataDatePattern:"YYYY-MM-DD",parameterTestDataImageInfo:"Images are saved in the report template and could significantly increase report template size",parameterTestDataRowCount:"${count} rows",parameterTestDataRowCountEmpty:"empty",parameterTestDataRowCountOne:"1 row",parameterType:"Type",parameterTypeArray:"List",parameterTypeAverage:"Average",parameterTypeBoolean:"Boolean",parameterTypeDate:"Date",parameterTypeImage:"Image",parameterTypeMap:"Collection",parameterTypeNumber:"Number",parameterTypeSimpleArray:"Simple List",parameterTypeString:"Text",parameterTypeSum:"Sum",parameters:"Parameters",parametersDataSource:"Data source parameters",patternCurrencySymbol:"Pattern currency symbol",patternDate1:"day.month.year, e.g. 1.6.1980",patternDate2:"day.month.year (2-digit), hour(24h):minute, e.g. 1.6.80, 14:30",patternDate3:"day/month/year (month abbreviation), e.g. 1/Jun/1980",patternDate4:"month/day/year (day and month with leading zero if single digit), e.g. 06/01/1980",patternLocale:"Pattern locale",patternNumber1:"Show thousand separator",patternNumber2:"Show decimal point followed by 3 decimal places",patternNumber3:"Show decimal point followed by minimum of 2 and maximum of 4 decimal places",patternNumber4:"Show thousand separator and decimal point followed by 2 decimal places",patternNumber5:"Show currency symbol in front of number",patternNumberGroupSymbol:"Thousands separator",patternNumberGroupSymbolInfo:"leave empty for default",patternSeparatorDates:"--- Date patterns ---",patternSeparatorNumbers:"--- Number patterns ---",plusFeatureInfo:'Requires commerical <a href="https://www.reportbro.com/license/index" target="_blank" rel="noreferrer">PLUS version</a>',plusFeatureInfoNestedParameter:'Nested parameter requires commerical <a href="https://www.reportbro.com/license/index" target="_blank" rel="noreferrer">PLUS version</a>',select:"select...",style:"Style",styleAlignment:"Alignment",styleBackgroundColor:"Background color",styleBold:"Bold",styleBorder:"Border",styleBorderAll:"borders",styleBorderColor:"Border color",styleBorderWidth:"Border width",styleFont:"Font",styleFontSizeUnit:"pt",styleHAlignmentCenter:"Center",styleHAlignmentLeft:"Left",styleHAlignmentJustify:"Justify",styleHAlignmentRight:"Right",styleItalic:"Italic",styleLineSpacing:"Line spacing",styleName:"Name",styleNone:"None",stylePadding:"Padding",styleStrikethrough:"Strikethrough",styleTextColor:"Text color",styleTextStyle:"Text style",styleUnderline:"Underline",styleVAlignmentBottom:"Bottom",styleVAlignmentMiddle:"Middle",styleVAlignmentTop:"Top",styles:"Styles"}};function $e(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return Ze(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ze(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e(Ye,[{key:"render",value:function(e){}},{key:"destroy",value:function(){}},{key:"setValue",value:function(e,t,r){var n,o="".concat(this.idPrefix,"_").concat(e.fieldId),i=(r?document.getElementById(o).classList.add("rbroDifferentValues"):document.getElementById(o).classList.remove("rbroDifferentValues"),document.getElementById(o));if(e.type===me.type.text)r?(i.value="",i.setAttribute("placeholder",this.differentValuesLabel)):(i.value=t,i.setAttribute("placeholder",""));else if(e.type===me.type.richText)this.quill&&(r||!t?this.quill.setContents({},"silent"):this.quill.setContents(t,"silent"));else if(e.type===me.type.select)i.value=t;else if(e.type===me.type.checkbox)i.checked=!r&&t;else if(e.type===me.type.button)!r&&t?i.classList.add("rbroButtonActive"):i.classList.remove("rbroButtonActive");else if(e.type===me.type.buttonGroup){var a,l=$e(i.querySelectorAll("button"));try{for(l.s();!(a=l.n()).done;)a.value.classList.remove("rbroButtonActive")}catch(e){l.e(e)}finally{l.f()}r||i.querySelector('button[value="'.concat(t,'"]')).classList.add("rbroButtonActive")}else e.type===me.type.color?(n=document.getElementById(o+"_select"),r?e.allowEmpty?(i.value="",n.style.color="",n.classList.add("rbroTransparentColorSelect")):(i.value="#000000",n.style.color="#000000",n.classList.remove("rbroTransparentColorSelect")):(i.value=t,(n.style.color=t)?n.classList.remove("rbroTransparentColorSelect"):n.classList.add("rbroTransparentColorSelect"))):e.type===me.type.filename&&(r?(i.textContent=this.differentFilesLabel,document.getElementById(o+"_container").classList.remove("rbroHidden")):""===(i.textContent=t)?document.getElementById(o+"_container").classList.add("rbroHidden"):document.getElementById(o+"_container").classList.remove("rbroHidden"))}},{key:"updateDisplay",value:function(e){}},{key:"show",value:function(){document.getElementById(this.panelId).classList.remove("rbroHidden")}},{key:"hide",value:function(){document.getElementById(this.panelId).classList.add("rbroHidden")}},{key:"isKeyEventDisabled",value:function(){return this.quill&&this.quill.hasFocus()}},{key:"notifyEvent",value:function(e,t,r){e instanceof this.dataBaseClass&&this.rb.isSelectedObject(e.id)&&t===p.operation.change&&this.updateDisplay(r)}},{key:"updateErrors",value:function(){var e,t=document.getElementById(this.panelId),r=t.querySelectorAll(".rbroFormRow"),t=t.querySelectorAll(".rbroErrorMessage"),n=$e(r);try{for(n.s();!(e=n.n()).done;)e.value.classList.remove("rbroError")}catch(e){n.e(e)}finally{n.f()}var o,i=$e(t);try{for(i.s();!(o=i.n()).done;)o.value.textContent=""}catch(e){i.e(e)}finally{i.f()}r=this.rb.getSelectedObject();if(null!==r){var a,l=$e(r.getErrors());try{for(l.s();!(a=l.n()).done;){var s,c,u,d,p=a.value,h=this.propertyDescriptors[p.field];h&&("section"in h&&(s=h.section,document.getElementById("".concat(this.idPrefix,"_").concat(s,"_header")).classList.add("rbroError")),c=this.rb.getLabel(p.msg_key),p.info&&(c=c.replace("${info}",'<span class="rbroErrorMessageInfo">'+p.info.replace("<","&lt;").replace(">","&gt;")+"</span>")),u=this.getRowId(h),document.getElementById(u).classList.add("rbroError"),d="errorMsgId"in h?h.errorMsgId:"".concat(this.idPrefix,"_").concat(h.fieldId,"_error"),document.getElementById(d).innerHTML=c)}}catch(e){l.e(e)}finally{l.f()}}}},{key:"selectionChanged",value:function(){this.updateDisplay(null),this.updateErrors()}},{key:"scrollToFirstError",value:function(){var e=this.rb.getSelectedObject();if(null!==e){var t,r=$e(e.getErrors());try{for(r.s();!(t=r.n()).done;){var n,o,i=t.value,a=this.propertyDescriptors[i.field];a&&"section"in a&&(n=a.section,(o=document.getElementById("".concat(this.idPrefix,"_").concat(n,"_header"))).classList.contains("rbroPanelSectionHeaderOpen")||o.dispatchEvent(new Event("click")))}}catch(e){r.e(e)}finally{r.f()}var l,s="",c=-1,u=$e(e.getErrors());try{for(u.s();!(l=u.n()).done;){var d,p,h=l.value,f=this.propertyDescriptors[h.field];f&&(d=this.getRowId(f),p=g(document.getElementById(d)).top,(""===s||p<c)&&(s=d,c=p))}}catch(e){u.e(e)}finally{u.f()}""!==s&&(document.getElementById("rbro_detail_panel").scrollTop=c)}}},{key:"getRowId",value:function(e){return"rowId"in e?e.rowId:"".concat(this.idPrefix,"_").concat(e.fieldId,"_row")}}]);var Je=Ye;function Ye(e,t,r,n){u(this,Ye),this.idPrefix=e,this.dataBaseClass=t,this.panelId=e+"_panel",this.rootElement=r,this.rb=n,this.propertyDescriptors={},this.differentValuesLabel=this.rb.getLabel("differentValues"),this.differentFilesLabel=this.rb.getLabel("differentFiles"),this.quill=null,this.controls={}}function Qe(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return et(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?et(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tt=function(){t(i,Je);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t){return u(this,i),(e=o.call(this,"rbro_style",Y,e,t)).propertyDescriptors={name:{type:me.type.text,fieldId:"name"},bold:{type:me.type.button,fieldId:"bold",rowId:"rbro_style_textstyle_row",singleRowProperty:!1,rowProperties:["bold","italic","underline","strikethrough"]},italic:{type:me.type.button,fieldId:"italic",rowId:"rbro_style_textstyle_row",singleRowProperty:!1,rowProperties:["bold","italic","underline","strikethrough"]},underline:{type:me.type.button,fieldId:"underline",rowId:"rbro_style_textstyle_row",singleRowProperty:!1,rowProperties:["bold","italic","underline","strikethrough"]},strikethrough:{type:me.type.button,fieldId:"strikethrough",rowId:"rbro_style_textstyle_row",singleRowProperty:!1,rowProperties:["bold","italic","underline","strikethrough"]},horizontalAlignment:{type:me.type.buttonGroup,fieldId:"halignment",rowId:"rbro_style_alignment_row",singleRowProperty:!1,rowProperties:["horizontalAlignment","verticalAlignment"]},verticalAlignment:{type:me.type.buttonGroup,fieldId:"valignment",rowId:"rbro_style_alignment_row",singleRowProperty:!1},textColor:{type:me.type.color,allowEmpty:!1,fieldId:"text_color"},backgroundColor:{type:me.type.color,allowEmpty:!0,fieldId:"background_color"},font:{type:me.type.select,fieldId:"font",rowId:"rbro_style_font_row",singleRowProperty:!1,rowProperties:["font","fontSize"]},fontSize:{type:me.type.select,fieldId:"font_size",rowId:"rbro_style_font_row",singleRowProperty:!1},lineSpacing:{type:me.type.select,fieldId:"line_spacing"},borderAll:{type:me.type.button,fieldId:"border_all",rowId:"rbro_style_border_row",singleRowProperty:!1,rowProperties:["borderAll","borderLeft","borderTop","borderRight","borderBottom"]},borderLeft:{type:me.type.button,fieldId:"border_left",rowId:"rbro_style_border_row",singleRowProperty:!1},borderTop:{type:me.type.button,fieldId:"border_top",rowId:"rbro_style_border_row",singleRowProperty:!1},borderRight:{type:me.type.button,fieldId:"border_right",rowId:"rbro_style_border_row",singleRowProperty:!1},borderBottom:{type:me.type.button,fieldId:"border_bottom",rowId:"rbro_style_border_row",singleRowProperty:!1},borderColor:{type:me.type.color,allowEmpty:!1,fieldId:"border_color"},borderWidth:{type:me.type.text,fieldId:"border_width"},paddingLeft:{type:me.type.text,fieldId:"padding_left",rowId:"rbro_style_padding_row",singleRowProperty:!1,rowProperties:["paddingLeft","paddingTop","paddingRight","paddingBottom"]},paddingTop:{type:me.type.text,fieldId:"padding_top",rowId:"rbro_style_padding_row",singleRowProperty:!1},paddingRight:{type:me.type.text,fieldId:"padding_right",rowId:"rbro_style_padding_row",singleRowProperty:!1},paddingBottom:{type:me.type.text,fieldId:"padding_bottom",rowId:"rbro_style_padding_row",singleRowProperty:!1}},e}return e(i,[{key:"render",value:function(){var r=this,e=ge("div",{id:"rbro_style_panel",class:"rbroHidden"}),t=ge("div",{class:"rbroFormRow"}),n=(be(t,this.rb.getLabel("styleName"),"rbro_style_name"),ge("div",{class:"rbroFormField"})),o=ge("input",{id:"rbro_style_name"});o.addEventListener("input",function(e){var t=r.rb.getSelectedObject();null!==t&&(""!==o.value.trim()?r.rb.executeCommand(new me(t.getId(),"name",o.value,me.type.text,r.rb)):o.value=t.getName())}),n.append(o),t.append(n),e.append(t),i.renderStyle(e,"style_","",!1,this.controls,this.rb),document.getElementById("rbro_detail_panel").append(e)}},{key:"destroy",value:function(){i.destroyStyle("",this.controls)}},{key:"updateDisplay",value:function(e){var t,r=this.rb.getSelectedObject();if(null!==r&&r instanceof Y)for(var n in this.propertyDescriptors)!this.propertyDescriptors.hasOwnProperty(n)||null!==e&&n!==e||(t=this.propertyDescriptors[n],n=r.getValue(n),R(B(i.prototype),"setValue",this).call(this,t,n,!1))}}],[{key:"renderStyle",value:function(e,t,s,r,n,c){be(o=ge("div",{id:"rbro_".concat(t,"textstyle_row"),class:"rbroFormRow"}),c.getLabel("styleTextStyle")),i=ge("div",{class:"rbroFormField"});var o,i,a,l=ge("div",{id:"rbro_".concat(t,"textstyle")}),u=ge("button",{id:"rbro_".concat(t,"bold"),class:"rbroButton rbroActionButton rbroIcon-bold",type:"button",title:c.getLabel("styleBold")}),d=(u.addEventListener("click",function(e){for(var t=!u.classList.contains("rbroButtonActive"),r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"bold"),t,me.type.button,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"bold"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("bold",t,me.type.button,r)}r.isEmpty()||c.executeCommand(r)}),l.append(u),ge("button",{id:"rbro_".concat(t,"italic"),class:"rbroButton rbroActionButton rbroIcon-italic",type:"button",title:c.getLabel("styleItalic")})),p=(d.addEventListener("click",function(e){for(var t=!d.classList.contains("rbroButtonActive"),r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"italic"),t,me.type.button,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"italic"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("italic",t,me.type.button,r)}r.isEmpty()||c.executeCommand(r)}),l.append(d),ge("button",{id:"rbro_".concat(t,"underline"),class:"rbroButton rbroActionButton rbroIcon-underline",type:"button",title:c.getLabel("styleUnderline")})),h=(p.addEventListener("click",function(e){for(var t=!p.classList.contains("rbroButtonActive"),r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"underline"),t,me.type.button,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"underline"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("underline",t,me.type.button,r)}r.isEmpty()||c.executeCommand(r)}),l.append(p),ge("button",{id:"rbro_".concat(t,"strikethrough"),class:"rbroButton rbroActionButton rbroIcon-strikethrough",type:"button",title:c.getLabel("styleStrikethrough")})),l=(h.addEventListener("click",function(e){for(var t=!h.classList.contains("rbroButtonActive"),r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"strikethrough"),t,me.type.button,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"strikethrough"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("strikethrough",t,me.type.button,r)}r.isEmpty()||c.executeCommand(r)}),l.append(h),i.append(l),o.append(i),e.append(o),be(o=ge("div",{id:"rbro_".concat(t,"alignment_row"),class:"rbroFormRow"}),c.getLabel("styleAlignment")),i=ge("div",{class:"rbroFormField"}),ge("div",{id:"rbro_".concat(t,"halignment")})),f=ge("button",{id:"rbro_".concat(t,"halignment_left"),class:"rbroButton rbroActionButton rbroIcon-text-align-left",type:"button",value:"left",title:c.getLabel("styleHAlignmentLeft")}),f=(f.addEventListener("click",function(e){for(var t=Y.alignment.left,r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"horizontalAlignment"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"horizontalAlignment"),t,me.type.buttonGroup,c)),l instanceof Q&&""!==l.getValue("".concat(s,"styleId"))?l.getValue("".concat(s,"horizontalAlignment"))!==t&&i.addCommand(new me(l.getId(),"".concat(s,"styleId"),"",me.type.select,c)):l instanceof Y&&l.addCommandsForChangedProperty("horizontalAlignment",t,me.type.buttonGroup,i)}i.isEmpty()||c.executeCommand(i)}}),l.append(f),ge("button",{id:"rbro_".concat(t,"halignment_center"),class:"rbroButton rbroActionButton rbroIcon-text-align-center",type:"button",value:"center",title:c.getLabel("styleHAlignmentCenter")})),f=(f.addEventListener("click",function(e){for(var t=Y.alignment.center,r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"horizontalAlignment"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"horizontalAlignment"),t,me.type.buttonGroup,c)),l instanceof Q&&""!==l.getValue("".concat(s,"styleId"))?l.getValue("".concat(s,"horizontalAlignment"))!==t&&i.addCommand(new me(l.getId(),"".concat(s,"styleId"),"",me.type.select,c)):l instanceof Y&&l.addCommandsForChangedProperty("horizontalAlignment",t,me.type.buttonGroup,i)}i.isEmpty()||c.executeCommand(i)}}),l.append(f),ge("button",{id:"rbro_".concat(t,"halignment_right"),class:"rbroButton rbroActionButton rbroIcon-text-align-right",type:"button",value:"right",title:c.getLabel("styleHAlignmentRight")})),f=(f.addEventListener("click",function(e){for(var t=Y.alignment.right,r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"horizontalAlignment"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"horizontalAlignment"),t,me.type.buttonGroup,c)),l instanceof Q&&""!==l.getValue("".concat(s,"styleId"))?l.getValue("".concat(s,"horizontalAlignment"))!==t&&i.addCommand(new me(l.getId(),"".concat(s,"styleId"),"",me.type.select,c)):l instanceof Y&&l.addCommandsForChangedProperty("horizontalAlignment",t,me.type.buttonGroup,i)}i.isEmpty()||c.executeCommand(i)}}),l.append(f),ge("button",{id:"rbro_".concat(t,"halignment_justify"),class:"rbroButton rbroActionButton rbroIcon-text-align-justify",type:"button",value:"justify",title:c.getLabel("styleHAlignmentJustify")})),f=(f.addEventListener("click",function(e){for(var t=Y.alignment.justify,r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"horizontalAlignment"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"horizontalAlignment"),t,me.type.buttonGroup,c)),l instanceof Q&&""!==l.getValue("".concat(s,"styleId"))?l.getValue("".concat(s,"horizontalAlignment"))!==t&&i.addCommand(new me(l.getId(),"".concat(s,"styleId"),"",me.type.select,c)):l instanceof Y&&l.addCommandsForChangedProperty("horizontalAlignment",t,me.type.buttonGroup,i)}i.isEmpty()||c.executeCommand(i)}}),l.append(f),i.append(l),ge("div",{id:"rbro_".concat(t,"valignment")})),l=ge("button",{id:"rbro_".concat(t,"valignment_top"),class:"rbroButton rbroActionButton rbroIcon-align-top",type:"button",value:"top",title:c.getLabel("styleVAlignmentTop")}),l=(l.addEventListener("click",function(e){for(var t=Y.alignment.top,r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"verticalAlignment"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"verticalAlignment"),t,me.type.buttonGroup,c)),l instanceof Q&&""!==l.getValue("".concat(s,"styleId"))?l.getValue("".concat(s,"verticalAlignment"))!==t&&i.addCommand(new me(l.getId(),"".concat(s,"styleId"),"",me.type.select,c)):l instanceof Y&&l.addCommandsForChangedProperty("verticalAlignment",t,me.type.buttonGroup,i)}i.isEmpty()||c.executeCommand(i)}}),f.append(l),ge("button",{id:"rbro_".concat(t,"valignment_middle"),class:"rbroButton rbroActionButton rbroIcon-align-middle",type:"button",value:"middle",title:c.getLabel("styleVAlignmentMiddle")})),l=(l.addEventListener("click",function(e){for(var t=Y.alignment.middle,r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"verticalAlignment"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"verticalAlignment"),t,me.type.buttonGroup,c)),l instanceof Q&&""!==l.getValue("".concat(s,"styleId"))?l.getValue("".concat(s,"verticalAlignment"))!==t&&i.addCommand(new me(l.getId(),"".concat(s,"styleId"),"",me.type.select,c)):l instanceof Y&&l.addCommandsForChangedProperty("verticalAlignment",t,me.type.buttonGroup,i)}i.isEmpty()||c.executeCommand(i)}}),f.append(l),ge("button",{id:"rbro_".concat(t,"valignment_bottom"),class:"rbroButton rbroActionButton rbroIcon-align-bottom",type:"button",value:"bottom",title:c.getLabel("styleVAlignmentBottom")})),l=(l.addEventListener("click",function(e){for(var t=Y.alignment.bottom,r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"verticalAlignment"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"verticalAlignment"),t,me.type.buttonGroup,c)),l instanceof Q&&""!==l.getValue("".concat(s,"styleId"))?l.getValue("".concat(s,"verticalAlignment"))!==t&&i.addCommand(new me(l.getId(),"".concat(s,"styleId"),"",me.type.select,c)):l instanceof Y&&l.addCommandsForChangedProperty("verticalAlignment",t,me.type.buttonGroup,i)}i.isEmpty()||c.executeCommand(i)}}),f.append(l),i.append(f),o.append(i),e.append(o),be(o=ge("div",{id:"rbro_".concat(t,"text_color_row"),class:"rbroFormRow"}),c.getLabel("styleTextColor"),"rbro_".concat(t,"text_color")),i=ge("div",{class:"rbroFormField"}),ge("div",{class:"rbroColorPickerContainer"})),y=ge("input",{id:"rbro_".concat(t,"text_color")}),f=(y.addEventListener("change",function(e){var t=y.value;if(Se(t)){for(var r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"textColor"),t,me.type.color,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"textColor"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("textColor",t,me.type.color,r)}r.isEmpty()||c.executeCommand(r)}}),l.append(y),n[s+"textColor"]=ke(l,y,!1,c),i.append(l),o.append(i),e.append(o),be(o=ge("div",{id:"rbro_".concat(t,"background_color_row"),class:"rbroFormRow"}),c.getLabel("styleBackgroundColor"),"rbro_".concat(t,"background_color")),i=ge("div",{class:"rbroFormField"}),ge("div",{class:"rbroColorPickerContainer"})),m=ge("input",{id:"rbro_".concat(t,"background_color")});m.addEventListener("change",function(e){var t=m.value;if(Se(t)){for(var r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"backgroundColor"),t,me.type.color,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"backgroundColor"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("backgroundColor",t,me.type.color,r)}r.isEmpty()||c.executeCommand(r)}}),f.append(m),n[s+"backgroundColor"]=ke(f,m,!0,c),i.append(f),o.append(i),e.append(o),r&&(be(o=ge("div",{id:"rbro_".concat(t,"alternate_background_color_row"),class:"rbroFormRow"}),c.getLabel("docElementAlternateBackgroundColor"),"rbro_".concat(t,"alternate_background_color")),i=ge("div",{class:"rbroFormField"}),l=ge("div",{class:"rbroColorPickerContainer"}),(a=ge("input",{id:"rbro_".concat(t,"alternate_background_color")})).addEventListener("change",function(e){var t=a.value;if(Se(t)){for(var r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"alternateBackgroundColor"),t,me.type.color,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"alternateBackgroundColor"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("alternateBackgroundColor",t,me.type.color,r)}r.isEmpty()||c.executeCommand(r)}}),l.append(a),n[s+"alternateBackgroundColor"]=ke(l,a,!0,c),i.append(l),o.append(i),e.append(o)),be(o=ge("div",{id:"rbro_".concat(t,"font_row"),class:"rbroFormRow"}),c.getLabel("styleFont"),"rbro_".concat(t,"font")),i=ge("div",{class:"rbroFormField"});var g,f=ge("div",{class:"rbroSplit rbroSelectFont"}),b=ge("select",{id:"rbro_".concat(t,"font")}),v=Qe(c.getFonts());try{for(v.s();!(g=v.n()).done;){var _=g.value;b.append(ge("option",{value:_.value},_.name))}}catch(e){v.e(e)}finally{v.f()}b.addEventListener("change",function(e){for(var t=b.value,r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"font"),t,me.type.select,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"font"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("font",t,me.type.select,r)}r.isEmpty()||c.executeCommand(r)}),f.append(b);var R,w=ge("select",{id:"rbro_".concat(t,"font_size")}),E=Qe(c.getProperty("fontSizes"));try{for(E.s();!(R=E.n()).done;){var N=R.value;w.append(ge("option",{value:N},String(N)))}}catch(e){E.e(e)}finally{E.f()}w.addEventListener("change",function(e){for(var t=w.value,r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"fontSize"),t,me.type.select,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"fontSize"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("fontSize",t,me.type.select,r)}r.isEmpty()||c.executeCommand(r)}),f.append(w),f.append(ge("span",{},c.getLabel("styleFontSizeUnit"))),i.append(f),i.append(ge("div",{id:"rbro_".concat(t,"font_error"),class:"rbroErrorMessage"})),o.append(i),e.append(o),be(o=ge("div",{id:"rbro_".concat(t,"line_spacing_row"),class:"rbroFormRow"}),c.getLabel("styleLineSpacing"),"rbro_".concat(t,"line_spacing")),i=ge("div",{class:"rbroFormField"});for(var I=ge("select",{id:"rbro_".concat(t,"line_spacing")}),C=0,M=["1","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2"];C<M.length;C++){var F=M[C];I.append(ge("option",{value:F},F))}I.addEventListener("change",function(e){for(var t=I.value,r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"lineSpacing"),t,me.type.select,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"lineSpacing"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("lineSpacing",t,me.type.select,r),r.isEmpty()||c.executeCommand(r)}}),i.append(I),o.append(i),e.append(o);var l=ge("div",{id:"rbro_".concat(t,"border_div")}),f=(be(o=ge("div",{id:"rbro_".concat(t,"border_row"),class:"rbroFormRow"}),c.getLabel("styleBorder")),i=ge("div",{class:"rbroFormField"}),ge("div",{id:"rbro_".concat(t,"border")})),x=ge("button",{id:"rbro_".concat(t,"border_all"),class:"rbroButton rbroActionButton rbroIcon-border-all",type:"button",value:"".concat(s,"borderAll"),title:c.getLabel("styleBorderAll")}),k=(x.addEventListener("click",function(e){for(var t=!x.classList.contains("rbroButtonActive"),r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"borderLeft"),t,me.type.button,c)),r.addCommand(new me(i.getId(),"".concat(s,"borderTop"),t,me.type.button,c)),r.addCommand(new me(i.getId(),"".concat(s,"borderRight"),t,me.type.button,c)),r.addCommand(new me(i.getId(),"".concat(s,"borderBottom"),t,me.type.button,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"borderLeft"))===t&&i.getValue("".concat(s,"borderTop"))===t&&i.getValue("".concat(s,"borderRight"))===t&&i.getValue("".concat(s,"borderBottom"))===t||r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&(i.addCommandsForChangedProperty("borderLeft",t,me.type.button,r),i.addCommandsForChangedProperty("borderTop",t,me.type.button,r),i.addCommandsForChangedProperty("borderRight",t,me.type.button,r),i.addCommandsForChangedProperty("borderBottom",t,me.type.button,r))}r.isEmpty()||c.executeCommand(r)}),f.append(x),ge("button",{id:"rbro_".concat(t,"border_left"),class:"rbroButton rbroActionButton rbroIcon-border-left",type:"button",value:"".concat(s,"borderLeft"),title:c.getLabel("orientationLeft")})),S=(k.addEventListener("click",function(e){for(var t=!k.classList.contains("rbroButtonActive"),r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"borderLeft"),t,me.type.button,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"borderLeft"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("borderLeft",t,me.type.button,r)}r.isEmpty()||c.executeCommand(r)}),f.append(k),ge("button",{id:"rbro_".concat(t,"border_top"),class:"rbroButton rbroActionButton rbroIcon-border-top",type:"button",value:"".concat(s,"borderTop"),title:c.getLabel("orientationTop")})),O=(S.addEventListener("click",function(e){for(var t=!S.classList.contains("rbroButtonActive"),r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"borderTop"),t,me.type.button,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"borderTop"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("borderTop",t,me.type.button,r)}r.isEmpty()||c.executeCommand(r)}),f.append(S),ge("button",{id:"rbro_".concat(t,"border_right"),class:"rbroButton rbroActionButton rbroIcon-border-right",type:"button",value:"".concat(s,"borderRight"),title:c.getLabel("orientationRight")})),P=(O.addEventListener("click",function(e){for(var t=!O.classList.contains("rbroButtonActive"),r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"borderRight"),t,me.type.button,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"borderRight"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("borderRight",t,me.type.button,r)}r.isEmpty()||c.executeCommand(r)}),f.append(O),ge("button",{id:"rbro_".concat(t,"border_bottom"),class:"rbroButton rbroActionButton rbroIcon-border-bottom",type:"button",value:"".concat(s,"borderBottom"),title:c.getLabel("orientationBottom")})),r=(P.addEventListener("click",function(e){for(var t=!P.classList.contains("rbroButtonActive"),r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"borderBottom"),t,me.type.button,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"borderBottom"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("borderBottom",t,me.type.button,r)}r.isEmpty()||c.executeCommand(r)}),f.append(P),i.append(f),o.append(i),l.append(o),r&&(be(o=ge("div",{id:"rbro_".concat(t,"table_border_row"),class:"rbroFormRow"}),c.getLabel("styleBorder")),i=ge("div",{class:"rbroFormField"}),f=ge("div",{id:"rbro_".concat(t,"table_border")}),(r=ge("button",{id:"rbro_".concat(t,"table_border_grid"),class:"rbroButton rbroActionButton rbroIcon-border-table-grid",type:"button",value:"".concat(s,"grid"),title:c.getLabel("docElementBorderGrid")})).addEventListener("click",function(e){for(var t=je.border.grid,r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"border"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"border"),t,me.type.buttonGroup,c))}i.isEmpty()||c.executeCommand(i)}}),f.append(r),(r=ge("button",{id:"rbro_".concat(t,"table_border_frame_row"),class:"rbroButton rbroActionButton rbroIcon-border-table-frame-row",type:"button",value:"".concat(s,"frame_row"),title:c.getLabel("docElementBorderFrameRow")})).addEventListener("click",function(e){for(var t=je.border.frameRow,r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"border"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"border"),t,me.type.buttonGroup,c))}i.isEmpty()||c.executeCommand(i)}}),f.append(r),(r=ge("button",{id:"rbro_".concat(t,"table_border_frame"),class:"rbroButton rbroActionButton rbroIcon-border-table-frame",type:"button",value:"".concat(s,"frame"),title:c.getLabel("docElementBorderFrame")})).addEventListener("click",function(e){for(var t=je.border.frame,r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"border"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"border"),t,me.type.buttonGroup,c))}i.isEmpty()||c.executeCommand(i)}}),f.append(r),(r=ge("button",{id:"rbro_".concat(t,"table_border_row"),class:"rbroButton rbroActionButton rbroIcon-border-table-row",type:"button",value:"".concat(s,"row"),title:c.getLabel("docElementBorderRow")})).addEventListener("click",function(e){for(var t=je.border.row,r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"border"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"border"),t,me.type.buttonGroup,c))}i.isEmpty()||c.executeCommand(i)}}),f.append(r),(r=ge("button",{id:"rbro_".concat(t,"table_border_none"),class:"rbroButton rbroActionButton rbroIcon-border-table-none",type:"button",value:"".concat(s,"none"),title:c.getLabel("docElementBorderNone")})).addEventListener("click",function(e){for(var t=je.border.none,r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"border"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"border"),t,me.type.buttonGroup,c))}i.isEmpty()||c.executeCommand(i)}}),f.append(r),i.append(f),o.append(i),l.append(o)),be(o=ge("div",{id:"rbro_".concat(t,"border_color_row"),class:"rbroFormRow"}),c.getLabel("styleBorderColor"),"rbro_".concat(t,"border_color")),i=ge("div",{class:"rbroFormField"}),ge("div",{class:"rbroColorPickerContainer"})),A=ge("input",{id:"rbro_".concat(t,"border_color")}),D=(A.addEventListener("change",function(e){var t=A.value;if(Se(t)){for(var r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"borderColor"),t,me.type.color,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"borderColor"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("borderColor",t,me.type.color,r)}r.isEmpty()||c.executeCommand(r)}}),r.append(A),n[s+"borderColor"]=ke(r,A,!1,c),i.append(r),o.append(i),l.append(o),be(o=ge("div",{id:"rbro_".concat(t,"border_width_row"),class:"rbroFormRow"}),c.getLabel("styleBorderWidth"),"rbro_".concat(t,"border_width")),i=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_".concat(t,"border_width"),type:"number",step:"0.5"})),f=(D.addEventListener("input",function(e){var t=D.value;(t=""!==t?xe(t,.5,99):t)!==D.value&&(D.value=t);for(var r=c.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("".concat(s,"borderWidth"))!==t){n=!0;break}if(n){for(var i=new _e("Set value",c),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"".concat(s,"borderWidth"),t,me.type.text,c)),l instanceof Q&&""!==l.getValue("".concat(s,"styleId"))?l.getValue("".concat(s,"borderWidth"))!==t&&i.addCommand(new me(l.getId(),"".concat(s,"styleId"),"",me.type.select,c)):l instanceof Y&&l.addCommandsForChangedProperty("borderWidth",t,me.type.text,i)}i.isEmpty()||c.executeCommand(i)}}),i.append(D),o.append(i),l.append(o),e.append(l),be(o=ge("div",{id:"rbro_".concat(t,"padding_row"),class:"rbroFormRow"}),c.getLabel("stylePadding"),"rbro_".concat(t,"padding")),i=ge("div",{class:"rbroFormField rbroSmallInput"}),ge("div",{class:"rbroColumnCenter"})),L=ge("input",{id:"rbro_".concat(t,"padding_top"),placeholder:c.getLabel("orientationTop"),type:"number"}),n=(L.addEventListener("input",function(e){for(var t=L.value,r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"paddingTop"),t,me.type.text,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"paddingTop"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("paddingTop",t,me.type.text,r)}r.isEmpty()||c.executeCommand(r)}),f.append(L),i.append(f),ge("div",{class:"rbroSplit"})),T=ge("input",{id:"rbro_".concat(t,"padding_left"),placeholder:c.getLabel("orientationLeft"),type:"number"}),j=(T.addEventListener("input",function(e){for(var t=T.value,r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"paddingLeft"),t,me.type.text,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"paddingLeft"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("paddingLeft",t,me.type.text,r)}r.isEmpty()||c.executeCommand(r)}),n.append(T),ge("input",{id:"rbro_".concat(t,"padding_right"),placeholder:c.getLabel("orientationRight"),type:"number"})),r=(j.addEventListener("input",function(e){for(var t=j.value,r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"paddingRight"),t,me.type.text,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"paddingRight"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("paddingRight",t,me.type.text,r)}r.isEmpty()||c.executeCommand(r)}),n.append(j),i.append(n),ge("div",{class:"rbroColumnCenter"})),B=ge("input",{id:"rbro_".concat(t,"padding_bottom"),placeholder:c.getLabel("orientationBottom"),type:"number"});B.addEventListener("input",function(e){for(var t=B.value,r=new _e("Set value",c),n=c.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"".concat(s,"paddingBottom"),t,me.type.text,c)),i instanceof Q&&""!==i.getValue("".concat(s,"styleId"))?i.getValue("".concat(s,"paddingBottom"))!==t&&r.addCommand(new me(i.getId(),"".concat(s,"styleId"),"",me.type.select,c)):i instanceof Y&&i.addCommandsForChangedProperty("paddingBottom",t,me.type.text,r)}r.isEmpty()||c.executeCommand(r)}),r.append(B),i.append(r),o.append(i),e.append(o)}},{key:"destroyStyle",value:function(e,t){t[e+"textColor"].destroy(),t[e+"backgroundColor"].destroy(),e+"alternateBackgroundColor"in t&&t[e+"alternateBackgroundColor"].destroy(),t[e+"borderColor"].destroy()}}]),i}(),$=_t(6095),rt=_t.n($),He=_t(4175),nt=_t.n(He);function Ce(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return ot(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ot(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var it=function(){t(j,Je);r=j,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,s=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function j(e,t){var r,n;for(n in u(this,j),(r=s.call(this,"rbro_doc_element",Q,e,t)).propertyDescriptors={label:{type:me.type.text,fieldId:"label"},content:{type:me.type.text,fieldId:"content",visibleIf:"!richText"},richText:{type:me.type.checkbox,fieldId:"rich_text"},richTextContent:{type:me.type.richText,fieldId:"rich_text_content",visibleIf:"richText"},eval:{type:me.type.checkbox,fieldId:"eval",visibleIf:"!richText"},dataSource:{type:me.type.text,fieldId:"data_source"},xReadOnly:{type:me.type.text,fieldId:"x_read_only"},x:{type:me.type.text,fieldId:"x",rowId:"rbro_doc_element_position_row",errorMsgId:"rbro_doc_element_position_error",singleRowProperty:!1,rowProperties:["x","y"],labelId:"rbro_doc_element_position_label",defaultLabel:"docElementPosition",singlePropertyLabel:"docElementPositionX"},y:{type:me.type.text,fieldId:"y",rowId:"rbro_doc_element_position_row",errorMsgId:"rbro_doc_element_position_error",singleRowProperty:!1,labelId:"rbro_doc_element_position_label",defaultLabel:"docElementPosition",singlePropertyLabel:"docElementPositionY"},width:{type:me.type.text,fieldId:"width",rowId:"rbro_doc_element_size_row",errorMsgId:"rbro_doc_element_size_error",singleRowProperty:!1,rowProperties:["width","height"],labelId:"rbro_doc_element_size_label",defaultLabel:"docElementSize",singlePropertyLabel:"docElementWidth",visibleIf:"type != 'bar_code' || (format != 'QRCode' && rotate)"},height:{type:me.type.text,fieldId:"height",rowId:"rbro_doc_element_size_row",errorMsgId:"rbro_doc_element_size_error",singleRowProperty:!1,labelId:"rbro_doc_element_size_label",defaultLabel:"docElementSize",singlePropertyLabel:"docElementHeight"},colspan:{type:me.type.text,fieldId:"colspan"},format:{type:me.type.select,fieldId:"format",allowEmpty:!1},displayValue:{type:me.type.checkbox,fieldId:"display_value",visibleIf:"format != 'QRCode'"},barWidth:{type:me.type.text,fieldId:"bar_width",visibleIf:"format != 'QRCode'"},guardBar:{type:me.type.checkbox,fieldId:"guard_bar",visibleIf:"format == 'EAN8' || format == 'EAN13'"},rotate:{type:me.type.checkbox,fieldId:"rotate",section:"print",visibleIf:"format != 'QRCode'"},errorCorrectionLevel:{type:me.type.select,fieldId:"error_correction_level",visibleIf:"format == 'QRCode'"},source:{type:me.type.text,fieldId:"source"},image:{type:me.type.file,fieldId:"image",rowId:"rbro_doc_element_image_row",singleRowProperty:!1,rowProperties:["image","imageFilename"]},imageFilename:{type:me.type.filename,fieldId:"image_filename",rowId:"rbro_doc_element_image_row",singleRowProperty:!1},columns:{type:me.type.text,fieldId:"columns"},header:{type:me.type.checkbox,fieldId:"header"},contentRows:{type:me.type.text,fieldId:"content_rows"},footer:{type:me.type.checkbox,fieldId:"footer"},color:{type:me.type.color,allowEmpty:!1,fieldId:"color",section:"style"},styleId:{type:me.type.select,fieldId:"style_id",section:"style",allowEmpty:!0},bold:{type:me.type.button,fieldId:"bold",rowId:"rbro_doc_element_textstyle_row",singleRowProperty:!1,rowProperties:["bold","italic","underline","strikethrough"],section:"style",visibleIf:"!richText"},italic:{type:me.type.button,fieldId:"italic",rowId:"rbro_doc_element_textstyle_row",singleRowProperty:!1,section:"style",visibleIf:"!richText"},underline:{type:me.type.button,fieldId:"underline",rowId:"rbro_doc_element_textstyle_row",singleRowProperty:!1,section:"style",visibleIf:"!richText"},strikethrough:{type:me.type.button,fieldId:"strikethrough",rowId:"rbro_doc_element_textstyle_row",singleRowProperty:!1,section:"style",visibleIf:"!richText"},horizontalAlignment:{type:me.type.buttonGroup,fieldId:"halignment",rowId:"rbro_doc_element_alignment_row",singleRowProperty:!1,rowProperties:["horizontalAlignment","verticalAlignment"],section:"style",visibleIf:"!richText"},verticalAlignment:{type:me.type.buttonGroup,fieldId:"valignment",rowId:"rbro_doc_element_alignment_row",singleRowProperty:!1,section:"style"},textColor:{type:me.type.color,allowEmpty:!1,fieldId:"text_color",section:"style",visibleIf:"!richText"},backgroundColor:{type:me.type.color,allowEmpty:!0,fieldId:"background_color",section:"style"},alternateBackgroundColor:{type:me.type.color,allowEmpty:!0,fieldId:"alternate_background_color",section:"style"},font:{type:me.type.select,fieldId:"font",rowId:"rbro_doc_element_font_row",singleRowProperty:!1,rowProperties:["font","fontSize"],section:"style",allowEmpty:!1,visibleIf:"!richText"},fontSize:{type:me.type.select,fieldId:"font_size",rowId:"rbro_doc_element_font_row",singleRowProperty:!1,section:"style",allowEmpty:!1,visibleIf:"!richText"},lineSpacing:{type:me.type.select,fieldId:"line_spacing",section:"style",allowEmpty:!1},borderAll:{type:me.type.button,fieldId:"border_all",rowId:"rbro_doc_element_border_row",singleRowProperty:!1,rowProperties:["borderAll","borderLeft","borderTop","borderRight","borderBottom"],section:"style"},borderLeft:{type:me.type.button,fieldId:"border_left",rowId:"rbro_doc_element_border_row",singleRowProperty:!1,section:"style"},borderTop:{type:me.type.button,fieldId:"border_top",rowId:"rbro_doc_element_border_row",singleRowProperty:!1,section:"style"},borderRight:{type:me.type.button,fieldId:"border_right",rowId:"rbro_doc_element_border_row",singleRowProperty:!1,section:"style"},borderBottom:{type:me.type.button,fieldId:"border_bottom",rowId:"rbro_doc_element_border_row",singleRowProperty:!1,section:"style"},border:{type:me.type.buttonGroup,fieldId:"table_border",rowId:"rbro_doc_element_table_border_row",section:"style"},borderColor:{type:me.type.color,allowEmpty:!1,fieldId:"border_color",section:"style"},borderWidth:{type:me.type.text,fieldId:"border_width",section:"style"},paddingLeft:{type:me.type.text,fieldId:"padding_left",rowId:"rbro_doc_element_padding_row",singleRowProperty:!1,rowProperties:["paddingLeft","paddingTop","paddingRight","paddingBottom"],section:"style"},paddingTop:{type:me.type.text,fieldId:"padding_top",rowId:"rbro_doc_element_padding_row",singleRowProperty:!1,section:"style"},paddingRight:{type:me.type.text,fieldId:"padding_right",rowId:"rbro_doc_element_padding_row",singleRowProperty:!1,section:"style"},paddingBottom:{type:me.type.text,fieldId:"padding_bottom",rowId:"rbro_doc_element_padding_row",singleRowProperty:!1,section:"style"},groupExpression:{type:me.type.text,fieldId:"group_expression",section:"print"},pageBreak:{type:me.type.checkbox,fieldId:"page_break",visibleIf:"groupExpression",section:"print"},repeatGroupHeader:{type:me.type.checkbox,fieldId:"repeat_group_header",visibleIf:"groupExpression",section:"print"},printIf:{type:me.type.text,fieldId:"print_if",section:"print"},repeatHeader:{type:me.type.checkbox,fieldId:"repeat_header",section:"print"},removeEmptyElement:{type:me.type.checkbox,fieldId:"remove_empty_element",section:"print"},alwaysPrintOnSamePage:{type:me.type.checkbox,fieldId:"always_print_on_same_page",section:"print"},shrinkToContentHeight:{type:me.type.checkbox,fieldId:"shrink_to_content_height",section:"print"},alignToPageBottom:{type:me.type.checkbox,fieldId:"align_to_page_bottom",section:"print"},growWeight:{type:me.type.select,allowEmpty:!1,fieldId:"grow_weight",section:"print"},pattern:{type:me.type.text,fieldId:"pattern",section:"print",visibleIf:"!richText"},link:{type:me.type.text,fieldId:"link",section:"print",visibleIf:"!richText"},cs_condition:{type:me.type.text,fieldId:"cs_condition",section:"cs_style"},cs_styleId:{type:me.type.select,fieldId:"cs_style_id",section:"cs_style",allowEmpty:!0},cs_bold:{type:me.type.button,fieldId:"cs_bold",rowId:"rbro_doc_element_cs_textstyle_row",singleRowProperty:!1,rowProperties:["cs_bold","cs_italic","cs_underline","cs_strikethrough"],section:"cs_style",visibleIf:"!richText"},cs_italic:{type:me.type.button,fieldId:"cs_italic",rowId:"rbro_doc_element_cs_textstyle_row",singleRowProperty:!1,section:"cs_style",visibleIf:"!richText"},cs_underline:{type:me.type.button,fieldId:"cs_underline",rowId:"rbro_doc_element_cs_textstyle_row",singleRowProperty:!1,section:"cs_style",visibleIf:"!richText"},cs_strikethrough:{type:me.type.button,fieldId:"cs_strikethrough",rowId:"rbro_doc_element_cs_textstyle_row",singleRowProperty:!1,section:"cs_style",visibleIf:"!richText"},cs_horizontalAlignment:{type:me.type.buttonGroup,fieldId:"cs_halignment",rowId:"rbro_doc_element_cs_alignment_row",singleRowProperty:!1,rowProperties:["cs_horizontalAlignment","cs_verticalAlignment"],section:"cs_style",visibleIf:"!richText"},cs_verticalAlignment:{type:me.type.buttonGroup,fieldId:"cs_valignment",rowId:"rbro_doc_element_cs_alignment_row",singleRowProperty:!1,section:"cs_style"},cs_textColor:{type:me.type.color,allowEmpty:!1,fieldId:"cs_text_color",section:"cs_style",visibleIf:"!richText"},cs_backgroundColor:{type:me.type.color,allowEmpty:!0,fieldId:"cs_background_color",section:"cs_style"},cs_font:{type:me.type.select,fieldId:"cs_font",rowId:"rbro_doc_element_cs_font_row",singleRowProperty:!1,rowProperties:["cs_font","cs_fontSize"],section:"cs_style",allowEmpty:!1,visibleIf:"!richText"},cs_fontSize:{type:me.type.select,fieldId:"cs_font_size",rowId:"rbro_doc_element_cs_font_row",singleRowProperty:!1,section:"cs_style",allowEmpty:!1,visibleIf:"!richText"},cs_lineSpacing:{type:me.type.select,fieldId:"cs_line_spacing",section:"cs_style",allowEmpty:!1},cs_borderAll:{type:me.type.button,fieldId:"cs_border_all",rowId:"rbro_doc_element_cs_border_row",singleRowProperty:!1,rowProperties:["cs_borderAll","cs_borderLeft","cs_borderTop","cs_borderRight","cs_borderBottom"],section:"cs_style"},cs_borderLeft:{type:me.type.button,fieldId:"cs_border_left",rowId:"rbro_doc_element_cs_border_row",singleRowProperty:!1,section:"cs_style"},cs_borderTop:{type:me.type.button,fieldId:"cs_border_top",rowId:"rbro_doc_element_cs_border_row",singleRowProperty:!1,section:"cs_style"},cs_borderRight:{type:me.type.button,fieldId:"cs_border_right",rowId:"rbro_doc_element_cs_border_row",singleRowProperty:!1,section:"cs_style"},cs_borderBottom:{type:me.type.button,fieldId:"cs_border_bottom",rowId:"rbro_doc_element_cs_border_row",singleRowProperty:!1,section:"cs_style"},cs_borderColor:{type:me.type.color,allowEmpty:!1,fieldId:"cs_border_color",section:"cs_style"},cs_borderWidth:{type:me.type.text,fieldId:"cs_border_width",section:"cs_style"},cs_paddingLeft:{type:me.type.text,fieldId:"cs_padding_left",rowId:"rbro_doc_element_cs_padding_row",singleRowProperty:!1,rowProperties:["paddingLeft","paddingTop","paddingRight","paddingBottom"],section:"cs_style"},cs_paddingTop:{type:me.type.text,fieldId:"cs_padding_top",rowId:"rbro_doc_element_cs_padding_row",singleRowProperty:!1,section:"cs_style"},cs_paddingRight:{type:me.type.text,fieldId:"cs_padding_right",rowId:"rbro_doc_element_cs_padding_row",singleRowProperty:!1,section:"cs_style"},cs_paddingBottom:{type:me.type.text,fieldId:"cs_padding_bottom",rowId:"rbro_doc_element_cs_padding_row",singleRowProperty:!1,section:"cs_style"},spreadsheet_hide:{type:me.type.checkbox,fieldId:"spreadsheet_hide",section:"spreadsheet"},spreadsheet_column:{type:me.type.text,fieldId:"spreadsheet_column",section:"spreadsheet"},spreadsheet_colspan:{type:me.type.text,fieldId:"spreadsheet_colspan",section:"spreadsheet"},spreadsheet_addEmptyRow:{type:me.type.checkbox,fieldId:"spreadsheet_add_empty_row",section:"spreadsheet"},spreadsheet_textWrap:{type:me.type.checkbox,fieldId:"spreadsheet_text_wrap",section:"spreadsheet"}},t.getProperty("showPlusFeatures")||(delete r.propertyDescriptors.richText,delete r.propertyDescriptors.richTextContent),r.visibleIfFields=[],r.propertyDescriptors)if(r.propertyDescriptors.hasOwnProperty(n)){var o=r.propertyDescriptors[n];if("visibleIf"in o){var i,a=Ce(T(o.visibleIf,null));try{for(a.s();!(i=a.n()).done;){var l=i.value;"field"===l.type&&("visibleIfFields"in o?o.visibleIfFields.includes(l.value)||o.visibleIfFields.push(l.value):o.visibleIfFields=[l.value],r.visibleIfFields.includes(l.value)||r.visibleIfFields.push(l.value))}}catch(e){a.e(e)}finally{a.f()}}}return r}return e(j,[{key:"render",value:function(){var d=this,e=ge("div",{id:"rbro_doc_element_panel",class:"rbroHidden"}),a=(be(i=ge("div",{id:"rbro_doc_element_label_row",class:"rbroFormRow"}),this.rb.getLabel("docElementLabel"),"rbro_doc_element_label"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_label"})),t=(a.addEventListener("input",function(e){for(var t=a.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"label",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(a),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_data_source_row",class:"rbroFormRow"}),this.rb.getLabel("docElementDataSource"),"rbro_doc_element_data_source"),r=ge("div",{class:"rbroFormField"}),ge("div",{class:"rbroSplit rbroSelector"})),l=ge("textarea",{id:"rbro_doc_element_data_source",rows:1}),s=(l.addEventListener("input",function(e){for(var t=l.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"dataSource",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),Ee(l),t.append(l),(T=ge("div",{class:"rbroButton rbroRoundButton rbroIcon-select"})).addEventListener("click",function(e){var t=d.rb.getSelectedObjects(),t=1===t.length?t[0]:null;d.rb.getPopupWindow().show(d.rb.getParameterItems(t,[we.type.array]),null,"rbro_doc_element_data_source","dataSource",Ie.type.parameterSet)}),t.append(T),r.append(t),r.append(ge("div",{id:"rbro_doc_element_data_source_error",class:"rbroErrorMessage"})),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_content_row",class:"rbroFormRow rbroHidden"}),this.rb.getLabel("docElementContent"),"rbro_doc_element_content"),r=ge("div",{class:"rbroFormField"}),t=ge("div",{class:"rbroSplit rbroSelector"}),ge("textarea",{id:"rbro_doc_element_content",rows:1}));if(s.addEventListener("input",function(e){for(var t=s.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"content",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),s.addEventListener("blur",function(e){d.rb.getPopupWindow().hide()}),Ee(s),t.append(s),(T=ge("div",{class:"rbroButton rbroRoundButton rbroIcon-select"})).addEventListener("click",function(e){var t=d.rb.getSelectedObjects(),t=1===t.length?t[0]:null;d.rb.getPopupWindow().show(d.rb.getParameterItems(t),null,"rbro_doc_element_content","content",Ie.type.parameterAppend)}),t.append(T),r.append(t),r.append(ge("div",{id:"rbro_doc_element_content_error",class:"rbroErrorMessage"})),i.append(r),e.append(i),this.rb.getProperty("showPlusFeatures")){be(i=ge("div",{id:"rbro_doc_element_rich_text_row",class:"rbroFormRow"}),this.rb.getLabel("docElementRichText"),"rbro_doc_element_rich_text");var R,r=ge("div",{class:"rbroFormField"}),n=ge("label",{class:"switch-light switch-material"}),c=ge("input",{id:"rbro_doc_element_rich_text",type:"checkbox"}),o=(c.addEventListener("change",function(e){for(var t=c.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"richText",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),n.append(c),ge("span")),i=(o.append(ge("span")),o.append(ge("span")),o.append(ge("a")),n.append(o),r.append(n),r.append(ge("div",{id:"rbro_doc_element_rich_text_error",class:"rbroErrorMessage"})),this.rb.getProperty("showPlusFeaturesInfo")&&((o=ge("div",{class:"rbroInfo"})).innerHTML=this.rb.getLabel("plusFeatureInfo"),r.append(o)),i.append(r),e.append(i),ge("div",{id:"rbro_doc_element_rich_text_content_row",class:"rbroFormRow rbroRichTextEditor rbroHidden"})),n=this.rb.getProperty("colors"),u=ge("select",{class:"ql-color",title:this.rb.getLabel("styleTextColor")}),p=ge("select",{class:"ql-background",title:this.rb.getLabel("styleBackgroundColor")}),h=Ce(n);try{for(h.s();!(R=h.n()).done;){var f=R.value;u.append(ge("option",{value:f},f)),p.append(ge("option",{value:f},f))}}catch(i){h.e(i)}finally{h.f()}u.append(ge("option",{value:"clear-color"})),p.append(ge("option",{value:"clear-color"}));var N,M=ge("select",{class:"ql-font"}),F=this.rb.getProperty("defaultFont"),y=Ce(this.rb.getFonts());try{for(y.s();!(N=y.n()).done;){var V=N.value,q={value:V.value};V.value===F&&(q.selected="selected"),M.append(ge("option",q,V.name))}}catch(i){y.e(i)}finally{y.f()}var z,H=ge("select",{class:"ql-size"}),m=Ce(this.rb.getProperty("fontSizes"));try{for(m.s();!(z=m.n()).done;){var U=z.value,W={value:U+"px"};12===U&&(W.selected="selected"),H.append(ge("option",W,U+"pt"))}}catch(i){m.e(i)}finally{m.f()}o=ge("div",{id:"rbro_doc_element_rich_text_content_toolbar"}),n=ge("span",{class:"ql-formats"}),n=(n.append(ge("button",{class:"ql-bold",title:this.rb.getLabel("styleBold")})),n.append(ge("button",{class:"ql-italic",title:this.rb.getLabel("styleItalic")})),n.append(ge("button",{class:"ql-underline",title:this.rb.getLabel("styleUnderline")})),n.append(ge("button",{class:"ql-strike",title:this.rb.getLabel("styleStrikethrough")})),o.append(n),(n=ge("span",{class:"ql-formats"})).append(ge("button",{class:"ql-link"})),o.append(n),(n=ge("span",{class:"ql-formats"})).append(ge("select",{class:"ql-align",title:this.rb.getLabel("styleAlignment")})),o.append(n),(n=ge("span",{class:"ql-formats"})).append(u),n.append(p),o.append(n),o.append(M),o.append(H),o.append(ge("div",{id:"rbro_doc_element_rich_text_content_toolbar_parameter",class:"rbroButton rbroRoundButton rbroIcon-select"})),i.append(o),ge("div",{id:"rbro_doc_element_rich_text_content"}));i.append(n),r.append(ge("div",{id:"rbro_doc_element_rich_text_content_error",class:"rbroErrorMessage"})),e.append(i)}be(i=ge("div",{id:"rbro_doc_element_eval_row",class:"rbroFormRow rbroHidden"}),this.rb.getLabel("docElementEval"),"rbro_doc_element_eval"),r=ge("div",{class:"rbroFormField"});var G=ge("input",{id:"rbro_doc_element_eval",type:"checkbox"}),g=(G.addEventListener("change",function(e){for(var t=new _e("Set value",d.rb),r=d.rb.getSelectedObjects(),n=G.checked,o=r.length-1;0<=o;o--){var i=r[o];t.addSelection(i.getId()),t.addCommand(new me(i.getId(),"eval",n,me.type.checkbox,d.rb))}t.isEmpty()||d.rb.executeCommand(t)}),r.append(G),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_format_row",class:"rbroFormRow"}),this.rb.getLabel("docElementFormat"),"rbro_doc_element_format"),r=ge("div",{class:"rbroFormField"}),ge("select",{id:"rbro_doc_element_format"})),K=(g.append(ge("option",{value:"CODE39"},"CODE39")),g.append(ge("option",{value:"CODE128"},"CODE128")),g.append(ge("option",{value:"EAN8"},"EAN-8")),g.append(ge("option",{value:"EAN13"},"EAN-13")),g.append(ge("option",{value:"UPC"},"UPC")),g.append(ge("option",{value:"QRCode"},"QR Code")),g.addEventListener("change",function(e){for(var t=g.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"format",t,me.type.select,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(g),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_display_value_row",class:"rbroFormRow"}),this.rb.getLabel("docElementDisplayValue"),"rbro_doc_element_display_value"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_display_value",type:"checkbox"})),b=(K.addEventListener("change",function(e){for(var t=K.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"displayValue",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(K),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_bar_width_row",class:"rbroFormRow"}),this.rb.getLabel("docElementBarWidth"),"rbro_doc_element_bar_width"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_bar_width",type:"number",step:"0.1"})),X=(b.addEventListener("input",function(e){var t=b.value;(t=""!==t?xe(t,.3,3):t)!==b.value&&(b.value=t);for(var r=d.rb.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("barWidth")!==t){n=!0;break}if(n){for(var i=new _e("Set value",d.rb),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"barWidth",t,me.type.text,d.rb))}i.isEmpty()||d.rb.executeCommand(i)}}),r.append(b),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_guard_bar_row",class:"rbroFormRow"}),this.rb.getLabel("docElementGuardBar"),"rbro_doc_element_guard_bar"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_guard_bar",type:"checkbox"})),$=(X.addEventListener("change",function(e){for(var t=X.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"guardBar",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(X),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_rotate_row",class:"rbroFormRow"}),this.rb.getLabel("docElementRotate"),"rbro_doc_element_rotate"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_rotate",type:"checkbox"})),v=($.addEventListener("change",function(e){for(var t=$.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"rotate",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append($),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_error_correction_level_row",class:"rbroFormRow"}),this.rb.getLabel("docElementErrorCorrectionLevel"),"rbro_doc_element_error_correction_level"),r=ge("div",{class:"rbroFormField"}),ge("select",{id:"rbro_doc_element_error_correction_level"})),_=(v.append(ge("option",{value:"L"},this.rb.getLabel("docElementErrorCorrectionLevelLow"))),v.append(ge("option",{value:"M"},this.rb.getLabel("docElementErrorCorrectionLevelMedium"))),v.append(ge("option",{value:"Q"},this.rb.getLabel("docElementErrorCorrectionLevelQuartile"))),v.append(ge("option",{value:"H"},this.rb.getLabel("docElementErrorCorrectionLevelHigh"))),v.addEventListener("change",function(e){for(var t=v.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"errorCorrectionLevel",t,me.type.select,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(v),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_source_row",class:"rbroFormRow"}),this.rb.getLabel("docElementSource"),"rbro_doc_element_source"),r=ge("div",{class:"rbroFormField"}),t=ge("div",{class:"rbroSplit rbroSelector"}),ge("textarea",{id:"rbro_doc_element_source",rows:1})),Z=(_.addEventListener("input",function(e){for(var t=_.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"source",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),Ee(_),t.append(_),(T=ge("div",{class:"rbroButton rbroRoundButton rbroIcon-select"})).addEventListener("click",function(e){var t=d.rb.getSelectedObjects(),t=1===t.length?t[0]:null;d.rb.getPopupWindow().show(d.rb.getParameterItems(t,[we.type.image,we.type.string]),null,"rbro_doc_element_source","source",Ie.type.parameterSet)}),t.append(T),r.append(t),r.append(ge("div",{id:"rbro_doc_element_source_error",class:"rbroErrorMessage"})),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_image_row",class:"rbroFormRow"}),this.rb.getLabel("docElementImageFile"),"rbro_doc_element_image"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_image",type:"file"})),o=(Z.addEventListener("change",function(e){var t,i,a,e=e.target.files;e&&e[0]&&(t=new FileReader,i=d.rb,a=e[0].name,t.onload=function(e){for(var t=new _e("Load image",i),r=i.getSelectedObjects(),n=r.length-1;0<=n;n--){var o=r[n];t.addSelection(o.getId()),t.addCommand(new me(o.getId(),"image",e.target.result,me.type.file,i)),t.addCommand(new me(o.getId(),"imageFilename",a,me.type.filename,i))}t.isEmpty()||i.executeCommand(t)},t.onerror=function(e){alert(i.getLabel("docElementLoadImageErrorMsg"))},t.readAsDataURL(e[0]))}),r.append(Z),ge("div",{id:"rbro_doc_element_image_filename_container",class:"rbroImageFile rbroHidden"})),n=(o.append(ge("div",{id:"rbro_doc_element_image_filename"})),ge("div",{id:"rbro_doc_element_image_filename_clear",class:"rbroIcon-cancel rbroButton rbroDeleteButton rbroRoundButton"})),n=(n.addEventListener("click",function(e){Z.value="";for(var t=new _e("Clear image",d.rb),r=d.rb.getSelectedObjects(),n=r.length-1;0<=n;n--){var o=r[n];t.addSelection(o.getId()),t.addCommand(new me(o.getId(),"image","",me.type.file,d.rb)),t.addCommand(new me(o.getId(),"imageFilename","",me.type.filename,d.rb))}t.isEmpty()||d.rb.executeCommand(t)}),o.append(n),r.append(o),r.append(ge("div",{id:"rbro_doc_element_image_error",class:"rbroErrorMessage"})),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_x_read_only_row",class:"rbroFormRow"}),this.rb.getLabel("docElementPositionX"),"rbro_doc_element_x_read_only",{class:"rbroDisabled"}),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_x_read_only",disabled:"disabled"})),J=(r.append(n),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_position_row",class:"rbroFormRow rbroHidden"}),this.rb.getLabel("docElementPosition"),"rbro_doc_element_x",{id:"rbro_doc_element_position_label"}),r=ge("div",{class:"rbroFormField"}),t=ge("div",{class:"rbroSplit"}),ge("input",{id:"rbro_doc_element_x",type:"number"})),Y=(J.addEventListener("input",function(e){for(var t=J.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"x",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),t.append(J),ge("input",{id:"rbro_doc_element_y",type:"number"})),Q=(Y.addEventListener("input",function(e){for(var t=Y.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"y",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),t.append(Y),r.append(t),r.append(ge("div",{id:"rbro_doc_element_position_error",class:"rbroErrorMessage"})),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_size_row",class:"rbroFormRow rbroHidden"}),this.rb.getLabel("docElementSize"),"rbro_doc_element_size",{id:"rbro_doc_element_size_label"}),r=ge("div",{class:"rbroFormField"}),t=ge("div",{class:"rbroSplit"}),ge("input",{id:"rbro_doc_element_width",type:"number"})),ee=(Q.addEventListener("input",function(e){for(var t=Q.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"width",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),t.append(Q),ge("input",{id:"rbro_doc_element_height",type:"number"})),w=(ee.addEventListener("input",function(e){for(var t=ee.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"height",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),t.append(ee),r.append(t),r.append(ge("div",{id:"rbro_doc_element_size_error",class:"rbroErrorMessage"})),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_colspan_row",class:"rbroFormRow"}),this.rb.getLabel("docElementColspan"),"rbro_doc_element_colspan"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_colspan",type:"number"})),E=(w.addEventListener("change",function(e){var t=w.value.trim();(t=""!==t?xe(t,1,9):t)!==w.value&&(w.value=t);for(var r=d.rb.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("colspan")!==t){n=!0;break}if(n){for(var i=new _e("Set value",d.rb),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"colspan",t,me.type.text,d.rb))}i.isEmpty()||d.rb.executeCommand(i)}}),r.append(w),r.append(ge("div",{id:"rbro_doc_element_colspan_error",class:"rbroErrorMessage"})),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_columns_row",class:"rbroFormRow"}),this.rb.getLabel("docElementColumns"),"rbro_doc_element_columns"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_columns",type:"number"})),o=(E.addEventListener("change",function(e){var t=xe(E.value,1,99);t!==E.value&&(E.value=t);for(var r=ve(t),n=d.rb.getSelectedObjects(),o=!1,i=!0,a=n.length-1;0<=a;a--){var l=n[a];l.getValue("columns")!==t&&(o=!0),l.hasEnoughAvailableSpace(r)||(i=!1)}if(i||1!==n.length||(E.value=n[0].getValue("columns")),o&&i){for(var s=new _e("Set value",d.rb),c=n.length-1;0<=c;c--){var u=n[c];s.addSelection(u.getId()),u.addCommandsForChangedColumns(r,s)}s.isEmpty()||d.rb.executeCommand(s)}}),r.append(E),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_header_row",class:"rbroFormRow"}),this.rb.getLabel("header"),"rbro_doc_element_header"),r=ge("div",{class:"rbroFormField"}),ge("label",{class:"switch-light switch-material"})),te=ge("input",{id:"rbro_doc_element_header",type:"checkbox"}),n=(te.addEventListener("change",function(e){for(var t=te.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"header",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),o.append(te),ge("span")),I=(n.append(ge("span")),n.append(ge("span")),n.append(ge("a")),o.append(n),r.append(o),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_content_rows_row",class:"rbroFormRow"}),this.rb.getLabel("docElementContentRows"),"rbro_doc_element_content_rows"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_content_rows",type:"number"})),n=(I.addEventListener("change",function(e){var t=xe(I.value,1,99),r=ve(t);t!==I.value&&(I.value=t);for(var n=d.rb.getSelectedObjects(),o=!1,i=n.length-1;0<=i;i--)if(n[i].getValue("contentRows")!==t){o=!0;break}if(o){for(var a=new _e("Set value",d.rb),l=n.length-1;0<=l;l--){var s=n[l];a.addSelection(s.getId()),s.addCommandsForChangedContentRows(r,a)}a.isEmpty()||d.rb.executeCommand(a)}}),r.append(I),i.append(r),e.append(i),be(i=ge("div",{id:"rbro_doc_element_footer_row",class:"rbroFormRow"}),this.rb.getLabel("footer"),"rbro_doc_element_footer"),r=ge("div",{class:"rbroFormField"}),ge("label",{class:"switch-light switch-material"})),re=ge("input",{id:"rbro_doc_element_footer",type:"checkbox"}),o=(re.addEventListener("change",function(e){for(var t=re.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"footer",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),n.append(re),ge("span")),o=(o.append(ge("span")),o.append(ge("span")),o.append(ge("a")),n.append(o),r.append(n),i.append(r),e.append(i),ge("div",{id:"rbro_doc_element_style_section_container"})),n=ge("div",{class:"rbroPanelSectionHeader"}),C=ge("span",{id:"rbro_doc_element_style_header_icon",class:"rbroIcon-minus"}),n=((i=ge("div",{id:"rbro_doc_element_style_header",class:"rbroFormRow rbroPanelSection rbroPanelSectionHeaderOpen"})).addEventListener("click",function(e){var t;document.getElementById("rbro_doc_element_style_header").classList.toggle("rbroPanelSectionHeaderOpen"),document.getElementById("rbro_doc_element_style_section").classList.toggle("rbroHidden"),C.classList.toggle("rbroIcon-plus"),C.classList.toggle("rbroIcon-minus"),C.classList.contains("rbroIcon-minus")&&(t=document.getElementById("rbro_doc_element_style_section_container").offsetTop,document.getElementById("rbro_detail_panel").scrollTop=t)}),n.append(C),n.append(ge("span",{},this.rb.getLabel("docElementStyle"))),i.append(n),o.append(i),ge("div",{id:"rbro_doc_element_style_section"})),x=(be(i=ge("div",{id:"rbro_doc_element_color_row",class:"rbroFormRow"}),this.rb.getLabel("docElementColor"),"rbro_doc_element_color"),r=ge("div",{class:"rbroFormField"}),ge("div",{class:"rbroColorPickerContainer"})),k=ge("input",{id:"rbro_doc_element_color"}),x=(k.addEventListener("change",function(e){var t=k.value;if(Se(t)){for(var r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"color",t,me.type.color,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}}),x.append(k),this.controls.color=ke(x,k,!1,this.rb),r.append(x),i.append(r),n.append(i),be(i=ge("div",{id:"rbro_doc_element_style_id_row",class:"rbroFormRow"}),this.rb.getLabel("docElementStyle"),"rbro_doc_element_style_id"),r=ge("div",{class:"rbroFormField"}),this.elStyle=ge("select",{id:"rbro_doc_element_style_id"}),this.elStyle.addEventListener("change",function(e){for(var t=new _e("Set value",d.rb),r=d.rb.getSelectedObjects(),n=r.length-1;0<=n;n--){var o=r[n];t.addSelection(o.getId()),o.addCommandsForChangedStyle(d.elStyle.value,"",d.propertyDescriptors,t)}t.isEmpty()||d.rb.executeCommand(t)}),r.append(this.elStyle),i.append(r),n.append(i),ge("div",{id:"rbro_doc_element_style_settings"})),x=(tt.renderStyle(x,"doc_element_","",!0,this.controls,this.rb),n.append(x),o.append(n),e.append(o),ge("div",{id:"rbro_doc_element_print_section_container"})),n=ge("div",{class:"rbroPanelSectionHeader"}),S=ge("span",{id:"rbro_doc_element_print_header_icon",class:"rbroIcon-plus"}),o=((i=ge("div",{id:"rbro_doc_element_print_header",class:"rbroFormRow rbroPanelSection"})).addEventListener("click",function(e){var t;document.getElementById("rbro_doc_element_print_header").classList.toggle("rbroPanelSectionHeaderOpen"),document.getElementById("rbro_doc_element_print_section").classList.toggle("rbroHidden"),S.classList.toggle("rbroIcon-plus"),S.classList.toggle("rbroIcon-minus"),S.classList.contains("rbroIcon-minus")&&(t=document.getElementById("rbro_doc_element_print_section_container").offsetTop,document.getElementById("rbro_detail_panel").scrollTop=t),Ee.update(document.getElementById("rbro_doc_element_print_if"))}),n.append(S),n.append(ge("span",{},this.rb.getLabel("docElementPrintSettings"))),i.append(n),x.append(i),ge("div",{id:"rbro_doc_element_print_section",class:"rbroHidden"})),O=(be(i=ge("div",{id:"rbro_doc_element_group_expression_row",class:"rbroFormRow"}),this.rb.getLabel("docElementGroupExpression"),"rbro_doc_element_group_expression"),r=ge("div",{class:"rbroFormField"}),t=ge("div",{class:"rbroSplit rbroSelector"}),ge("textarea",{id:"rbro_doc_element_group_expression",rows:1})),ne=(O.addEventListener("input",function(e){for(var t=O.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"groupExpression",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),O.addEventListener("blur",function(e){d.rb.getPopupWindow().hide()}),Ee(O),t.append(O),(T=ge("div",{class:"rbroButton rbroRoundButton rbroIcon-select"})).addEventListener("click",function(e){var t=d.rb.getSelectedObjects(),t=1===t.length?t[0]:null;d.rb.getPopupWindow().show(d.rb.getParameterItems(t),null,"rbro_doc_element_group_expression","groupExpression",Ie.type.parameterSet)}),t.append(T),r.append(t),r.append(ge("div",{id:"rbro_doc_element_group_expression_error",class:"rbroErrorMessage"})),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_page_break_row",class:"rbroFormRow"}),this.rb.getLabel("docElementTableBandPageBreak"),"rbro_doc_element_page_break"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_page_break",type:"checkbox"})),oe=(ne.addEventListener("change",function(e){for(var t=ne.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"pageBreak",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(ne),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_repeat_group_header_row",class:"rbroFormRow"}),this.rb.getLabel("docElementRepeatGroupHeader"),"rbro_doc_element_repeat_group_header"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_repeat_group_header",type:"checkbox"})),P=(oe.addEventListener("change",function(e){for(var t=oe.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"repeatGroupHeader",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(oe),r.append(ge("div",{id:"rbro_doc_element_repeat_group_header_error",class:"rbroErrorMessage"})),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_print_if_row",class:"rbroFormRow"}),this.rb.getLabel("docElementPrintIf"),"rbro_doc_element_print_if"),r=ge("div",{class:"rbroFormField"}),t=ge("div",{class:"rbroSplit rbroSelector"}),ge("textarea",{id:"rbro_doc_element_print_if",rows:1})),ie=(P.addEventListener("input",function(e){for(var t=P.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"printIf",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),Ee(P),t.append(P),(T=ge("div",{class:"rbroButton rbroRoundButton rbroIcon-select"})).addEventListener("click",function(e){var t=d.rb.getSelectedObjects(),t=1===t.length?t[0]:null;d.rb.getPopupWindow().show(d.rb.getParameterItems(t),null,"rbro_doc_element_print_if","printIf",Ie.type.parameterAppend)}),t.append(T),r.append(t),r.append(ge("div",{id:"rbro_doc_element_print_if_error",class:"rbroErrorMessage"})),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_repeat_header_row",class:"rbroFormRow"}),this.rb.getLabel("docElementRepeatHeader"),"rbro_doc_element_repeat_header"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_repeat_header",type:"checkbox"})),ae=(ie.addEventListener("change",function(e){for(var t=ie.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"repeatHeader",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(ie),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_remove_empty_element_row",class:"rbroFormRow"}),this.rb.getLabel("docElementRemoveEmptyElement"),"rbro_doc_element_remove_empty_element"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_remove_empty_element",type:"checkbox"})),le=(ae.addEventListener("change",function(e){for(var t=ae.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"removeEmptyElement",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(ae),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_always_print_on_same_page_row",class:"rbroFormRow"}),this.rb.getLabel("docElementAlwaysPrintOnSamePage"),"rbro_doc_element_always_print_on_same_page"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_always_print_on_same_page",type:"checkbox"})),se=(le.addEventListener("change",function(e){for(var t=le.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"alwaysPrintOnSamePage",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(le),r.append(ge("div",{id:"rbro_doc_element_always_print_on_same_page_error",class:"rbroErrorMessage"})),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_shrink_to_content_height_row",class:"rbroFormRow"}),this.rb.getLabel("docElementShrinkToContentHeight"),"rbro_doc_element_shrink_to_content_height"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_shrink_to_content_height",type:"checkbox"})),ce=(se.addEventListener("change",function(e){for(var t=se.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"shrinkToContentHeight",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(se),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_align_to_page_bottom_row",class:"rbroFormRow"}),this.rb.getLabel("docElementAlignToPageBottom"),"rbro_doc_element_align_to_page_bottom"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_align_to_page_bottom",type:"checkbox"})),ue=(ce.addEventListener("change",function(e){for(var t=ce.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"alignToPageBottom",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(ce),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_pattern_row",class:"rbroFormRow"}),this.rb.getLabel("docElementPattern"),"rbro_doc_element_pattern"),r=ge("div",{class:"rbroFormField"}),t=ge("div",{class:"rbroSplit rbroSelector"}),ge("input",{id:"rbro_doc_element_pattern"})),de=(ue.addEventListener("input",function(e){for(var t=ue.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"pattern",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),t.append(ue),(T=ge("div",{class:"rbroButton rbroRoundButton rbroIcon-select"})).addEventListener("click",function(e){d.rb.getPopupWindow().show(d.rb.getPatterns(),null,"rbro_doc_element_pattern","pattern",Ie.type.pattern)}),t.append(T),r.append(t),r.append(ge("div",{id:"rbro_doc_element_pattern_error",class:"rbroErrorMessage"})),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_link_row",class:"rbroFormRow"}),this.rb.getLabel("docElementLink"),"rbro_doc_element_link"),r=ge("div",{class:"rbroFormField"}),t=ge("div",{class:"rbroSplit rbroSelector"}),ge("input",{id:"rbro_doc_element_link"})),A=(de.addEventListener("input",function(e){for(var t=de.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"link",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),t.append(de),(T=ge("div",{class:"rbroButton rbroRoundButton rbroIcon-select"})).addEventListener("click",function(e){var t=d.rb.getSelectedObjects(),t=1===t.length?t[0]:null;d.rb.getPopupWindow().show(d.rb.getParameterItems(t),null,"rbro_doc_element_link","link",Ie.type.parameterSet)}),t.append(T),r.append(t),r.append(ge("div",{id:"rbro_doc_element_link_error",class:"rbroErrorMessage"})),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_grow_weight_row",class:"rbroFormRow"}),this.rb.getLabel("docElementGrowWeight"),"rbro_doc_element_grow_weight"),r=ge("div",{class:"rbroFormField"}),ge("select",{id:"rbro_doc_element_grow_weight"})),n=(A.append(ge("option",{value:"0"},"-")),A.append(ge("option",{value:"1"},"1 (".concat(this.rb.getLabel("docElementGrowWeightLow"),")"))),A.append(ge("option",{value:"2"},"2")),A.append(ge("option",{value:"3"},"3 (".concat(this.rb.getLabel("docElementGrowWeightHigh"),")"))),A.addEventListener("change",function(e){for(var t=A.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"growWeight",t,me.type.select,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(A),r.append(ge("div",{class:"rbroInfo"},this.rb.getLabel("docElementGrowWeightInfo"))),i.append(r),o.append(i),x.append(o),e.append(x),ge("div",{id:"rbro_doc_element_cs_style_section_container"})),o=ge("div",{class:"rbroPanelSectionHeader"}),D=ge("span",{id:"rbro_doc_element_cs_style_header_icon",class:"rbroIcon-plus"}),x=((i=ge("div",{id:"rbro_doc_element_cs_style_header",class:"rbroFormRow rbroPanelSection"})).addEventListener("click",function(e){var t;document.getElementById("rbro_doc_element_cs_style_header").classList.toggle("rbroPanelSectionHeaderOpen"),document.getElementById("rbro_doc_element_cs_style_section").classList.toggle("rbroHidden"),D.classList.toggle("rbroIcon-plus"),D.classList.toggle("rbroIcon-minus"),D.classList.contains("rbroIcon-minus")&&(t=document.getElementById("rbro_doc_element_cs_style_section_container").offsetTop,document.getElementById("rbro_detail_panel").scrollTop=t)}),o.append(D),o.append(ge("span",{},this.rb.getLabel("docElementConditionalStyle"))),i.append(o),n.append(i),ge("div",{id:"rbro_doc_element_cs_style_section",class:"rbroHidden"})),L=(be(i=ge("div",{id:"rbro_doc_element_cs_condition_row",class:"rbroFormRow"}),this.rb.getLabel("docElementConditionalStyleCondition"),"rbro_doc_element_cs_condition"),r=ge("div",{class:"rbroFormField"}),t=ge("div",{class:"rbroSplit rbroSelector"}),ge("textarea",{id:"rbro_doc_element_cs_condition",rows:1})),o=(L.addEventListener("input",function(e){for(var t=L.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"cs_condition",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),Ee(L),t.append(L),(T=ge("div",{class:"rbroButton rbroRoundButton rbroIcon-select"})).addEventListener("click",function(e){var t=d.rb.getSelectedObjects(),t=1===t.length?t[0]:null;d.rb.getPopupWindow().show(d.rb.getParameterItems(t),null,"rbro_doc_element_cs_condition","cs_condition",Ie.type.parameterAppend)}),t.append(T),r.append(t),r.append(ge("div",{id:"rbro_doc_element_cs_condition_error",class:"rbroErrorMessage"})),i.append(r),x.append(i),be(i=ge("div",{id:"rbro_doc_element_cs_style_id_row",class:"rbroFormRow"}),this.rb.getLabel("docElementStyle"),"rbro_doc_element_cs_style_id"),r=ge("div",{class:"rbroFormField"}),this.elCsStyle=ge("select",{id:"rbro_doc_element_cs_style_id"}),this.elCsStyle.addEventListener("change",function(e){for(var t=d.elCsStyle.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),i.addCommandsForChangedStyle(t,"cs_",d.propertyDescriptors,r)}r.isEmpty()||d.rb.executeCommand(r)}),r.append(this.elCsStyle),i.append(r),x.append(i),ge("div",{id:"rbro_doc_element_cs_style_settings"})),T=(tt.renderStyle(o,"doc_element_cs_","cs_",!1,this.controls,this.rb),x.append(o),n.append(x),e.append(n),ge("div",{id:"rbro_doc_element_spreadsheet_section_container"})),t=ge("div",{class:"rbroPanelSectionHeader"}),j=ge("span",{id:"rbro_doc_element_spreadsheet_header_icon",class:"rbroIcon-plus"}),o=((i=ge("div",{id:"rbro_doc_element_spreadsheet_header",class:"rbroFormRow rbroPanelSection"})).addEventListener("click",function(e){var t;document.getElementById("rbro_doc_element_spreadsheet_header").classList.toggle("rbroPanelSectionHeaderOpen"),document.getElementById("rbro_doc_element_spreadsheet_section").classList.toggle("rbroHidden"),j.classList.toggle("rbroIcon-plus"),j.classList.toggle("rbroIcon-minus"),j.classList.contains("rbroIcon-minus")&&(t=document.getElementById("rbro_doc_element_spreadsheet_section_container").offsetTop,document.getElementById("rbro_detail_panel").scrollTop=t)}),t.append(j),t.append(ge("span",{},this.rb.getLabel("docElementSpreadsheet"))),i.append(t),T.append(i),ge("div",{id:"rbro_doc_element_spreadsheet_section",class:"rbroHidden"})),pe=(be(i=ge("div",{id:"rbro_doc_element_spreadsheet_hide_row",class:"rbroFormRow"}),this.rb.getLabel("docElementSpreadsheetHide"),"rbro_doc_element_spreadsheet_hide"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_spreadsheet_hide",type:"checkbox"})),B=(pe.addEventListener("change",function(e){for(var t=pe.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"spreadsheet_hide",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(pe),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_spreadsheet_column_row",class:"rbroFormRow"}),this.rb.getLabel("docElementSpreadsheetColumn"),"rbro_doc_element_spreadsheet_column"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_spreadsheet_column",type:"number"})),he=(B.addEventListener("input",function(e){var t=B.value;(t=""!==t?xe(t,1,99):t)!==B.value&&(B.value=t);for(var r=d.rb.getSelectedObjects(),n=!1,o=r.length-1;0<=o;o--)if(r[o].getValue("spreadsheet_column")!==t){n=!0;break}if(n){for(var i=new _e("Set value",d.rb),a=r.length-1;0<=a;a--){var l=r[a];i.addSelection(l.getId()),i.addCommand(new me(l.getId(),"spreadsheet_column",t,me.type.text,d.rb))}i.isEmpty()||d.rb.executeCommand(i)}}),r.append(B),r.append(ge("div",{id:"rbro_doc_element_spreadsheet_column_error",class:"rbroErrorMessage"})),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_spreadsheet_colspan_row",class:"rbroFormRow"}),this.rb.getLabel("docElementSpreadsheetColspan"),"rbro_doc_element_spreadsheet_colspan"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_spreadsheet_colspan",type:"number"})),fe=(he.addEventListener("input",function(e){for(var t=he.value,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"spreadsheet_colspan",t,me.type.text,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(he),r.append(ge("div",{id:"rbro_doc_element_spreadsheet_colspan_error",class:"rbroErrorMessage"})),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_spreadsheet_add_empty_row_row",class:"rbroFormRow"}),this.rb.getLabel("docElementSpreadsheetAddEmptyRow"),"rbro_doc_element_spreadsheet_add_empty_row"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_spreadsheet_add_empty_row",type:"checkbox"})),ye=(fe.addEventListener("change",function(e){for(var t=fe.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"spreadsheet_addEmptyRow",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(fe),i.append(r),o.append(i),be(i=ge("div",{id:"rbro_doc_element_spreadsheet_text_wrap_row",class:"rbroFormRow"}),this.rb.getLabel("docElementSpreadsheetTextWrap"),"rbro_doc_element_spreadsheet_text_wrap"),r=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_doc_element_spreadsheet_text_wrap",type:"checkbox"}));ye.addEventListener("change",function(e){for(var t=ye.checked,r=new _e("Set value",d.rb),n=d.rb.getSelectedObjects(),o=n.length-1;0<=o;o--){var i=n[o];r.addSelection(i.getId()),r.addCommand(new me(i.getId(),"spreadsheet_textWrap",t,me.type.checkbox,d.rb))}r.isEmpty()||d.rb.executeCommand(r)}),r.append(ye),i.append(r),o.append(i),T.append(o),this.rb.getProperty("enableSpreadsheet")||(T.style.display="none"),e.append(T),document.getElementById("rbro_detail_panel").append(e),this.rb.getProperty("showPlusFeatures")&&this.setupRichText()}},{key:"renderStyleSelect",value:function(){m(this.elStyle),m(this.elCsStyle),this.elStyle.append(ge("option",{value:""},this.rb.getLabel("styleNone"))),this.elCsStyle.append(ge("option",{value:""},this.rb.getLabel("styleNone")));var e,t=Ce(this.rb.getStyles());try{for(t.s();!(e=t.n()).done;){var r=e.value;this.elStyle.append(ge("option",{value:r.getId()},r.getName())),this.elCsStyle.append(ge("option",{value:r.getId()},r.getName()))}}catch(e){t.e(e)}finally{t.f()}}},{key:"setupRichText",value:function(){var r=this,e=rt().import("formats/link"),t=e.sanitize;e.sanitize=function(e){return/^\w+:/.test(e)||e.startsWith("${")?e:(/^https?:/.test(e)||(e=e.startsWith("/")?"http:"+e:"http://"+e),t.call(this,e))},document.getElementById("rbro_doc_element_rich_text_content_toolbar_parameter").addEventListener("click",function(e){var t=r.rb.getSelectedObjects(),t=1===t.length?t[0]:null;r.rb.getPopupWindow().show(r.rb.getParameterItems(t),null,"rbro_doc_element_rich_text_content","richTextContent",Ie.type.parameterAppend,r.quill)});var n,e=rt().import("formats/font"),o=[],i=Ce(this.rb.getFonts());try{for(i.s();!(n=i.n()).done;){var a=n.value;o.push(a.value)}}catch(r){i.e(r)}finally{i.f()}e.whitelist=o,rt().register(e,!0);var l,e=rt().import("attributors/style/size"),s=[],c=Ce(this.rb.getProperty("fontSizes"));try{for(c.s();!(l=c.n()).done;){var u=l.value;s.push(u+"px")}}catch(r){c.e(r)}finally{c.f()}e.whitelist=s,rt().register(e,!0);var d=new(rt())("#rbro_doc_element_rich_text_content",{modules:{toolbar:"#rbro_doc_element_rich_text_content_toolbar"},placeholder:"",theme:"snow"}),p=(d.getModule("toolbar").addHandler("color",function(e){"clear-color"===e?d.format("color",""):d.format("color",e)}),d.getModule("toolbar").addHandler("background",function(e){"clear-color"===e?d.format("background",""):d.format("background",e)}),this.rb);d.on("text-change",function(e,t,r){for(var n=d.getContents(),o=d.root.innerHTML,i=new _e("Set value",p),a=p.getSelectedObjects(),l=a.length-1;0<=l;l--){var s=a[l];i.addSelection(s.getId()),i.addCommand(new me(s.getId(),"richTextContent",n,me.type.richText,p)),i.addCommand(new me(s.getId(),"richTextHtml",o,me.type.text,p))}i.isEmpty()||p.executeCommand(i)}),this.quill=d}},{key:"destroy",value:function(){this.controls.color.destroy(),tt.destroyStyle("",this.controls),tt.destroyStyle("cs_",this.controls)}},{key:"updateDisplay",value:function(e){var t,r,n=this.rb.getSelectedObjects(),o={},i={},a=Ce(n);try{for(a.s();!(t=a.n()).done;){var l,s=Ce(t.value.getProperties());try{for(s.s();!(l=s.n()).done;){var c=l.value;c in i?i[c]+=1:i[c]=1}}catch(e){s.e(e)}finally{s.f()}}}catch(e){a.e(e)}finally{a.f()}for(r in this.propertyDescriptors)if(this.propertyDescriptors.hasOwnProperty(r)){var u=this.propertyDescriptors[r],d="";if("visibleIf"in u&&(d=u.visibleIf),null===e||r===e||d&&u.visibleIfFields.includes(e)){var p,h=!1;if(r in i)if(i[r]===n.length){var f,y,m=null,g=!1,b=Ce(n);try{for(b.s();!(f=b.n()).done;){var v=f.value,_=v.getUpdateValue(r,v.getValue(r));if(null===m)m=_;else if(u.type===me.type.richText){if(_&&m&&0<new(nt())(_).diff(new(nt())(m)).ops.length){g=!0;break}}else if(_!==m){g=!0;break}}}catch(e){b.e(e)}finally{b.f()}g&&u.type===me.type.select&&u.allowEmpty&&(m=""),R(B(j.prototype),"setValue",this).call(this,u,m,g),"section"in u&&((y=u.section)in o?o[y]+=1:o[y]=1),h=!0}else delete i[r];if(h&&d){var w,E=Ce(n);try{for(E.s();!(w=E.n()).done;)if(!N(d,w.value)){h=!1,delete i[r];break}}catch(e){E.e(e)}finally{E.f()}}"singleRowProperty"in u&&!u.singleRowProperty?(y="rbro_doc_element_".concat(u.fieldId),h?document.getElementById(y).classList.remove("rbroHidden"):document.getElementById(y).classList.add("rbroHidden")):(p=this.getRowId(u),h?document.getElementById(p).classList.remove("rbroHidden"):document.getElementById(p).classList.add("rbroHidden"))}}if(null===e||this.visibleIfFields.includes(e)){for(var I in this.propertyDescriptors)if(this.propertyDescriptors.hasOwnProperty(I)){I=this.propertyDescriptors[I];if("rowId"in I&&"rowProperties"in I){var C,x=0,k=Ce(I.rowProperties);try{for(k.s();!(C=k.n()).done;)C.value in i&&x++}catch(e){k.e(e)}finally{k.f()}if("labelId"in I){var S=I.defaultLabel;if(1===x){var O,P=Ce(I.rowProperties);try{for(P.s();!(O=P.n()).done;){var A=O.value;if(A in i){S=this.propertyDescriptors[A].singlePropertyLabel;break}}}catch(e){P.e(e)}finally{P.f()}}document.getElementById(I.labelId).textContent=this.rb.getLabel(S)+":"}0<x?document.getElementById(I.rowId).classList.remove("rbroHidden"):document.getElementById(I.rowId).classList.add("rbroHidden")}}for(var D=0,L=["style","print","cs_style","spreadsheet"];D<L.length;D++){var T=L[D];T in o?document.getElementById("rbro_doc_element_".concat(T,"_section_container")).classList.remove("rbroHidden"):document.getElementById("rbro_doc_element_".concat(T,"_section_container")).classList.add("rbroHidden")}}j.updateAutosizeInputs(e)}},{key:"show",value:function(){this.renderStyleSelect(),R(B(j.prototype),"show",this).call(this)}},{key:"notifyEvent",value:function(e,t,r){e instanceof Y?(t===p.operation.add||t===p.operation.remove||t===p.operation.move||t===p.operation.change&&"name"===r)&&this.renderStyleSelect():R(B(j.prototype),"notifyEvent",this).call(this,e,t,r)}}],[{key:"updateAutosizeInputs",value:function(e){null!==e&&"dataSource"!==e||Ee.update(document.getElementById("rbro_doc_element_data_source")),null!==e&&"content"!==e||Ee.update(document.getElementById("rbro_doc_element_content")),null!==e&&"source"!==e||Ee.update(document.getElementById("rbro_doc_element_source")),null!==e&&"groupExpression"!==e||Ee.update(document.getElementById("rbro_doc_element_group_expression")),null!==e&&"printIf"!==e||Ee.update(document.getElementById("rbro_doc_element_print_if")),null!==e&&"cs_condition"!==e||Ee.update(document.getElementById("rbro_doc_element_cs_condition"))}}]),j}(),at=function(){t(i,Je);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t){return u(this,i),(e=o.call(this,"rbro_document_properties",l,e,t)).propertyDescriptors={pageFormat:{type:me.type.text,fieldId:"page_format"},pageWidth:{type:me.type.text,fieldId:"page_width"},pageHeight:{type:me.type.text,fieldId:"page_height"},unit:{type:me.type.select,fieldId:"unit"},orientation:{type:me.type.select,fieldId:"orientation"},contentHeight:{type:me.type.text,fieldId:"content_height"},marginLeft:{type:me.type.text,fieldId:"page_margin_left"},marginTop:{type:me.type.text,fieldId:"page_margin_top"},marginRight:{type:me.type.text,fieldId:"page_margin_right"},marginBottom:{type:me.type.text,fieldId:"page_margin_bottom"},header:{type:me.type.checkbox,fieldId:"header"},headerSize:{type:me.type.text,fieldId:"header_size"},headerDisplay:{type:me.type.select,fieldId:"header_display"},footer:{type:me.type.checkbox,fieldId:"footer"},footerSize:{type:me.type.text,fieldId:"footer_size"},footerDisplay:{type:me.type.select,fieldId:"footer_display"},patternLocale:{type:me.type.select,fieldId:"pattern_locale"},patternCurrencySymbol:{type:me.type.text,fieldId:"pattern_currency_symbol"},patternNumberGroupSymbol:{type:me.type.text,fieldId:"pattern_number_group_symbol"}},e}return e(i,[{key:"render",value:function(e){var r=this,t=ge("div",{id:"rbro_document_properties_panel",class:"rbroHidden"}),n=ge("div",{id:"rbro_document_properties_page_row",class:"rbroFormRow"}),o=(be(n,this.rb.getLabel("pageFormat"),"rbro_document_properties_page_format"),ge("div",{class:"rbroFormField"})),i=ge("select",{id:"rbro_document_properties_page_format"}),a=(i.append(ge("option",{value:"A4"},this.rb.getLabel("pageFormatA4"))),i.append(ge("option",{value:"A5"},this.rb.getLabel("pageFormatA5"))),i.append(ge("option",{value:"letter"},this.rb.getLabel("pageFormatLetter"))),i.append(ge("option",{value:"user_defined"},this.rb.getLabel("pageFormatUserDefined"))),i.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"pageFormat",i.value,me.type.select,r.rb),r.rb.executeCommand(t))}),o.append(i),ge("div",{id:"rbro_document_properties_page_size_row",class:"rbroTripleSplit"})),l=ge("input",{id:"rbro_document_properties_page_width",maxlength:"5"}),s=(l.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"pageWidth",l.value,me.type.select,r.rb),r.rb.executeCommand(t))}),y(l),a.append(l),ge("input",{id:"rbro_document_properties_page_height",maxlength:"5"})),c=(s.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"pageHeight",s.value,me.type.text,r.rb),r.rb.executeCommand(t))}),y(s),a.append(s),ge("select",{id:"rbro_document_properties_unit"})),u=(c.append(ge("option",{value:"mm"},"mm")),c.append(ge("option",{value:"inch"},"inch")),a.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"unit",c.value,me.type.select,r.rb),r.rb.executeCommand(t))}),a.append(c),o.append(a),o.append(ge("div",{id:"rbro_document_properties_page_error",class:"rbroErrorMessage"})),n.append(o),t.append(n),be(n=ge("div",{class:"rbroFormRow"}),this.rb.getLabel("orientation"),"rbro_document_properties_orientation"),o=ge("div",{class:"rbroFormField"}),ge("select",{id:"rbro_document_properties_orientation"})),d=(u.append(ge("option",{value:"portrait"},this.rb.getLabel("orientationPortrait"))),u.append(ge("option",{value:"landscape"},this.rb.getLabel("orientationLandscape"))),u.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"orientation",u.value,me.type.select,r.rb),r.rb.executeCommand(t))}),o.append(u),n.append(o),t.append(n),be(n=ge("div",{class:"rbroFormRow"}),this.rb.getLabel("contentHeight"),"rbro_document_properties_content_height"),o=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_document_properties_content_height"})),p=(d.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"contentHeight",d.value,me.type.text,r.rb),r.rb.executeCommand(t))}),y(d),o.append(d),o.append(ge("div",{class:"rbroInfo"},this.rb.getLabel("contentHeightInfo"))),n.append(o),t.append(n),this.renderMarginControls(t),this.renderHeaderFooter(t),be(n=ge("div",{class:"rbroFormRow"}),this.rb.getLabel("patternLocale"),"rbro_document_properties_pattern_locale"),o=ge("div",{class:"rbroFormField"}),ge("select",{id:"rbro_document_properties_pattern_locale"})),h=(p.append(ge("option",{value:"de"},"de")),p.append(ge("option",{value:"en"},"en")),p.append(ge("option",{value:"es"},"es")),p.append(ge("option",{value:"fr"},"fr")),p.append(ge("option",{value:"it"},"it")),p.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"patternLocale",p.value,me.type.select,r.rb),r.rb.executeCommand(t))}),o.append(p),n.append(o),t.append(n),be(n=ge("div",{class:"rbroFormRow"}),this.rb.getLabel("patternCurrencySymbol"),"rbro_document_properties_pattern_currency_symbol"),o=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_document_properties_pattern_currency_symbol"})),f=(h.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"patternCurrencySymbol",h.value,me.type.text,r.rb),r.rb.executeCommand(t))}),o.append(h),n.append(o),t.append(n),be(n=ge("div",{class:"rbroFormRow"}),this.rb.getLabel("patternNumberGroupSymbol"),"rbro_document_properties_pattern_number_group_symbol"),o=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_document_properties_pattern_number_group_symbol",maxlength:"1"}));f.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"patternNumberGroupSymbol",f.value,me.type.text,r.rb),r.rb.executeCommand(t))}),o.append(f),o.append(ge("div",{class:"rbroInfo"},this.rb.getLabel("patternNumberGroupSymbolInfo"))),n.append(o),t.append(n),document.getElementById("rbro_detail_panel").append(t)}},{key:"renderMarginControls",value:function(e){var r=this,t=ge("div",{class:"rbroFormRow"}),n=(be(t,this.rb.getLabel("pageMargins"),"rbro_document_properties_page_margin_top"),ge("div",{class:"rbroFormField rbroSmallInput"})),o=ge("div",{class:"rbroColumnCenter"}),i=ge("input",{id:"rbro_document_properties_page_margin_top",placeholder:this.rb.getLabel("orientationTop")}),o=(i.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"marginTop",i.value,me.type.text,r.rb),r.rb.executeCommand(t))}),y(i),o.append(i),n.append(o),ge("div",{class:"rbroSplit"})),a=ge("input",{id:"rbro_document_properties_page_margin_left",placeholder:this.rb.getLabel("orientationLeft")}),l=(a.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"marginLeft",a.value,me.type.text,r.rb),r.rb.executeCommand(t))}),y(a),o.append(a),ge("input",{id:"rbro_document_properties_page_margin_right",placeholder:this.rb.getLabel("orientationRight")})),o=(l.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"marginRight",l.value,me.type.text,r.rb),r.rb.executeCommand(t))}),y(l),o.append(l),n.append(o),ge("div",{class:"rbroColumnCenter"})),s=ge("input",{id:"rbro_document_properties_page_margin_bottom",placeholder:this.rb.getLabel("orientationBottom")});s.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"marginBottom",s.value,me.type.text,r.rb),r.rb.executeCommand(t))}),y(s),o.append(s),n.append(o),t.append(n),e.append(t)}},{key:"renderHeaderFooter",value:function(e){var r=this,t=ge("div",{class:"rbroFormRowContainer"}),n=ge("div",{class:"rbroFormRow"}),o=(be(n,this.rb.getLabel("header"),"rbro_document_properties_header"),ge("div",{class:"rbroFormField"})),i=ge("label",{class:"switch-light switch-material"}),a=ge("input",{id:"rbro_document_properties_header",type:"checkbox"}),l=(a.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"header",a.checked,me.type.checkbox,r.rb),r.rb.executeCommand(t))}),i.append(a),ge("span")),l=(l.append(ge("span")),l.append(ge("span")),l.append(ge("a")),i.append(l),o.append(i),n.append(o),t.append(n),ge("div",{id:"rbro_document_properties_header_settings"})),s=(be(n=ge("div",{class:"rbroFormRow"}),this.rb.getLabel("headerSize"),"rbro_document_properties_header_size"),o=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_document_properties_header_size"})),c=(s.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"headerSize",s.value,me.type.text,r.rb),r.rb.executeCommand(t))}),y(s),o.append(s),n.append(o),l.append(n),be(n=ge("div",{class:"rbroFormRow"}),this.rb.getLabel("headerDisplay"),"rbro_document_properties_header_display"),o=ge("div",{class:"rbroFormField"}),ge("select",{id:"rbro_document_properties_header_display"})),i=(c.append(ge("option",{value:"always"},this.rb.getLabel("headerFooterDisplayAlways"))),c.append(ge("option",{value:"not_on_first_page"},this.rb.getLabel("headerFooterDisplayNotOnFirstPage"))),c.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"headerDisplay",c.value,me.type.select,r.rb),r.rb.executeCommand(t))}),o.append(c),n.append(o),l.append(n),t.append(l),e.append(t),ge("div",{class:"rbroFormRowContainer"})),l=(be(n=ge("div",{class:"rbroFormRow"}),this.rb.getLabel("footer"),"rbro_document_properties_footer"),o=ge("div",{class:"rbroFormField"}),ge("label",{class:"switch-light switch-material"})),u=ge("input",{id:"rbro_document_properties_footer",type:"checkbox"}),t=(u.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"footer",u.checked,me.type.checkbox,r.rb),r.rb.executeCommand(t))}),l.append(u),ge("span")),t=(t.append(ge("span")),t.append(ge("span")),t.append(ge("a")),l.append(t),o.append(l),n.append(o),i.append(n),ge("div",{id:"rbro_document_properties_footer_settings"})),d=(be(n=ge("div",{class:"rbroFormRow"}),this.rb.getLabel("footerSize"),"rbro_document_properties_footer_size"),o=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_document_properties_footer_size"})),p=(d.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"footerSize",d.value,me.type.text,r.rb),r.rb.executeCommand(t))}),y(d),o.append(d),n.append(o),t.append(n),be(n=ge("div",{class:"rbroFormRow"}),this.rb.getLabel("footerDisplay"),"rbro_document_properties_footer_display"),o=ge("div",{class:"rbroFormField"}),ge("select",{id:"rbro_document_properties_footer_display"}));p.append(ge("option",{value:"always"},this.rb.getLabel("headerFooterDisplayAlways"))),p.append(ge("option",{value:"not_on_first_page"},this.rb.getLabel("headerFooterDisplayNotOnFirstPage"))),p.addEventListener("change",function(e){var t=r.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"footerDisplay",p.value,me.type.select,r.rb),r.rb.executeCommand(t))}),o.append(p),n.append(o),t.append(n),i.append(t),e.append(i)}},{key:"updateDisplay",value:function(e){var t,r=this.rb.getSelectedObject();if(null!==r&&r instanceof l){for(var n in this.propertyDescriptors)!this.propertyDescriptors.hasOwnProperty(n)||null!==e&&n!==e||(t=this.propertyDescriptors[n],n=r.getValue(n),R(B(i.prototype),"setValue",this).call(this,t,n,!1));i.updateVisibileRows(r,e)}}}],[{key:"updateVisibileRows",value:function(e,t){null!==t&&"pageFormat"!==t||(e.getValue("pageFormat")===l.pageFormat.userDefined?document.getElementById("rbro_document_properties_page_size_row").style.display="block":document.getElementById("rbro_document_properties_page_size_row").style.display="none"),null!==t&&"header"!==t||(e.getValue("header")?document.getElementById("rbro_document_properties_header_settings").style.display="block":document.getElementById("rbro_document_properties_header_settings").style.display="none"),null!==t&&"footer"!==t||(e.getValue("footer")?document.getElementById("rbro_document_properties_footer_settings").style.display="block":document.getElementById("rbro_document_properties_footer_settings").style.display="none")}}]),i}(),lt=(e(st,[{key:"render",value:function(){var e=ge("div",{id:"rbro_empty_detail_panel",class:"rbroEmptyDetailPanel rbroHidden"});e.append(ge("div",{class:"rbroLogo"})),document.getElementById("rbro_detail_panel").append(e)}},{key:"destroy",value:function(){}},{key:"show",value:function(e){document.getElementById("rbro_empty_detail_panel").classList.remove("rbroHidden")}},{key:"hide",value:function(){document.getElementById("rbro_empty_detail_panel").classList.add("rbroHidden")}},{key:"isKeyEventDisabled",value:function(){return!1}},{key:"notifyEvent",value:function(e,t){}},{key:"updateErrors",value:function(){}}]),st);function st(e,t){u(this,st),this.rootElement=e,this.rb=t}function ct(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return ut(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ut(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dt=function(){t(i,Je);r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,n,o=function(){var e,t=B(r);return d(this,n?(e=B(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t){return u(this,i),(e=o.call(this,"rbro_parameter",we,e,t)).propertyDescriptors={name:{type:me.type.text,fieldId:"name"},type:{type:me.type.select,fieldId:"type"},arrayItemType:{type:me.type.select,fieldId:"array_item_type"},eval:{type:me.type.checkbox,fieldId:"eval"},nullable:{type:me.type.checkbox,fieldId:"nullable"},pattern:{type:me.type.text,fieldId:"pattern"},expression:{type:me.type.text,fieldId:"expression"},testData:{type:me.type.text,fieldId:"test_data"},testDataBoolean:{type:me.type.checkbox,fieldId:"test_data_boolean"},testDataImage:{type:me.type.file,fieldId:"test_data_image",rowId:"rbro_parameter_test_data_image_row",singleRowProperty:!1,rowProperties:["testDataImage","testDataImageFilename"]},testDataImageFilename:{type:me.type.filename,fieldId:"test_data_image_filename",rowId:"rbro_parameter_test_data_image_row",singleRowProperty:!1}},e.parameterTypeOptions=[],e}return e(i,[{key:"render",value:function(e){var p=this,t=ge("div",{id:"rbro_parameter_panel",class:"rbroHidden"}),r=ge("div",{id:"rbro_parameter_name_row",class:"rbroFormRow"}),n=(be(r,this.rb.getLabel("parameterName"),"rbro_parameter_name"),ge("div",{class:"rbroFormField"})),h=ge("input",{id:"rbro_parameter_name"}),i=(h.addEventListener("input",function(e){var t=p.rb.getSelectedObject();if(null!==t){var r=h.value;if(r!==t.getName()){var n=new _e("Rename parameter"),o=new me(t.getId(),"name",r,me.type.text,p.rb);n.addCommand(o);for(var i=[],a=null,l=t.getParent();null!==l;)a=l,i.unshift(a),l=a.getParent();t.addUpdateTestDataCmdForChangedParameterName(r,i,n);o=null;if(null!==(o=null!==a?a.getPanelItem():p.rb.getMainPanel().getParametersItem())&&null===o.getChildByNameExclude(t.getName(),t)&&null===o.getChildByNameExclude(r,t)){var s,c=ct(p.rb.getDocElements(!0));try{for(c.s();!(s=c.n()).done;)s.value.addCommandsForChangedParameterName(t,r,n)}catch(e){c.e(e)}finally{c.f()}var u,d=ct(p.rb.getParameters());try{for(d.s();!(u=d.n()).done;)u.value.addCommandsForChangedParameterName(t,r,n)}catch(e){d.e(e)}finally{d.f()}}p.rb.executeCommand(n)}}}),n.append(h),n.append(ge("div",{id:"rbro_parameter_name_error",class:"rbroErrorMessage"})),r.append(n),t.append(r),be(r=ge("div",{id:"rbro_parameter_type_row",class:"rbroFormRow"}),this.rb.getLabel("parameterType"),"rbro_parameter_type"),n=ge("div",{class:"rbroFormField"}),ge("select",{id:"rbro_parameter_type"})),o=(i.addEventListener("change",function(e){var t,r,n,o=p.rb.getSelectedObject();null!==o&&(t=new _e("Set parameter type"),r=i.value,n=new me(o.getId(),"type",r,me.type.select,p.rb),t.addCommand(n),o.addCommandsForChangedParameterType(r,t),p.rb.executeCommand(t))}),n.append(i),n.append(ge("div",{id:"rbro_parameter_type_error",class:"rbroErrorMessage"})),this.rb.getProperty("showPlusFeaturesInfo")&&((a=ge("div",{id:"rbro_parameter_type_nested_plus_info",class:"rbroInfo"})).innerHTML=this.rb.getLabel("plusFeatureInfoNestedParameter"),n.append(a)),r.append(n),t.append(r),be(r=ge("div",{id:"rbro_parameter_array_item_type_row",class:"rbroFormRow"}),this.rb.getLabel("parameterArrayItemType"),"rbro_parameter_array_item_type_row"),n=ge("div",{class:"rbroFormField"}),ge("select",{id:"rbro_parameter_array_item_type"})),a=(o.append(ge("option",{value:"string"},this.rb.getLabel("parameterTypeString"))),o.append(ge("option",{value:"number"},this.rb.getLabel("parameterTypeNumber"))),o.append(ge("option",{value:"boolean"},this.rb.getLabel("parameterTypeBoolean"))),o.append(ge("option",{value:"date"},this.rb.getLabel("parameterTypeDate"))),o.addEventListener("change",function(e){var t=p.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"arrayItemType",o.value,me.type.select,p.rb),p.rb.executeCommand(t))}),n.append(o),n.append(ge("div",{id:"rbro_parameter_array_item_type_error",class:"rbroErrorMessage"})),r.append(n),t.append(r),{}),a=(this.rb.getProperty("adminMode")||(a.style="display: none"),ge("div",a)),l=(be(r=ge("div",{id:"rbro_parameter_eval_row",class:"rbroFormRow"}),this.rb.getLabel("parameterEval"),"rbro_parameter_eval"),n=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_parameter_eval",type:"checkbox"})),s=(l.addEventListener("change",function(e){var t=p.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"eval",l.checked,me.type.checkbox,p.rb),p.rb.executeCommand(t))}),n.append(l),r.append(n),a.append(r),t.append(a),be(r=ge("div",{id:"rbro_parameter_nullable_row",class:"rbroFormRow"}),this.rb.getLabel("parameterNullable"),"rbro_parameter_nullable"),n=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_parameter_nullable",type:"checkbox"})),a=(s.addEventListener("change",function(e){var t=p.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"nullable",s.checked,me.type.checkbox,p.rb),p.rb.executeCommand(t))}),n.append(s),r.append(n),t.append(r),be(r=ge("div",{id:"rbro_parameter_pattern_row",class:"rbroFormRow"}),this.rb.getLabel("parameterPattern"),"rbro_parameter_pattern"),n=ge("div",{class:"rbroFormField"}),ge("div",{class:"rbroSplit rbroSelector"})),c=ge("input",{id:"rbro_parameter_pattern"}),u=(c.addEventListener("input",function(e){var t=p.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"pattern",c.value,me.type.text,p.rb),p.rb.executeCommand(t))}),a.append(c),ge("div",{class:"rbroButton rbroRoundButton rbroIcon-select"})),d=(u.addEventListener("click",function(e){var t,r=p.rb.getSelectedObject();null!==r&&(t=((t=r.getValue("type"))===we.type.simpleArray?r.getValue("arrayItemType"):t)===we.type.date?p.rb.getProperty("patternDates"):p.rb.getProperty("patternNumbers"),p.rb.getPopupWindow().show(t,r.getId(),"rbro_parameter_pattern","pattern",Ie.type.pattern))}),a.append(u),n.append(a),n.append(ge("div",{id:"rbro_parameter_pattern_error",class:"rbroErrorMessage"})),r.append(n),t.append(r),be(r=ge("div",{id:"rbro_parameter_expression_row",class:"rbroFormRow"}),this.rb.getLabel("parameterExpression"),"rbro_parameter_expression"),n=ge("div",{class:"rbroFormField"}),a=ge("div",{class:"rbroSplit rbroSelector"}),ge("textarea",{id:"rbro_parameter_expression",rows:"1"})),u=(d.addEventListener("input",function(e){var t=p.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"expression",d.value,me.type.text,p.rb),p.rb.executeCommand(t))}),Ee(d),a.append(d),(u=ge("div",{id:"rbro_parameter_expression_param_button",class:"rbroButton rbroRoundButton rbroIcon-select"})).addEventListener("click",function(e){var t,r,n=p.rb.getSelectedObject();null!==n&&(r=n.getValue("type")===we.type.sum||n.getValue("type")===we.type.average?(t=p.rb.getArrayFieldParameterItems([we.type.number]),Ie.type.parameterSet):(t=p.rb.getParameterItems(n),Ie.type.parameterAppend),p.rb.getPopupWindow().show(t,n.getId(),"rbro_parameter_expression","expression",r))}),a.append(u),n.append(a),n.append(ge("div",{id:"rbro_parameter_expression_error",class:"rbroErrorMessage"})),r.append(n),t.append(r),ge("div",{id:"rbro_parameter_test_data_container"})),f=(be(r=ge("div",{id:"rbro_parameter_test_data_row",class:"rbroFormRow"}),this.rb.getLabel("parameterTestData"),"rbro_parameter_test_data"),n=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_parameter_test_data"})),a=(f.addEventListener("change",function(e){var t=p.rb.getSelectedObject();null!==t&&(t=new me(t.getId(),"testData",f.value,me.type.text,p.rb),p.rb.executeCommand(t))}),n.append(f),n.append(ge("div",{id:"rbro_parameter_test_data_error",class:"rbroErrorMessage"})),r.append(n),u.append(r),be(r=ge("div",{id:"rbro_parameter_edit_test_data_row",class:"rbroFormRow"}),this.rb.getLabel("parameterTestData"),"rbro_parameter_edit_test_data_row"),n=ge("div",{class:"rbroFormField"}),ge("button",{id:"rbro_parameter_edit_test_data",class:"rbroButton rbroActionButton"})),y=(a.append(ge("span",{},this.rb.getLabel("parameterEditTestData"))),a.append(ge("span",{class:"rbroIcon-edit"})),a.addEventListener("click",function(e){var t=p.rb.getSelectedObject();null!==t&&(0<t.getParameterFields().length?p.rb.getPopupWindow().show(null,t.getId(),"","testData",Ie.type.testData,null,t):alert(p.rb.getLabel("parameterEditTestDataNoFields")))}),n.append(a),n.append(ge("div",{id:"rbro_parameter_edit_test_data_error",class:"rbroErrorMessage"})),r.append(n),u.append(r),be(r=ge("div",{id:"rbro_parameter_test_data_boolean_row",class:"rbroFormRow"}),this.rb.getLabel("parameterTestData"),"rbro_parameter_test_data_boolean"),n=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_parameter_test_data_boolean",type:"checkbox"})),m=(y.addEventListener("change",function(e){var t=y.checked,r=rb.getSelectedObject();null!==r&&(r=new me(r.getId(),"testDataBoolean",t,me.type.checkbox,p.rb),p.rb.executeCommand(r))}),n.append(y),r.append(n),u.append(r),be(r=ge("div",{id:"rbro_parameter_test_data_image_row",class:"rbroFormRow"}),this.rb.getLabel("parameterTestData"),"rbro_parameter_test_data_image"),n=ge("div",{class:"rbroFormField"}),ge("input",{id:"rbro_parameter_test_data_image",type:"file"})),a=(m.addEventListener("change",function(e){var t,n,o,e=e.target.files;e&&e[0]&&(t=new FileReader,n=p.rb,o=e[0].name,t.onload=function(e){var t=new _e("Load image",n),r=n.getSelectedObject();null!==r&&(t.addSelection(r.getId()),t.addCommand(new me(r.getId(),"testDataImage",e.target.result,me.type.file,n)),t.addCommand(new me(r.getId(),"testDataImageFilename",o,me.type.filename,n))),t.isEmpty()||n.executeCommand(t)},t.onerror=function(e){alert(n.getLabel("docElementLoadImageErrorMsg"))},t.readAsDataURL(e[0]))}),n.append(m),ge("div",{id:"rbro_parameter_test_data_image_filename_container",class:"rbroSplit rbroHidden"})),g=(a.append(ge("div",{id:"rbro_parameter_test_data_image_filename"})),ge("div",{id:"rbro_parameter_test_data_image_filename_clear",class:"rbroIcon-cancel rbroButton rbroDeleteButton rbroRoundButton"}));g.addEventListener("click",function(e){m.value="";var t=new _e("Clear image",p.rb),r=rb.getSelectedObject();null!==r&&(t.addSelection(r.getId()),t.addCommand(new me(r.getId(),"testDataImage","",me.type.file,p.rb)),t.addCommand(new me(r.getId(),"testDataImageFilename","",me.type.filename,p.rb))),t.isEmpty()||p.rb.executeCommand(t)}),a.append(g),n.append(a),n.append(ge("div",{id:"rbro_parameter_test_data_image_error",class:"rbroErrorMessage"})),n.append(ge("div",{class:"rbroInfo"},this.rb.getLabel("parameterTestDataImageInfo"))),r.append(n),u.append(r),t.append(u),document.getElementById("rbro_detail_panel").append(t)}},{key:"updateVisibileRows",value:function(e,t){var r=e.getValue("type"),n=r===we.type.simpleArray?e.getValue("arrayItemType"):r,o=e.getValue("showOnlyNameType"),i=null;if(null!==e.getPanelItem()&&e.getPanelItem().getParent().getData()instanceof we&&(i=e.getPanelItem().getParent().getData()),null===t&&(l=e.getValue("editable"),document.getElementById("rbro_parameter_name").disabled=!l,document.getElementById("rbro_parameter_type").disabled=!l,document.getElementById("rbro_parameter_eval").disabled=!l,document.getElementById("rbro_parameter_nullable").disabled=!l,document.getElementById("rbro_parameter_pattern").disabled=!l,document.getElementById("rbro_parameter_expression").disabled=!l,l?(document.querySelector("#rbro_parameter_name_row label").classList.remove("rbroDisabled"),document.querySelector("#rbro_parameter_type_row label").classList.remove("rbroDisabled"),document.querySelector("#rbro_parameter_eval_row label").classList.remove("rbroDisabled"),document.querySelector("#rbro_parameter_nullable_row label").classList.remove("rbroDisabled"),document.querySelector("#rbro_parameter_pattern_row label").classList.remove("rbroDisabled"),document.querySelector("#rbro_parameter_expression_row label").classList.remove("rbroDisabled")):(document.querySelector("#rbro_parameter_name_row label").classList.add("rbroDisabled"),document.querySelector("#rbro_parameter_type_row label").classList.add("rbroDisabled"),document.querySelector("#rbro_parameter_eval_row label").classList.add("rbroDisabled"),document.querySelector("#rbro_parameter_nullable_row label").classList.add("rbroDisabled"),document.querySelector("#rbro_parameter_pattern_row label").classList.add("rbroDisabled"),document.querySelector("#rbro_parameter_expression_row label").classList.add("rbroDisabled"))),null!==t&&"type"!==t||(r===we.type.simpleArray?document.getElementById("rbro_parameter_array_item_type_row").removeAttribute("style"):document.getElementById("rbro_parameter_array_item_type_row").style.display="none",r===we.type.string||r===we.type.number||r===we.type.boolean||r===we.type.date||r===we.type.array||r===we.type.simpleArray||r===we.type.map?document.getElementById("rbro_parameter_nullable_row").removeAttribute("style"):document.getElementById("rbro_parameter_nullable_row").style.display="none"),null!==t&&"type"!==t&&"arrayItemType"!==t||(n!==we.type.number&&n!==we.type.date&&n!==we.type.sum&&n!==we.type.average||o?document.getElementById("rbro_parameter_pattern_row").style.display="none":document.getElementById("rbro_parameter_pattern_row").removeAttribute("style")),null!==t&&"type"!==t&&"eval"!==t||(r===we.type.sum||r===we.type.average||o?(document.getElementById("rbro_parameter_eval_row").style.display="none",document.getElementById("rbro_parameter_test_data_row").style.display="none",document.getElementById("rbro_parameter_edit_test_data_row").style.display="none"):(r===we.type.image||r===we.type.array||r===we.type.simpleArray||r===we.type.map?document.getElementById("rbro_parameter_eval_row").style.display="none":document.getElementById("rbro_parameter_eval_row").removeAttribute("style"),null!==i||e.getValue("eval")&&(r===we.type.string||r===we.type.number||r===we.type.boolean||r===we.type.date)?document.getElementById("rbro_parameter_test_data_container").style.display="none":document.getElementById("rbro_parameter_test_data_container").removeAttribute("style"),r===we.type.array||r===we.type.simpleArray||r===we.type.map?document.getElementById("rbro_parameter_edit_test_data_row").removeAttribute("style"):document.getElementById("rbro_parameter_edit_test_data_row").style.display="none",r===we.type.string||r===we.type.number||r===we.type.date?document.getElementById("rbro_parameter_test_data_row").removeAttribute("style"):document.getElementById("rbro_parameter_test_data_row").style.display="none",r===we.type.boolean?document.getElementById("rbro_parameter_test_data_boolean_row").removeAttribute("style"):document.getElementById("rbro_parameter_test_data_boolean_row").style.display="none",r===we.type.image?document.getElementById("rbro_parameter_test_data_image_row").removeAttribute("style"):document.getElementById("rbro_parameter_test_data_image_row").style.display="none"),this.rb.getProperty("showPlusFeaturesInfo")&&(null===i||r!==we.type.map&&r!==we.type.array?document.getElementById("rbro_parameter_type_nested_plus_info").style.display="none":document.getElementById("rbro_parameter_type_nested_plus_info").removeAttribute("style")),(!e.getValue("eval")||r!==we.type.string&&r!==we.type.number&&r!==we.type.boolean&&r!==we.type.date)&&r!==we.type.sum&&r!==we.type.average||o?document.getElementById("rbro_parameter_expression_row").style.display="none":document.getElementById("rbro_parameter_expression_row").removeAttribute("style")),null===t){var a=[],l=null!==i&&i.getValue("type")===we.type.array,s=(a.push({value:"string",label:this.rb.getLabel("parameterTypeString")}),a.push({value:"number",label:this.rb.getLabel("parameterTypeNumber")}),a.push({value:"boolean",label:this.rb.getLabel("parameterTypeBoolean")}),a.push({value:"date",label:this.rb.getLabel("parameterTypeDate")}),a.push({value:"image",label:this.rb.getLabel("parameterTypeImage")}),null!==i&&!this.rb.getProperty("showPlusFeatures")||a.push({value:"array",label:this.rb.getLabel("parameterTypeArray")}),a.push({value:"simple_array",label:this.rb.getLabel("parameterTypeSimpleArray")}),null!==i&&!this.rb.getProperty("showPlusFeatures")||a.push({value:"map",label:this.rb.getLabel("parameterTypeMap")}),l||(a.push({value:"sum",label:this.rb.getLabel("parameterTypeSum")}),a.push({value:"average",label:this.rb.getLabel("parameterTypeAverage")})),!1);if(a.length!==this.parameterTypeOptions.length)s=!0;else for(var c=0;c<a.length;c++)if(a[c].value!==this.parameterTypeOptions[c].value){s=!0;break}if(s){var u=document.getElementById("rbro_parameter_type");m(u);for(var d=0;d<a.length;d++){var p=a[d];u.append(ge("option",{value:p.value},p.label))}this.parameterTypeOptions=a}}}},{key:"updateDisplay",value:function(e){var t,r=this.rb.getSelectedObject();if(null!==r&&r instanceof we){for(var n in this.updateVisibileRows(r,e),this.propertyDescriptors)!this.propertyDescriptors.hasOwnProperty(n)||null!==e&&n!==e||(t=this.propertyDescriptors[n],n=r.getValue(n),R(B(i.prototype),"setValue",this).call(this,t,n,!1));null!==e&&"type"!==e||(r.getValue("type")===we.type.date?document.getElementById("rbro_parameter_test_data").setAttribute("placeholder",this.rb.getLabel("parameterTestDataDatePattern")):document.getElementById("rbro_parameter_test_data").setAttribute("placeholder","")),i.updateAutosizeInputs(e)}}}],[{key:"updateAutosizeInputs",value:function(e){null!==e&&"expression"!==e||Ee.update(document.getElementById("rbro_parameter_expression"))}}]),i}();function pt(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return ht(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ht(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e(gt,[{key:"getHeaderItem",value:function(){return this.headerItem}},{key:"getDocumentItem",value:function(){return this.documentItem}},{key:"getFooterItem",value:function(){return this.footerItem}},{key:"getParametersItem",value:function(){return this.parametersItem}},{key:"getStylesItem",value:function(){return this.stylesItem}},{key:"getContainerByItem",value:function(e){for(;null!==e;){if(e.getData()instanceof s)return e.getData();e=e.getParent()}return null}},{key:"getDocumentPropertiesItem",value:function(){return this.documentPropertiesItem}},{key:"render",value:function(){var t=this,e=document.getElementById("rbro_main_panel_list");this.appendChildren(e,this.items),document.getElementById("rbro_main_panel_sizer").addEventListener("mousedown",function(e){t.dragMainPanelSizer=!0,t.dragMainPanelSizerStartX=e.pageX}),this.updateMainPanelWidth(this.mainPanelWidth)}},{key:"appendChildren",value:function(e,t){var r,n=pt(t);try{for(n.s();!(r=n.n()).done;){var o=r.value,i=(e.append(o.getElement()),o.getChildren());0<i.length&&this.appendChildren(e,i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"processMouseMove",value:function(e){return!!this.dragMainPanelSizer&&(e=this.mainPanelWidth+(e.pageX-this.dragMainPanelSizerStartX),e=this.checkMainPanelWidth(e),this.updateMainPanelWidth(e),!0)}},{key:"mouseUp",value:function(e){this.dragMainPanelSizer&&(this.dragMainPanelSizer=!1,this.mainPanelWidth=this.mainPanelWidth+(e.pageX-this.dragMainPanelSizerStartX),this.mainPanelWidth=this.checkMainPanelWidth(this.mainPanelWidth),this.updateMainPanelWidth(this.mainPanelWidth))}},{key:"getTotalPanelWidth",value:function(){var e=this.mainPanelWidth+this.mainPanelSizerWidth+390;return this.rb.getProperty("menuSidebar")&&(e+=92),e}},{key:"updateMainPanelWidth",value:function(e){document.getElementById("rbro_main_panel").style.width=e+"px",document.getElementById("rbro_main_panel_sizer").style.left=e+"px",document.getElementById("rbro_detail_panel").style.left=e+this.mainPanelSizerWidth+"px";var t=e+this.mainPanelSizerWidth+390;this.rb.getProperty("menuSidebar")&&(t+=92,document.getElementById("reportbro").querySelector(".rbroLogo").style.width=e+"px"),document.getElementById("rbro_document_panel").style.width="calc(100% - ".concat(t,"px)")}},{key:"checkMainPanelWidth",value:function(e){return e<150?150:500<e?500:e}},{key:"showHeader",value:function(){this.headerItem.show()}},{key:"hideHeader",value:function(){this.headerItem.hide()}},{key:"showFooter",value:function(){this.footerItem.show()}},{key:"hideFooter",value:function(){this.footerItem.hide()}},{key:"clearAll",value:function(){var e,t=pt(this.items);try{for(t.s();!(e=t.n()).done;)e.value.clear()}catch(e){t.e(e)}finally{t.f()}}}]);var ft=gt,yt=(e(mt,[{key:"render",value:function(){var n=this,e=this.rb.getProperty("menuShowButtonLabels")?"":"rbroHidden",t=document.getElementById("rbro_menu_panel"),r=ge("div",{class:"rbroToolButtonContainer"});(o=ge("button",{id:"rbro_menu_save",class:"rbroButton rbroMenuButton",title:this.rb.getLabel("menuSaveTip")})).append(ge("span",{class:"rbroIcon-save"})),o.append(ge("span",{class:e},this.rb.getLabel("menuSave"))),o.addEventListener("click",function(e){n.rb.save()}),this.rb.getProperty("saveCallback")||this.rb.getProperty("localStorageReportKey")||(o.style.display="none"),r.append(o),this.rb.getProperty("menuShowDebug")&&((o=ge("button",{id:"rbro_menu_log_report",class:"rbroButton rbroMenuButton",title:this.rb.getLabel("menuLogReportTip")})).append(ge("span",{class:"rbroIcon-console"})),o.append(ge("span",{class:"rbroHidden"},this.rb.getLabel("menuLogReport"))),o.addEventListener("click",function(e){console.log(JSON.stringify(n.rb.getReport()))}),r.append(o),(o=ge("button",{id:"rbro_menu_insert_report",class:"rbroButton rbroMenuButton",title:this.rb.getLabel("menuInsertReportTip")})).append(ge("span",{class:"rbroIcon-insert-report"})),o.append(ge("span",{class:"rbroHidden"},this.rb.getLabel("menuInsertReport"))),o.addEventListener("click",function(e){var t=prompt("Paste report template here to load report");if(t)try{var r=JSON.parse(t);"object"===k(r.docElements)&&"object"===k(r.parameters)&&"object"===k(r.styles)&&"object"===k(r.documentProperties)?(n.rb.load(r),n.rb.setModified(!0)):alert("Invalid report template data")}catch(e){alert("Invalid report template data")}}),r.append(o)),(o=ge("button",{id:"rbro_menu_undo",class:"rbroButton rbroMenuButton",title:this.rb.getLabel("menuUndoTip")})).append(ge("span",{class:"rbroIcon-undo"})),o.append(ge("span",{class:e},this.rb.getLabel("menuUndo"))),o.addEventListener("click",function(e){n.rb.undoCommand()}),r.append(o),(o=ge("button",{id:"rbro_menu_redo",class:"rbroButton rbroMenuButton",title:this.rb.getLabel("menuRedoTip")})).append(ge("span",{class:"rbroIcon-redo"})),o.append(ge("span",{class:e},this.rb.getLabel("menuRedo"))),o.addEventListener("click",function(e){n.rb.redoCommand()}),r.append(o),(o=ge("button",{id:"rbro_menu_preview",class:"rbroButton rbroMenuButton",title:this.rb.getLabel("menuPreviewTip")})).append(ge("span",{class:"rbroIcon-play"})),o.append(ge("span",{class:e},this.rb.getLabel("menuPreview"))),o.addEventListener("click",function(e){n.rb.preview()}),r.append(o),t.append(r);var e=ge("div",{class:"rbroElementButtonContainer"}),o=ge("div",{id:"rbo_menu_elements",class:"rbroElementButtons"}),r=((r=ge("div",{id:"rbro_menu_element_text",class:"rbroButton rbroMenuButton",draggle:"true",title:this.rb.getLabel("docElementText")})).append(ge("span",{class:"rbroIcon-text"})),r.addEventListener("dragstart",function(e){e.dataTransfer.setData("text/plain",""),e.dataTransfer.effectAllowed="copy",n.rb.startBrowserDrag("docElement",Q.type.text,""),e.stopPropagation()}),r.addEventListener("touchstart",function(e){n.rb.startBrowserDrag("docElement",Q.type.text,""),e.preventDefault()}),r.addEventListener("touchmove",function(e){n.rb.getDocument().processDragover(e)}),r.addEventListener("touchend",function(e){n.rb.getDocument().processDrop(e)}),o.append(r),(r=ge("div",{id:"rbro_menu_element_line",class:"rbroButton rbroMenuButton",draggle:"true",title:this.rb.getLabel("docElementLine")})).append(ge("span",{class:"rbroIcon-line"})),r.addEventListener("dragstart",function(e){e.dataTransfer.setData("text/plain",""),e.dataTransfer.effectAllowed="copy",n.rb.startBrowserDrag("docElement",Q.type.line,""),e.stopPropagation()}),r.addEventListener("touchstart",function(e){n.rb.startBrowserDrag("docElement",Q.type.line,""),e.preventDefault()}),r.addEventListener("touchmove",function(e){n.rb.getDocument().processDragover(e)}),r.addEventListener("touchend",function(e){n.rb.getDocument().processDrop(e)}),o.append(r),(r=ge("div",{id:"rbro_menu_element_image",class:"rbroButton rbroMenuButton",draggle:"true",title:this.rb.getLabel("docElementImage")})).append(ge("span",{class:"rbroIcon-image"})),r.addEventListener("dragstart",function(e){e.dataTransfer.setData("text/plain",""),e.dataTransfer.effectAllowed="copy",n.rb.startBrowserDrag("docElement",Q.type.image,""),e.stopPropagation()}),r.addEventListener("touchstart",function(e){n.rb.startBrowserDrag("docElement",Q.type.image,""),e.preventDefault()}),r.addEventListener("touchmove",function(e){n.rb.getDocument().processDragover(e)}),r.addEventListener("touchend",function(e){n.rb.getDocument().processDrop(e)}),o.append(r),(r=ge("div",{id:"rbro_menu_element_bar_code",class:"rbroButton rbroMenuButton",draggle:"true",title:this.rb.getLabel("docElementBarCode")})).append(ge("span",{class:"rbroIcon-barcode"})),r.addEventListener("dragstart",function(e){e.dataTransfer.setData("text/plain",""),e.dataTransfer.effectAllowed="copy",n.rb.startBrowserDrag("docElement",Q.type.barCode,""),e.stopPropagation()}),r.addEventListener("touchstart",function(e){n.rb.startBrowserDrag("docElement",Q.type.barCode,""),e.preventDefault()}),r.addEventListener("touchmove",function(e){n.rb.getDocument().processDragover(e)}),r.addEventListener("touchend",function(e){n.rb.getDocument().processDrop(e)}),o.append(r),(r=ge("div",{id:"rbro_menu_element_table",class:"rbroButton rbroMenuButton",draggle:"true",title:this.rb.getLabel("docElementTable")})).append(ge("span",{class:"rbroIcon-table"})),r.addEventListener("dragstart",function(e){e.dataTransfer.setData("text/plain",""),e.dataTransfer.effectAllowed="copy",n.rb.startBrowserDrag("docElement",Q.type.table,""),e.stopPropagation()}),r.addEventListener("touchstart",function(e){n.rb.startBrowserDrag("docElement",Q.type.table,""),e.preventDefault()}),r.addEventListener("touchmove",function(e){n.rb.getDocument().processDragover(e)}),r.addEventListener("touchend",function(e){n.rb.getDocument().processDrop(e)}),o.append(r),(r=ge("div",{id:"rbro_menu_element_frame",class:"rbroButton rbroMenuButton",draggle:"true",title:this.rb.getLabel("docElementFrame")})).append(ge("span",{class:"rbroIcon-frame"})),r.addEventListener("dragstart",function(e){e.dataTransfer.setData("text/plain",""),e.dataTransfer.effectAllowed="copy",n.rb.startBrowserDrag("docElement",Q.type.frame,""),e.stopPropagation()}),r.addEventListener("touchstart",function(e){n.rb.startBrowserDrag("docElement",Q.type.frame,""),e.preventDefault()}),r.addEventListener("touchmove",function(e){n.rb.getDocument().processDragover(e)}),r.addEventListener("touchend",function(e){n.rb.getDocument().processDrop(e)}),o.append(r),(r=ge("div",{id:"rbro_menu_element_section",class:"rbroButton rbroMenuButton",draggle:"true",title:this.rb.getLabel("docElementSection")})).append(ge("span",{class:"rbroIcon-section"})),r.addEventListener("dragstart",function(e){e.dataTransfer.setData("text/plain",""),e.dataTransfer.effectAllowed="copy",n.rb.startBrowserDrag("docElement",Q.type.section,""),e.stopPropagation()}),r.addEventListener("touchstart",function(e){n.rb.startBrowserDrag("docElement",Q.type.section,""),e.preventDefault()}),r.addEventListener("touchmove",function(e){n.rb.getDocument().processDragover(e)}),r.addEventListener("touchend",function(e){n.rb.getDocument().processDrop(e)}),o.append(r),(r=ge("div",{id:"rbro_menu_element_page_break",class:"rbroButton rbroMenuButton",draggle:"true",title:this.rb.getLabel("docElementPageBreak")})).append(ge("span",{class:"rbroIcon-page-break"})),r.addEventListener("dragstart",function(e){e.dataTransfer.setData("text/plain",""),e.dataTransfer.effectAllowed="copy",n.rb.startBrowserDrag("docElement",Q.type.pageBreak,""),e.stopPropagation()}),r.addEventListener("touchstart",function(e){n.rb.startBrowserDrag("docElement",Q.type.pageBreak,""),e.preventDefault()}),r.addEventListener("touchmove",function(e){n.rb.getDocument().processDragover(e)}),r.addEventListener("touchend",function(e){n.rb.getDocument().processDrop(e)}),o.append(r),e.append(o),ge("div",{class:"rbroActionButtons"})),o=ge("div",{id:"rbro_menu_align",style:"display: none;"}),i=ge("button",{id:"rbro_menu_align_left",class:"rbroButton rbroActionButton rbroIcon-align-left",type:"button",title:this.rb.getLabel("menuAlignLeft")}),i=(i.addEventListener("click",function(e){n.rb.alignSelections(Y.alignment.left)}),o.append(i),ge("button",{id:"rbro_menu_align_center",class:"rbroButton rbroActionButton rbroIcon-align-center",type:"button",title:this.rb.getLabel("menuAlignCenter")})),i=(i.addEventListener("click",function(e){n.rb.alignSelections(Y.alignment.center)}),o.append(i),ge("button",{id:"rbro_menu_align_right",class:"rbroButton rbroActionButton rbroIcon-align-right",type:"button",title:this.rb.getLabel("menuAlignRight")})),i=(i.addEventListener("click",function(e){n.rb.alignSelections(Y.alignment.right)}),o.append(i),r.append(o),ge("div",{id:"rbro_menu_valign",style:"display: none;"})),o=ge("button",{id:"rbro_menu_align_top",class:"rbroButton rbroActionButton rbroIcon-align-top",type:"button",title:this.rb.getLabel("menuAlignTop")}),o=(o.addEventListener("click",function(e){n.rb.alignSelections(Y.alignment.top)}),i.append(o),ge("button",{id:"rbro_menu_align_middle",class:"rbroButton rbroActionButton rbroIcon-align-middle",type:"button",title:this.rb.getLabel("menuAlignMiddle")})),o=(o.addEventListener("click",function(e){n.rb.alignSelections(Y.alignment.middle)}),i.append(o),ge("button",{id:"rbro_menu_align_bottom",class:"rbroButton rbroActionButton rbroIcon-align-bottom",type:"button",title:this.rb.getLabel("menuAlignBottom")})),o=(o.addEventListener("click",function(e){n.rb.alignSelections(Y.alignment.bottom)}),i.append(o),r.append(i),ge("div",{id:"rbro_menu_column_actions",style:"display: none;"})),i=ge("button",{id:"rbro_menu_column_add_left",class:"rbroButton rbroActionButton rbroIcon-column-add-left",type:"button",title:this.rb.getLabel("menuColumnAddLeft")}),i=(i.addEventListener("click",function(e){var t=n.rb.getSelectedObject();t instanceof ee&&t.insertColumn(!0)}),o.append(i),ge("button",{id:"rbro_menu_column_add_right",class:"rbroButton rbroActionButton rbroIcon-column-add-right",type:"button",title:this.rb.getLabel("menuColumnAddRight")})),i=(i.addEventListener("click",function(e){var t=n.rb.getSelectedObject();t instanceof ee&&t.insertColumn(!1)}),o.append(i),ge("button",{id:"rbro_menu_column_delete",class:"rbroButton rbroActionButton rbroIcon-column-delete",type:"button",title:this.rb.getLabel("menuColumnDelete")})),i=(i.addEventListener("click",function(e){var t=n.rb.getSelectedObject();t instanceof ee&&t.deleteColumn()}),o.append(i),r.append(o),ge("div",{id:"rbro_menu_row_actions",style:"display: none;"})),o=ge("button",{id:"rbro_menu_row_add_above",class:"rbroButton rbroActionButton rbroIcon-row-add-above",type:"button",title:this.rb.getLabel("menuRowAddAbove")}),o=(o.addEventListener("click",function(e){var t=n.rb.getSelectedObject();t instanceof ee&&null!==t.getParent()&&t.getParent().insertRow(!0)}),i.append(o),ge("button",{id:"rbro_menu_row_add_below",class:"rbroButton rbroActionButton rbroIcon-row-add-below",type:"button",title:this.rb.getLabel("menuRowAddBelow")})),o=(o.addEventListener("click",function(e){var t=n.rb.getSelectedObject();t instanceof ee&&null!==t.getParent()&&t.getParent().insertRow(!1)}),i.append(o),ge("button",{id:"rbro_menu_row_delete",class:"rbroButton rbroActionButton rbroIcon-row-delete",type:"button",title:this.rb.getLabel("menuRowDelete")})),o=(o.addEventListener("click",function(e){var t=n.rb.getSelectedObject();t instanceof ee&&null!==t.getParent()&&t.getParent().deleteRow()}),i.append(o),r.append(i),ge("div",{id:"rbro_menu_zoom",class:"rbroZoom"})),i=(o.append(ge("span",{id:"rbro_menu_zoom_level",class:"rbroZoomLevel"})),ge("button",{id:"rbro_menu_zoom_in",class:"rbroButton rbroRoundButton rbroZoomButton rbroIcon-plus"+(this.rb.getDocument().isZoomInPossible()?"":" rbroButtonInactive"),type:"button",title:this.rb.getLabel("menuZoomIn")})),i=(i.addEventListener("click",function(e){n.rb.getDocument().zoomIn()}),o.append(i),ge("button",{id:"rbro_menu_zoom_out",class:"rbroButton rbroRoundButton rbroZoomButton rbroIcon-minus"+(this.rb.getDocument().isZoomOutPossible()?"":" rbroButtonInactive"),type:"button",title:this.rb.getLabel("menuZoomOut")})),a=(i.addEventListener("click",function(e){n.rb.getDocument().zoomOut()}),o.append(i),r.append(o),ge("button",{id:"rbro_menu_toggle_grid",class:"rbroButton rbroGridButton rbroActionButton rbroIcon-grid"+(this.rb.getProperty("showGrid")?" rbroButtonActive":""),type:"button",title:this.rb.getLabel("menuToggleGrid")}));a.addEventListener("click",function(e){a.classList.toggle("rbroButtonActive"),n.rb.getDocument().toggleGrid()}),r.append(a),e.append(r),t.append(e)}},{key:"updateZoomButtons",value:function(e,t){e?document.getElementById("rbro_menu_zoom_in").removeAttribute("disabled"):document.getElementById("rbro_menu_zoom_in").setAttribute("disabled","disabled"),t?document.getElementById("rbro_menu_zoom_out").removeAttribute("disabled"):document.getElementById("rbro_menu_zoom_out").setAttribute("disabled","disabled")}}]),mt);function mt(e,t){u(this,mt),this.rootElement=e,this.rb=t}function gt(e,t,r,n,o,i,a){u(this,gt),this.rootElement=e,this.rb=a,this.headerItem=new v("band",null,t,{hasChildren:!0,showAdd:!1,showDelete:!1,hasDetails:!1,visible:this.rb.getDocumentProperties().getValue("header")},a),this.documentItem=new v("band",null,r,{hasChildren:!0,showAdd:!1,showDelete:!1,hasDetails:!1},a),this.footerItem=new v("band",null,n,{hasChildren:!0,showAdd:!1,showDelete:!1,hasDetails:!1,visible:this.rb.getDocumentProperties().getValue("footer")},a),this.parametersItem=new v("parameter",null,o,{hasChildren:!0,showAdd:a.getProperty("adminMode"),showDelete:!1,hasDetails:!1},a),this.stylesItem=new v("style",null,i,{hasChildren:!0,showAdd:!0,showDelete:!1,hasDetails:!1},a),this.documentPropertiesItem=new v("documentProperties",null,a.getDocumentProperties(),{showDelete:!1,hasDetails:!0},a),this.items=[this.headerItem,this.documentItem,this.footerItem,this.parametersItem,this.stylesItem,this.documentPropertiesItem],this.dragMainPanelSizer=!1,this.dragMainPanelSizerStartX=0,this.mainPanelWidth=230,this.mainPanelSizerWidth=3,t.setPanelItem(this.headerItem),r.setPanelItem(this.documentItem),n.setPanelItem(this.footerItem),o.setPanelItem(this.parametersItem),i.setPanelItem(this.stylesItem)}function re(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e){if(e){if("string"==typeof e)return bt(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?bt(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e(vt,[{key:"validateProperties",value:function(e){if(!Array.isArray(e.colors))return console.error('"colors" property must be an array'),!1;var t,r=!1,n=re(e.colors);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(!o||!Se(o))return console.error('"colors" property contains invalid color value'),!1;"#000000"===o&&(r=!0)}}catch(e){n.e(e)}finally{n.f()}if(!r)return console.error('"colors" property is missing black color "#000000"'),!1;if(!Array.isArray(e.fontSizes))return console.error('"fontSizes" property must be an array'),!1;var i,a=re(e.fontSizes);try{for(a.s();!(i=a.n()).done;){var l=i.value;if("number"!=typeof l||l<1)return console.error('"fontSizes" property must contain only numbers (> 0)'),!1}}catch(e){a.e(e)}finally{a.f()}return!0}},{key:"addDefaultParameters",value:function(){for(var e=0,t=[{name:"page_count",type:we.type.number,eval:!1,editable:!1,showOnlyNameType:!0},{name:"page_number",type:we.type.number,eval:!1,editable:!1,showOnlyNameType:!0}];e<t.length;e++){var r=t[e],r=new we(this.getUniqueId(),r,this),n=this.mainPanel.getParametersItem(),o=new v("parameter",n,r,{hasChildren:!0,showAdd:!0,showDelete:!0,draggable:!1},this);r.setPanelItem(o),n.appendChild(o),r.setup(),this.addParameter(r)}}},{key:"render",value:function(){var e,t=this,r=(m(this.element),this.getProperty("menuSidebar")&&this.element.classList.add("rbroMenuPanelSidebar"),"classic"===this.getProperty("theme")?document.body.classList.add("rbroClassicTheme"):document.body.classList.add("rbroDefaultTheme"),this.element.append(ge("div",{class:"rbroLogo"})),this.element.append(ge("div",{id:"rbro_menu_panel",class:"rbroMenuPanel"})),ge("div",{class:"rbroContainer"})),n=ge("div",{id:"rbro_main_panel",class:"rbroMainPanel"});for(e in n.append(ge("ul",{id:"rbro_main_panel_list"})),r.append(n),r.append(ge("div",{id:"rbro_main_panel_sizer",class:"rbroMainPanelSizer"})),r.append(ge("div",{id:"rbro_detail_panel",class:"rbroDetailPanel"})),r.append(ge("div",{id:"rbro_document_panel",class:"rbroDocumentPanel"})),this.element.append(r),this.mainPanel.render(),this.menuPanel.render(),this.detailPanels)this.detailPanels[e].render();this.detailPanels[this.activeDetailPanel].show(),this.document.render(),this.popupWindow.render(),this.updateMenuButtons(),this.mouseupEventListener=function(e){t.mainPanel.mouseUp(e),t.document.mouseUp(e),t.popupWindow.hide()},document.addEventListener("mouseup",this.mouseupEventListener),window.addEventListener("resize",function(e){t.document.windowResized()}),this.element.addEventListener("dragstart",function(e){e.preventDefault()}),this.element.addEventListener("mousemove",function(e){t.mainPanel.processMouseMove(e)||t.document.processMouseMove(e)})}},{key:"getWidth",value:function(){return this.element.clientWidth}},{key:"setup",value:function(){this.addDefaultParameters(),this.headerBand.setup(),this.contentBand.setup(),this.footerBand.setup(),this.documentProperties.setup()}},{key:"initObjectMap",value:function(){this.addDataObject(this.headerBand),this.addDataObject(this.contentBand),this.addDataObject(this.footerBand),this.addDataObject(this.parameterContainer),this.addDataObject(this.styleContainer),this.addDataObject(this.documentProperties)}},{key:"getLabel",value:function(e){return e in this.locale?this.locale[e]:e}},{key:"getProperty",value:function(e){return this.properties[e]}},{key:"getMainPanel",value:function(){return this.mainPanel}},{key:"getMenuPanel",value:function(){return this.menuPanel}},{key:"getDocument",value:function(){return this.document}},{key:"getPopupWindow",value:function(){return this.popupWindow}},{key:"getFonts",value:function(){return this.properties.fonts}},{key:"getPatterns",value:function(){var e=[];if(0<this.properties.patternNumbers.length){e.push({separator:!0,name:this.getLabel("patternSeparatorNumbers")});var t,r=re(this.properties.patternNumbers);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n)}}catch(e){r.e(e)}finally{r.f()}}if(0<this.properties.patternDates.length){e.push({separator:!0,name:this.getLabel("patternSeparatorDates")});var o,i=re(this.properties.patternDates);try{for(i.s();!(o=i.n()).done;){var a=o.value;e.push(a)}}catch(e){i.e(e)}finally{i.f()}}return e}},{key:"getParameterItems",value:function(e,t){var r=[],n=this.getMainPanel().getParametersItem().getChildren(),o=0;if(e instanceof Q){var i,a=re(e.getAllDataSources());try{for(a.s();!(i=a.n()).done;){var l=i.value;if(0<l.parameters.length){r.push({separator:!0,separatorClass:"rbroParameterDataSourceGroup",id:"ds"+o,name:this.getLabel("parametersDataSource")}),o++;var s,c=[],u=re(l.parameters);try{for(u.s();!(s=u.n()).done;){var d=s.value;d.type===we.type.map?d.appendParameterItems(c,t):d.appendParameterItems(r,t)}}catch(e){u.e(e)}finally{u.f()}for(var p=0,h=c;p<h.length;p++){var f=h[p];r.push(f)}}}}catch(e){a.e(e)}finally{a.f()}}else e instanceof we&&e.appendFieldParameterItems(r,t,!0);r.push({separator:!0,name:this.getLabel("parameters")});var y,m=[],g=re(n);try{for(g.s();!(y=g.n()).done;){var b=y.value.getData();b.getValue("type")===we.type.map?b.appendParameterItems(m,t):b.appendParameterItems(r,t)}}catch(e){g.e(e)}finally{g.f()}return r.concat(m)}},{key:"getArrayFieldParameterItems",value:function(e){var t=[],r=this.getMainPanel().getParametersItem().getChildren();t.push({separator:!0,name:this.getLabel("parameters")});var n,o=re(r);try{for(o.s();!(n=o.n()).done;){var i=n.value.getData();i.getValue("type")===we.type.array&&i.appendFieldParameterItems(t,e,!1)}}catch(e){o.e(e)}finally{o.f()}return t}},{key:"appendContainerDocElements",value:function(e,t,r){var n,o=re(e.getPanelItem().getChildren());try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i.getData()instanceof Q){var a,l=i.getData(),s=(t?(r.push(l),l.addChildren(r)):r.push(l.toJS()),[]);l instanceof he?s=l.getLinkedContainers():null!==(a=l.getLinkedContainer())&&s.push(a);var c,u=re(s);try{for(u.s();!(c=u.n()).done;){var d=c.value;this.appendContainerDocElements(d,t,r)}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){o.e(e)}finally{o.f()}}},{key:"getDocElements",value:function(e){var t=[];return this.appendContainerDocElements(this.headerBand,e,t),this.appendContainerDocElements(this.contentBand,e,t),this.appendContainerDocElements(this.footerBand,e,t),t}},{key:"setDetailPanel",value:function(e){e!==this.activeDetailPanel&&(this.detailPanels[this.activeDetailPanel].hide(),this.activeDetailPanel=e,this.detailPanels[e].show())}},{key:"notifyEvent",value:function(e,t,r){this.detailPanels[this.activeDetailPanel].notifyEvent(e,t,r)}},{key:"addParameter",value:function(e){this.addDataObject(e)}},{key:"addStyle",value:function(e){this.addDataObject(e),this.notifyEvent(e,p.operation.add)}},{key:"getStyles",value:function(){var e,t=[],r=re(this.getMainPanel().getStylesItem().getChildren());try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n.getData())}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"getParameters",value:function(){var e,t=[],r=re(this.getMainPanel().getParametersItem().getChildren());try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n.getData())}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"addDocElement",value:function(e){this.docElements.push(e),this.addDataObject(e)}},{key:"deleteDocElements",value:function(){for(var e=0;e<this.docElements.length;e++)this.deleteDataObject(this.docElements[e]);this.docElements=[]}},{key:"getDocumentProperties",value:function(){return this.documentProperties}},{key:"executeCommand",value:function(e){var t;e.do(),this.lastCommandIndex<this.commandStack.length-1&&(this.commandStack=this.commandStack.slice(0,this.lastCommandIndex+1)),!this.selectionSinceLastCommand&&0<this.commandStack.length&&(t=this.commandStack[this.commandStack.length-1],e.allowReplace(t)&&(e.replace(t),this.commandStack=this.commandStack.slice(0,this.commandStack.length-1),this.lastCommandIndex--)),this.commandStack.push(e),this.lastCommandIndex++,this.modified=!0,this.selectionSinceLastCommand=!1,this.updateMenuButtons(),this.properties.cmdExecutedCallback&&this.properties.cmdExecutedCallback(e,!0)}},{key:"undoCommand",value:function(){var e;0<=this.lastCommandIndex&&((e=this.commandStack[this.lastCommandIndex]).undo(),this.lastCommandIndex--,this.modified=0<=this.lastCommandIndex,this.updateMenuButtons(),this.properties.cmdExecutedCallback&&this.properties.cmdExecutedCallback(e,!1))}},{key:"redoCommand",value:function(){var e;this.lastCommandIndex<this.commandStack.length-1&&(this.lastCommandIndex++,(e=this.commandStack[this.lastCommandIndex]).do(),this.modified=!0,this.updateMenuButtons(),this.properties.cmdExecutedCallback&&this.properties.cmdExecutedCallback(e,!1))}},{key:"updateMenuButtons",value:function(){document.getElementById("rbro_menu_save").disabled=!this.modified,document.getElementById("rbro_menu_undo").disabled=this.lastCommandIndex<0,document.getElementById("rbro_menu_redo").disabled=this.lastCommandIndex>=this.commandStack.length-1}},{key:"updateMenuActionButtons",value:function(){var e,t=0,r={x:0,y:0},n=!0,o=!0,i=re(this.selections);try{for(i.s();!(e=i.n()).done;){var a,l=e.value,s=this.getDataObject(l);s instanceof Q&&s.hasProperty("x")&&(t++,a=s.getContainer().getOffset(),1===t?r=a:(a.x!==r.x&&(n=!1),a.y!==r.y&&(o=!1)))}}catch(e){i.e(e)}finally{i.f()}var c=document.getElementById("rbo_menu_elements").querySelectorAll(".rbroMenuButton");if(1<t){n?document.getElementById("rbro_menu_align").removeAttribute("style"):document.getElementById("rbro_menu_align").style.display="none",o?document.getElementById("rbro_menu_valign").removeAttribute("style"):document.getElementById("rbro_menu_valign").style.display="none";var u,d=re(c);try{for(d.s();!(u=d.n()).done;)u.value.style.display="none"}catch(e){d.e(e)}finally{d.f()}document.getElementById("rbro_menu_column_actions").style.display="none",document.getElementById("rbro_menu_row_actions").style.display="none"}else{var p=null;if(1===this.selections.length&&(p=this.getDataObject(this.selections[0])),document.getElementById("rbro_menu_align").style.display="none",document.getElementById("rbro_menu_valign").style.display="none",p instanceof ee){var h,f=re(c);try{for(f.s();!(h=f.n()).done;)h.value.style.display="none"}catch(e){f.e(e)}finally{f.f()}var y=p.getTable(),p=p.getParent();null!==y&&1!==ve(y.getValue("columns"))?document.getElementById("rbro_menu_column_delete").removeAttribute("style"):document.getElementById("rbro_menu_column_delete").style.display="none",document.getElementById("rbro_menu_column_actions").removeAttribute("style"),null!==y&&null!==p&&p.getValue("bandType")===b.bandType.content?(1!==ve(y.getValue("contentRows"))?document.getElementById("rbro_menu_row_delete").removeAttribute("style"):document.getElementById("rbro_menu_row_delete").style.display="none",document.getElementById("rbro_menu_row_actions").removeAttribute("style")):document.getElementById("rbro_menu_row_actions").style.display="none"}else{var m,g=re(c);try{for(g.s();!(m=g.n()).done;)m.value.removeAttribute("style")}catch(e){g.e(e)}finally{g.f()}document.getElementById("rbro_menu_column_actions").style.display="none",document.getElementById("rbro_menu_row_actions").style.display="none"}}}},{key:"debugCommandStack",value:function(){console.clear();for(var e=0;e<this.commandStack.length;e++)e>this.lastCommandIndex?console.log("( "+e+" "+this.commandStack[e].getName()+" )"):console.log(e+" "+this.commandStack[e].getName())}},{key:"addDataObject",value:function(e){this.objectMap[e.getId()]=e}},{key:"deleteDataObject",value:function(e){this.isSelectedObject(e.getId())&&this.deselectObject(e.getId()),e.getId()in this.objectMap&&(e.remove(),delete this.objectMap[e.getId()])}},{key:"getDataObject",value:function(e){return null!==e&&e in this.objectMap?this.objectMap[e]:null}},{key:"getSelectedObjects",value:function(){var e,t=[],r=re(this.selections);try{for(r.s();!(e=r.n()).done;){var n=e.value,o=this.getDataObject(n);null!==o&&t.push(o)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"getSelectedObject",value:function(){return 1===this.selections.length?this.getDataObject(this.selections[0]):null}},{key:"isSelectedObject",value:function(e){return-1!==this.selections.indexOf(e)}},{key:"isDocElementSelected",value:function(){var e,t=re(this.selections);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(this.getDataObject(r)instanceof Q)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"isTableElementSelected",value:function(e){var t,r=re(this.selections);try{for(r.s();!(t=r.n()).done;){var n=t.value,o=this.getDataObject(n);if(o instanceof ee&&o.getValue("tableId")===e)return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"selectObject",value:function(e,t){var r="none",n=this.getDataObject(e);if(t){if(null!==n&&1===this.selections.length&&this.selections[0]===e)return;this.deselectAll(!0)}null!==n&&(n instanceof Q?r="docElement":n instanceof we?r="parameter":n instanceof Y?r="style":n instanceof l&&(r="documentProperties"),this.selections.push(e),n.select(),null!==n.getPanelItem()&&(n.getPanelItem().openParentItems(),n.getPanelItem().setActive()),r!==this.activeDetailPanel&&this.setDetailPanel(r),this.detailPanels[this.activeDetailPanel].selectionChanged(),this.properties.selectCallback&&this.properties.selectCallback(n,!0)),this.selectionSinceLastCommand=!0,this.updateMenuActionButtons()}},{key:"deselectObject",value:function(e){this.deselectObjectInternal(e,!0),this.updateMenuActionButtons()}},{key:"deselectObjectInternal",value:function(e,t){var r=this.getDataObject(e);null!==r&&(r.deselect(),null!==r.getPanelItem()&&r.getPanelItem().setInactive()),t&&(-1!==(t=this.selections.indexOf(e))&&this.selections.splice(t,1),0<this.selections.length?this.detailPanels[this.activeDetailPanel].selectionChanged():this.setDetailPanel("none")),null!==r&&this.properties.selectCallback&&this.properties.selectCallback(r,!1)}},{key:"deselectAll",value:function(e){var t,r=re(this.selections);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.deselectObjectInternal(n,!1)}}catch(e){r.e(e)}finally{r.f()}this.selections=[],e&&this.setDetailPanel("none"),this.updateMenuActionButtons()}},{key:"getContainer",value:function(e,t,r,n){for(var o=null,i=-1,a=0;a<this.containers.length;a++){var l=this.containers[a];if(l.getLevel()>i&&l.isElementAllowed(r)&&l.isInside(e,t)){var s,c=!1,u=re(n);try{for(u.s();!(s=u.n()).done;){var d=s.value;if(l===d||l.isChildOf(d)){c=!0;break}}}catch(e){u.e(e)}finally{u.f()}c||(i=(o=l).getLevel())}}return o}},{key:"getContainers",value:function(){return this.containers}},{key:"addContainer",value:function(e){this.containers.push(e),this.addDataObject(e)}},{key:"deleteContainer",value:function(e){for(var t=0;t<this.containers.length;t++)if(this.containers[t].getId()===e.getId()){this.containers.splice(t,1);break}this.deleteDataObject(e)}},{key:"startBrowserDrag",value:function(e,t,r){this.browserDragType=e,this.browserDragId=r,this.getDocument().startBrowserDrag(t)}},{key:"isBrowserDragActive",value:function(e){return this.browserDragType===e}},{key:"getBrowserDragId",value:function(){return this.browserDragId}},{key:"updateSelectionDrag",value:function(e,t,r,n,o){var i;o&&(i=new _e(r===Q.dragType.element?"Update position":"Resize",this));var a,l=re(this.selections);try{for(l.s();!(a=l.n()).done;){var s=a.value,c=this.getDataObject(s);null===c||r===Q.dragType.element&&!c.isDraggingAllowed()||c.updateDrag(e,t,r,n,o?i:null)}}catch(e){l.e(e)}finally{l.f()}o&&!i.isEmpty()&&this.executeCommand(i)}},{key:"alignSelections",value:function(e){var t,r,n,o,i,a=Number.MAX_VALUE,l=Number.MIN_VALUE,s=Number.MAX_VALUE,c=Number.MIN_VALUE,u=0,d=re(this.selections);try{for(d.s();!(i=d.n()).done;){var p=i.value,h=this.getDataObject(p);h instanceof Q&&h.hasProperty("x")&&(u++,t=h.getValue("xVal"),r=h.getValue("yVal"),n=h.getValue("widthVal"),o=h.getValue("heightVal"),t<a&&(a=t),l<t+n&&(l=t+n),r<s&&(s=r),c<r+o&&(c=r+o))}}catch(e){d.e(e)}finally{d.f()}var f=a+(l-a)/2,y=s+(c-s)/2;if(1<u){var m,g=new _e("Align elements",this),b=re(this.selections);try{for(b.s();!(m=b.n()).done;){var v=m.value,_=this.getDataObject(v);if(_ instanceof Q&&!(_ instanceof ue))switch(e){case Y.alignment.left:var w=new me(_.getId(),"x",""+a,me.type.text,this);g.addCommand(w);break;case Y.alignment.center:var E=new me(_.getId(),"x",""+(f-_.getValue("widthVal")/2),me.type.text,this);g.addCommand(E);break;case Y.alignment.right:var I=new me(_.getId(),"x",""+(l-_.getValue("widthVal")),me.type.text,this);g.addCommand(I);break;case Y.alignment.top:var C=new me(_.getId(),"y",""+s,me.type.text,this);g.addCommand(C);break;case Y.alignment.middle:var x=new me(_.getId(),"y",""+(y-_.getValue("heightVal")/2),me.type.text,this);g.addCommand(x);break;case Y.alignment.bottom:var k=new me(_.getId(),"y",""+(c-_.getValue("heightVal")),me.type.text,this);g.addCommand(k)}}}catch(e){b.e(e)}finally{b.f()}this.executeCommand(g)}}},{key:"toPixel",value:function(e){return""===e||"string"==typeof e&&(e=parseFloat(e.replace(",",".")),isNaN(e))?"0px":e+"px"}},{key:"showLoading",value:function(){document.getElementById("rbro_loading_div")||document.body.append(ge("div",{id:"rbro_loading_div",class:"rbroLoadingIndicator"}))}},{key:"hideLoading",value:function(){var e=document.getElementById("rbro_loading_div");e&&e.remove()}},{key:"getTestData",value:function(){var e,t={},r=re(this.getParameters());try{for(r.s();!(e=r.n()).done;){var n,o=e.value;o.getValue("showOnlyNameType")||((n=o.getValue("type"))===we.type.array||n===we.type.simpleArray||n===we.type.map?t[o.getName()]=o.getTestData(!1):n===we.type.string||n===we.type.number||n===we.type.date?t[o.getName()]=o.getValue("testData"):n===we.type.boolean?t[o.getName()]=o.getValue("testDataBoolean"):n===we.type.image&&(t[o.getName()]=o.getValue("testDataImage")))}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"previewInternal",value:function(e,t){var r=this,n=this.getRequestParameters(),o=(this.clearErrors(),n.reportServerHeaders),i=(o["Content-Type"]="application/json",n.reportServerBasicAuth&&(o.Authorization="Basic "+btoa(n.reportServerBasicAuth.username+":"+n.reportServerBasicAuth.password)),this.showLoading(),new AbortController),a=setTimeout(function(){return i.abort()},n.reportServerTimeout);fetch(n.reportServerUrl,{signal:i.signal,method:"PUT",headers:o,body:JSON.stringify({report:this.getReport(),outputFormat:l.outputFormat.pdf,data:e,isTestData:t})}).then(function(e){if(e.ok)return e;throw Error(e.statusText)}).then(function(e){return e.text()}).then(function(e){if(clearTimeout(a),r.hideLoading(),"key:"===e.substring(0,4))r.reportKey=e.substring(4),r.getDocument().openPdfPreviewTab(n.reportServerUrl+"?key="+r.reportKey+"&outputFormat=pdf",o);else{r.reportKey=null;try{var t=JSON.parse(e);0<t.errors.length&&r.processErrors(t.errors,!1)}catch(e){alert("preview failed")}}}).catch(function(e){clearTimeout(a),r.hideLoading(),alert("preview failed")})}},{key:"getRequestParameters",value:function(){var e={reportServerUrl:this.properties.reportServerUrl,reportServerTimeout:this.properties.reportServerTimeout,reportServerUrlCrossDomain:this.properties.reportServerUrlCrossDomain,reportServerBasicAuth:this.properties.reportServerBasicAuth,reportServerHeaders:this.properties.reportServerHeaders};return this.properties.requestCallback&&this.properties.requestCallback(e),e}},{key:"setModified",value:function(e){this.modified=e,this.updateMenuButtons()}},{key:"isModified",value:function(){return this.modified}},{key:"getReport",value:function(){var e={docElements:[],parameters:[],styles:[],version:4};e.docElements=this.getDocElements(!1);var t,r=re(this.getParameters());try{for(r.s();!(t=r.n()).done;){var n=t.value;e.parameters.push(n.toJS())}}catch(e){r.e(e)}finally{r.f()}var o,i=re(this.getStyles());try{for(i.s();!(o=i.n()).done;){var a=o.value;e.styles.push(a.toJS())}}catch(e){i.e(e)}finally{i.f()}return e.documentProperties=this.documentProperties.toJS(),e}},{key:"save",value:function(){if(this.properties.saveCallback)this.properties.saveCallback();else if(this.properties.localStorageReportKey&&"localStorage"in window&&null!==window.localStorage)try{var e=this.getReport();window.localStorage.setItem(this.properties.localStorageReportKey,JSON.stringify(e)),this.modified=!1}catch(e){}if(this.getProperty("highlightUnusedParameters")){var t,r=re(this.getParameters());try{for(r.s();!(t=r.n()).done;){var n=t.value;n.editable&&n.setHighlightUnused(!1)}}catch(e){r.e(e)}finally{r.f()}}this.updateMenuButtons()}},{key:"load",value:function(e){var t,r=re(this.getParameters());try{for(r.s();!(t=r.n()).done;){var n=t.value;this.deleteDataObject(n)}}catch(e){r.e(e)}finally{r.f()}var o,i=re(this.getStyles());try{for(i.s();!(o=i.n()).done;){var R=o.value;this.deleteDataObject(R)}}catch(e){i.e(e)}finally{i.f()}if(this.deleteDocElements(),this.nextId=1,this.docElements=[],this.objectMap={},this.initObjectMap(),this.selections=[],this.getMainPanel().clearAll(),this.getMainPanel().getHeaderItem().close(),this.getMainPanel().getDocumentItem().close(),this.getMainPanel().getFooterItem().close(),this.getMainPanel().getParametersItem().close(),this.getMainPanel().getStylesItem().close(),e.version<2){var a,l=re(e.docElements);try{for(l.s();!(a=l.n()).done;){var s=a.value;s.elementType===Q.type.table&&(s.contentDataRows=[s.contentData],s.contentRows="1")}}catch(e){l.e(e)}finally{l.f()}}if(e.version<3){var c,u=re(e.docElements);try{for(u.s();!(c=u.n()).done;){var d=c.value;if(d.elementType===Q.type.table){for(var p=0,h=0;h<d.headerData.columnData.length;h++)p+=d.headerData.columnData[h].width;d.width=p}}}catch(e){u.e(e)}finally{u.f()}}if(e.version<4){var f,y=re(e.parameters);try{for(y.s();!(f=y.n()).done;){var m=f.value;if(m.type===we.type.map){var g,b={},v=re(m.children);try{for(v.s();!(g=v.n()).done;){var _=g.value;b[_.name]=_.testData,_.testData=""}}catch(e){v.e(e)}finally{v.f()}m.testData=JSON.stringify(b)}else m.type===we.type.boolean&&(m.testDataBoolean=Boolean(m.testData))}}catch(e){y.e(e)}finally{y.f()}}this.documentProperties.setInitialData(e.documentProperties),this.documentProperties.setup();var w,E=re(e.styles);try{for(E.s();!(w=E.n()).done;){var N=w.value;this.createStyle(N)}}catch(e){E.e(e)}finally{E.f()}var I,C=re(e.parameters);try{for(C.s();!(I=C.n()).done;){var M=I.value;this.createParameter(M)}}catch(e){C.e(e)}finally{C.f()}var x,k=re(e.docElements);try{for(k.s();!(x=k.n()).done;){var F=x.value;this.createDocElement(F)}}catch(e){k.e(e)}finally{k.f()}if(this.getProperty("highlightUnusedParameters")){var S,V=this.getDocElements(!0),O=re(this.getParameters());try{for(O.s();!(S=O.n()).done;){var P=S.value;if(P.editable){var A,D=new _e("Temp group"),L=re(V);try{for(L.s();!(A=L.n()).done;)A.value.addCommandsForChangedParameterName(P,P.getName(),D)}catch(e){L.e(e)}finally{L.f()}var T,j=re(this.getParameters());try{for(j.s();!(T=j.n()).done;){var B=T.value;B.getId()!==P.getId()&&B.addCommandsForChangedParameterName(P,P.getName(),D)}}catch(e){j.e(e)}finally{j.f()}D.isEmpty()&&P.setHighlightUnused(!0)}}}catch(e){O.e(e)}finally{O.f()}}this.browserDragType="",this.browserDragId="",this.commandStack=[],this.lastCommandIndex=-1,this.modified=!1,this.updateMenuButtons()}},{key:"loadLocalReport",value:function(){if(this.properties.localStorageReportKey&&"localStorage"in window&&null!==window.localStorage){var e=null;try{e=JSON.parse(window.localStorage[this.properties.localStorageReportKey])}catch(e){}null!==e&&this.load(e)}}},{key:"preview",value:function(){this.previewInternal(this.getTestData(),!0)}},{key:"previewWithData",value:function(e){this.previewInternal(e,!1)}},{key:"downloadSpreadsheet",value:function(){var e=this.getRequestParameters(),t=e.reportServerUrl+"?key="+this.reportKey+"&outputFormat=xlsx",r=e.reportServerHeaders;if(null!==this.reportKey)if(r&&0<Object.keys(r).length){var n,o=new XMLHttpRequest;for(n in o.responseType="blob",o.onreadystatechange=function(){var e;o.readyState===XMLHttpRequest.DONE&&(200===o.status?(e=URL.createObjectURL(o.response),window.open(e,"_blank")):alert("download failed"))},o.open("GET",t,!0),r)r.hasOwnProperty(n)&&o.setRequestHeader(n,r[n]);o.send()}else window.open(t,"_blank")}},{key:"processErrors",value:function(e,t){void 0!==t&&!t||this.clearErrors();var r,n=re(e);try{for(n.s();!(r=n.n()).done;){var o,i=r.value;i.object_id&&(document.getElementById("rbro_menu_item".concat(i.object_id)).classList.add("rbroError"),null!==(o=this.getDataObject(i.object_id))&&o.addError(i))}}catch(e){n.e(e)}finally{n.f()}0<e.length&&(this.deselectAll(!1),this.selectObject(e[0].object_id,!1),this.detailPanels[this.activeDetailPanel].scrollToFirstError())}},{key:"clearErrors",value:function(){var e,t=re(document.querySelectorAll(".rbroMenuItem"));try{for(t.s();!(e=t.n()).done;)e.value.classList.remove("rbroError")}catch(e){t.e(e)}finally{t.f()}var r,n=re(document.querySelectorAll(".rbroFormRow"));try{for(n.s();!(r=n.n()).done;)r.value.classList.remove("rbroError")}catch(e){n.e(e)}finally{n.f()}var o,i,a=re(document.querySelectorAll(".rbroErrorMessage"));try{for(a.s();!(o=a.n()).done;)o.value.textContent=""}catch(e){a.e(e)}finally{a.f()}for(i in this.objectMap)this.objectMap[i].clearErrors()}},{key:"destroy",value:function(){for(var e in this.popupWindow.destroy(),this.detailPanels)this.detailPanels[e].destroy();this.element.remove(),document.removeEventListener("keydown",this.keydownEventListener),document.removeEventListener("mouseup",this.mouseupEventListener)}},{key:"getUniqueId",value:function(){return this.nextId++}},{key:"getDocElementById",value:function(e){e=this.getDataObject(e);return e instanceof Q?e:null}},{key:"getParameterById",value:function(e){e=this.getDataObject(e);return e instanceof we?e:null}},{key:"getParameterByName",value:function(e){var t,r=re(this.getParameters());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.getValue("name")===e)return n}}catch(e){r.e(e)}finally{r.f()}return null}},{key:"getStyleById",value:function(e){e=this.getDataObject(e);return e instanceof Y?e:null}},{key:"createDocElement",value:function(e){var e=te.createElement(e.id,e,e.elementType,-1,!1,this),t=e.getMaxId();return t>=this.nextId&&(this.nextId=t+1),e}},{key:"createParameter",value:function(e){var e=new we(e.id,e,this),t=this.mainPanel.getParametersItem(),r=this.getProperty("adminMode"),n=new v("parameter",t,e,{hasChildren:!0,showAdd:r,showDelete:r,draggable:!0},this),t=(e.setPanelItem(n),t.appendChild(n),e.setup(),e.getValue("type")!==we.type.array&&e.getValue("type")!==we.type.map&&(r&&(document.getElementById("rbro_menu_item_add".concat(e.getId())).style.display="none"),document.getElementById("rbro_menu_item_children".concat(e.getId())).style.display="none",document.getElementById("rbro_menu_item_children_toggle".concat(e.getId())).style.display="none"),this.addParameter(e),e.getMaxId());return t>=this.nextId&&(this.nextId=t+1),e}},{key:"createStyle",value:function(e){var t=new Y(e.id,e,this),r=this.mainPanel.getStylesItem(),n=new v("style",r,t,{draggable:!0},this);return t.setPanelItem(n),r.appendChild(n),this.addStyle(t),e.id>=this.nextId&&(this.nextId=e.id+1),t}},{key:"deleteDocElement",value:function(e){for(var t=0;t<this.docElements.length;t++)if(this.docElements[t].getId()===e.getId()){this.docElements.splice(t,1),this.deleteDataObject(e),this.notifyEvent(e,p.operation.remove);break}}},{key:"deleteParameter",value:function(e){this.deleteDataObject(e),e.getPanelItem().getParent().removeChild(e.getPanelItem()),this.notifyEvent(e,p.operation.remove)}},{key:"deleteStyle",value:function(e){this.deleteDataObject(e),e.getPanelItem().getParent().removeChild(e.getPanelItem()),this.notifyEvent(e,p.operation.remove)}}]);$=vt;function vt(e,t){var J=this;if(u(this,vt),this.element=e,this.nextId=1,this.locale=Xe[t&&t.localeKey||"en_us"],this.properties={additionalFonts:[],adminMode:!0,cmdExecutedCallback:null,colors:["#000000","#444444","#666666","#999999","#cccccc","#eeeeee","#f3f3f3","#ffffff","#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#0000ff","#9900ff","#ff00ff","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79","#990000","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47","#660000","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"],defaultFont:Y.font.helvetica,enableSpreadsheet:!0,fontSizes:[4,5,6,7,8,9,10,11,12,13,14,15,16,18,20,22,24,26,28,32,36,40,44,48,54,60,66,72,80],fonts:[{name:"Courier",value:Y.font.courier},{name:"Helvetica",value:Y.font.helvetica},{name:"Times New Roman",value:Y.font.times}],highlightUnusedParameters:!1,localStorageReportKey:null,menuShowButtonLabels:!1,menuShowDebug:!1,menuSidebar:!1,patternAdditionalDates:[],patternAdditionalNumbers:[],patternCurrencySymbol:"$",patternDates:[{name:"d.M.yyyy",description:this.locale.patternDate1},{name:"d.M.yy, H:mm",description:this.locale.patternDate2},{name:"d/MMM/yyyy",description:this.locale.patternDate3},{name:"MM/dd/yyyy",description:this.locale.patternDate4}],patternLocale:"en",patternNumberGroupSymbol:"",patternNumbers:[{name:"#,##0",description:this.locale.patternNumber1},{name:"0.000",description:this.locale.patternNumber2},{name:"0.00##",description:this.locale.patternNumber3},{name:"#,##0.00",description:this.locale.patternNumber4},{name:"$ #,##0.00",description:this.locale.patternNumber5}],reportServerBasicAuth:null,reportServerHeaders:{},reportServerTimeout:2e4,reportServerUrl:"https://www.reportbro.com/report/run",reportServerUrlCrossDomain:!1,requestCallback:null,saveCallback:null,selectCallback:null,showGrid:!0,showPlusFeatures:!0,showPlusFeaturesInfo:!0,theme:""},t){for(var r in t)this.properties.hasOwnProperty(r)&&(this.properties[r]=t[r]);Object.assign(this.locale,t.locale||{})}0<this.properties.additionalFonts.length&&(this.properties.fonts=this.properties.fonts.concat(this.properties.additionalFonts));var n,o=!1,i=re(this.properties.fonts);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(this.properties.defaultFont===a.value){o=!0;break}}}catch(e){i.e(e)}finally{i.f()}if(o||(0<this.properties.fonts.length?this.properties.defaultFont=this.properties.fonts[0].value:this.properties.defaultFont=""),0<this.properties.patternAdditionalDates.length&&(this.properties.patternDates=this.properties.patternDates.concat(this.properties.patternAdditionalDates)),0<this.properties.patternAdditionalNumbers.length&&(this.properties.patternNumbers=this.properties.patternNumbers.concat(this.properties.patternAdditionalNumbers)),!this.validateProperties(this.properties))throw"Invalid properties for ReportBro instance, check console error log for further details";this.document=new Re(e,this.properties.showGrid,this),this.popupWindow=new Ie(e,this),this.docElements=[],this.headerBand=new b(b.bandType.header,!1,"","",this),this.contentBand=new b(b.bandType.content,!1,"","",this),this.footerBand=new b(b.bandType.footer,!1,"","",this),this.parameterContainer=new s("0_parameters",this.getLabel("parameters"),this),this.styleContainer=new s("0_styles",this.getLabel("styles"),this),this.documentProperties=new l(this),this.clipboardElements=[],this.mainPanel=new ft(e,this.headerBand,this.contentBand,this.footerBand,this.parameterContainer,this.styleContainer,this),this.menuPanel=new yt(e,this),this.activeDetailPanel="none",this.detailPanels={none:new lt(e,this),docElement:new it(e,this),parameter:new dt(e,this),style:new tt(e,this),documentProperties:new at(e,this)},this.commandStack=[],this.lastCommandIndex=-1,this.modified=!1,this.selectionSinceLastCommand=!1,this.objectMap={},this.containers=[this.headerBand,this.contentBand,this.footerBand],this.selections=[],this.reportKey=null,this.browserDragType="",this.browserDragId="",this.documentProperties.setPanelItem(this.mainPanel.getDocumentPropertiesItem()),this.initObjectMap(),this.keydownEventListener=function(e){if(!J.detailPanels[J.activeDetailPanel].isKeyEventDisabled())if(e.metaKey||e.ctrlKey)switch(e.which){case 67:if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)){var t,r,n,o=!1,i={},a=re(J.selections);try{for(a.s();!(n=a.n()).done;){var R=n.value,l=J.getDataObject(R);if((l instanceof Q&&!(l instanceof ee)||l instanceof we&&!l.showOnlyNameType||l instanceof Y)&&(o||(J.clipboardElements=[],o=!0),!(l.getId()in i)))if(i[l.getId()]=!0,t=l.toJS(),J.clipboardElements.push(t),l instanceof Q){if(t.baseClass="DocElement",l instanceof le){var s=[];l.appendContainerChildren(s);for(var c=0,u=s;c<u.length;c++){var d=u[c];if(d.getId()in i){for(r=0;r<J.clipboardElements.length;r++)if(d.getId()===J.clipboardElements[r].id){J.clipboardElements.splice(r,1);break}}else i[d.getId()]=!0;(t=d.toJS()).baseClass="DocElement",J.clipboardElements.push(t)}}}else l instanceof we?t.baseClass="Parameter":l instanceof Y&&(t.baseClass="Style")}}catch(e){a.e(e)}finally{a.f()}e.preventDefault()}break;case 86:if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)){var p,h=new _e("Paste from clipboard",J),f={},y=[],m=re(J.clipboardElements);try{for(m.s();!(p=m.n()).done;){var g,N=p.value,b=Object.assign({},N);b.id=J.getUniqueId(),y.push(b),"DocElement"===b.baseClass&&(b.linkedContainerId&&(g=J.getUniqueId(),f[b.linkedContainerId]=g,b.linkedContainerId=g),b.elementType===Q.type.table&&je.removeIds(b))}}catch(e){m.e(e)}finally{m.f()}for(var v=0,_=y;v<_.length;v++){var w,E,I,C,x=_[v];if("DocElement"===x.baseClass)x.containerId in f?x.containerId=f[x.containerId]:(w=0,null!==(I=J.getDataObject(x.containerId))&&(E=I.getOffset(),I=I.getContentSize(),(C=J.getDocument().getContentScrollPosY())>E.y&&C+x.height<E.y+I.height&&(w=C-E.y)),x.x=0,x.y=w),I=new te(!0,x.elementType,x,x.id,x.containerId,-1,J),h.addCommand(I);else if("Parameter"===x.baseClass||"Style"===x.baseClass){var M=J.getLabel("nameCopySuffix"),k=x.name+" (".concat(M,")"),S=("Parameter"===x.baseClass?J.parameterContainer:J.styleContainer).getPanelItem();if(null!==S&&S.getChildByName(k))for(var O=2;O<=99&&(k=x.name+" (".concat(M," ").concat(O,")"),null!==S.getChildByName(k));O++);x.name=k,"Parameter"===x.baseClass?(we.removeIds(x),I=new oe(!0,x,x.id,J.parameterContainer.getId(),-1,J),h.addCommand(I)):"Style"===x.baseClass&&(I=new ne(!0,x,x.id,J.styleContainer.getId(),-1,J),h.addCommand(I))}}if(!h.isEmpty()){J.executeCommand(h);var F,V=!0,P=re(y);try{for(P.s();!(F=P.n()).done;){var q=F.value;J.selectObject(q.id,V),V=!1}}catch(e){P.e(e)}finally{P.f()}}e.preventDefault()}break;case 89:J.redoCommand(),e.preventDefault();break;case 90:J.undoCommand(),e.preventDefault()}else if(27===e.which)J.popupWindow.hide();else if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.which){case 8:case 46:var z,A=new _e("Delete",J),D=re(J.selections);try{for(D.s();!(z=D.n()).done;){var H=z.value,U=J.getDataObject(H);U instanceof Q&&U.addCommandsForDelete(A)}}catch(e){D.e(e)}finally{D.f()}A.isEmpty()||J.executeCommand(A),e.preventDefault();break;case 37:case 38:case 39:case 40:var W,L=new _e("Move element",J),G=37===e.which||39===e.which?"x":"y",T=(J.getDocumentProperties().getContentSize().width,re(J.selections));try{for(T.s();!(W=T.n()).done;){var j,K,X,$,Z=W.value,B=J.getDataObject(Z);B instanceof Q&&B.hasProperty(G)&&(j=null,37===e.which?0<B.getValue("xVal")&&(j=B.getValue("xVal")-1):38===e.which?0<B.getValue("yVal")&&(j=B.getValue("yVal")-1):39===e.which?(K=B.getContainerContentSize(),B.getValue("xVal")+B.getValue("widthVal")<K.width&&(j=B.getValue("xVal")+1)):40===e.which&&(X=B.getContainerContentSize(),B.getValue("yVal")+B.getValue("heightVal")<X.height&&(j=B.getValue("yVal")+1)),null!==j&&($=new me(Z,G,j,me.type.text,J),L.addCommand($)))}}catch(e){T.e(e)}finally{T.f()}L.isEmpty()||J.executeCommand(L),e.preventDefault()}},document.addEventListener("keydown",this.keydownEventListener),this.render(),this.setup()}"undefined"!=typeof exports?exports.ReportBro=$:window.ReportBro=$})()})();